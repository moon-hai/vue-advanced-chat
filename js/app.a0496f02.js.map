{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../src/ChatWindow/RoomsList.vue?d6c4","webpack:///../src/ChatWindow/EmojiPicker.vue?2a52","webpack:///../src/ChatWindow/SvgIcon.vue?5b6e","webpack:///./src/App.vue?4efd","webpack:///./src/firestore/index.js","webpack:///./src/ChatContainer.vue?dc05","webpack:///./src/utils/dates.js","webpack:///../src/ChatWindow/ChatWindow.vue?44ba","webpack:///../src/ChatWindow/RoomsList.vue?71dd","webpack:///../src/ChatWindow/Loader.vue?661b","webpack:///../src/ChatWindow/Loader.vue","webpack:///../src/ChatWindow/Loader.vue?bd7a","webpack:///../src/ChatWindow/Loader.vue?f4ea","webpack:///../src/ChatWindow/SvgIcon.vue?7616","webpack:///../src/ChatWindow/SvgIcon.vue","webpack:///../src/ChatWindow/SvgIcon.vue?f610","webpack:///../src/ChatWindow/SvgIcon.vue?a33d","webpack:///../src/ChatWindow/FormatMessage.vue?0f4d","webpack:///../src/utils/formatString.js","webpack:///../src/ChatWindow/FormatMessage.vue","webpack:///../src/ChatWindow/FormatMessage.vue?5fbc","webpack:///../src/ChatWindow/FormatMessage.vue?257a","webpack:///../src/utils/filterItems.js","webpack:///../src/utils/typingText.js","webpack:///../src/ChatWindow/RoomsList.vue","webpack:///../src/ChatWindow/RoomsList.vue?ef85","webpack:///../src/ChatWindow/RoomsList.vue?6603","webpack:///../src/ChatWindow/Room.vue?7078","webpack:///../src/ChatWindow/Message.vue?2f65","webpack:///../src/ChatWindow/EmojiPicker.vue?785d","webpack:///../src/ChatWindow/EmojiPicker.vue","webpack:///../src/ChatWindow/EmojiPicker.vue?4fe9","webpack:///../src/ChatWindow/EmojiPicker.vue?54f4","webpack:///../src/ChatWindow/Message.vue","webpack:///../src/ChatWindow/Message.vue?16bf","webpack:///../src/ChatWindow/Message.vue?495e","webpack:///../src/ChatWindow/Room.vue","webpack:///../src/ChatWindow/Room.vue?4339","webpack:///../src/ChatWindow/Room.vue?ef29","webpack:///../src/locales/index.js","webpack:///../src/themes/index.js","webpack:///../src/ChatWindow/ChatWindow.vue","webpack:///../src/ChatWindow/ChatWindow.vue?9b52","webpack:///../src/ChatWindow/ChatWindow.vue?c7d7","webpack:///../src/ChatWindow/index.js","webpack:///src/ChatContainer.vue","webpack:///./src/ChatContainer.vue?e975","webpack:///./src/ChatContainer.vue","webpack:///src/App.vue","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/App.vue?f446","webpack:///../src/utils/roomValidation.js","webpack:///../src/ChatWindow/Loader.vue?d97e","webpack:///../src/ChatWindow/ChatWindow.vue?3605","webpack:///../src/ChatWindow/FormatMessage.vue?1281","webpack:///../src/utils/mobileDetection.js","webpack:///./src/assets/logo.png","webpack:///../src/ChatWindow/Message.vue?edfa","webpack:///../src/ChatWindow/Room.vue?4324","webpack:///./src/ChatContainer.vue?8699"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticClass","_v","directives","rawName","expression","on","$event","$$selectedVal","Array","filter","target","options","selected","map","val","_value","currentUserId","multiple","_l","user","_id","domProps","_s","username","theme","attrs","_e","staticRenderFns","config","JSON","parse","process","app","initializeApp","firebase","db","firestore","storageRef","storage","ref","usersRef","collection","roomsRef","messagesRef","roomId","doc","filesRef","child","deleteDbField","FieldValue","serverTimestamp","preventDefault","createRoom","composing","addRoomUsername","disableForm","addNewRoom","addRoomUser","invitedUsername","inviteRoomId","deleteRoomUser","removeUserId","removeRoomId","styles","loadedRooms","loadingRooms","messages","messagesLoaded","roomsLoaded","menuActions","roomMessage","fetchMoreRooms","fetchMessages","sendMessage","editMessage","deleteMessage","openFile","addRoom","menuActionHandler","messageActionHandler","sendMessageReaction","typingMessage","parseTimestamp","timestamp","format","date","seconds","Date","zeroPad","getHours","getMinutes","month","year","day","Intl","DateTimeFormat","num","pad","String","padStart","isSameDay","d1","d2","getFullYear","getMonth","getDate","style","height","cssVars","singleRoom","orderedRooms","room","showAddRoom","showRoomsList","textFormatting","isMobile","fetchRoom","loadingMoreRooms","scopedSlots","_u","index","fn","_t","rooms","loadFirstRoom","messageActions","showSendIcon","showFiles","showAudio","showEmojis","showReactionEmojis","showNewMessagesDivider","showFooter","$listeners","roomInfo","textareaActionHandler","acceptedFiles","toggleRoomsList","class","textMessages","SEARCH","searchRoom","ROOMS_EMPTY","selectedRoomId","openRoom","userStatus","roomName","lastMessage","new","typingUsers","isMessageCheckmarkVisible","distributed","seen","deleted","file","audio","formattedDuration","duration","getLastMessage","unreadCount","loadMoreRooms","slot","infinite","component","size","svgId","svgItem","find","item","path","singleLine","message","checkType","tag","href","content","linkify","require","text","doLinkify","json","compileToJSON","html","compileToHTML","flatten","flattenResult","concat","markdownResult","linkifyResult","type_markdown","bold","italic","strike","underline","pseudo_markdown","end","allowed_chars","type","str","min_index_of","min_index_of_key","links","min_index_from_link","indexOf","keys","forEach","starting_value","io","str_left","substr","str_link","str_right","char","match","RegExp","start","types","parseContent","it","array","arr","a","isInline","isMultiline","markdown","spaces","replace","items","prop","v","toLowerCase","normalize","users","status","state","IS_TYPING","join","ROOM_EMPTY","$emit","menuOpened","action","title","loadingMessages","MESSAGES_EMPTY","CONVERSATION_STARTED","loadMoreMessages","editedMessage","$refs","roomFooter","newMessages","emojisList","hideOptions","addNewMessage","scrollToBottom","isImageCheck","messageReply","url","resetMessage","imageFile","recordAudio","recorder","resetImageFile","onImgLoad","imageDimensions","width","TYPE_MESSAGE","onChangeInput","_k","keyCode","ctrlKey","shiftKey","altKey","metaKey","emojiOpened","addEmoji","proxy","launchFilePicker","staticStyle","onFileChange","files","inputDisabled","newMessage","NEW_MESSAGES","sender_id","messageOffset","isMessageHover","onHoverMessage","onLeaveMessage","roomUsers","replyMessage","replyUsername","MESSAGE_DELETED","top","imageResponsive","isImageLoading","imageHover","stopPropagation","edited","isImage","filteredMessageActions","isMessageActions","isMessageReactions","openOptions","right","roomFooterRef","openEmoji","menuOptionsTop","reaction","float","getEmojiByName","search","append","clickEvent","events","click","emojiReaction","emojis","insert","emojiPickerHeight","positionTop","emojiPickerTop","emojiPickerRight","display","emojiGroup","category","emoji","emojiName","IS_ONLINE","LAST_SEEN","defaultThemeStyles","light","general","color","backgroundInput","colorPlaceholder","colorCaret","colorSpinner","borderStyle","backgroundScrollIcon","container","border","borderRadius","boxShadow","header","background","colorRoomName","colorRoomInfo","footer","borderStyleInput","borderInputSelected","backgroundReply","sidemenu","backgroundHover","backgroundActive","colorActive","borderColorSearch","dropdown","backgroundMe","colorStarted","backgroundDeleted","colorDeleted","colorUsername","colorTimestamp","backgroundDate","colorDate","backgroundSystem","colorSystem","colorReplyUsername","colorReply","backgroundImage","colorNewMessages","backgroundReaction","borderStyleReaction","backgroundReactionHover","borderStyleReactionHover","colorReactionCounter","backgroundReactionMe","borderStyleReactionMe","backgroundReactionHoverMe","borderStyleReactionHoverMe","colorReactionCounterMe","colorMulti","colorMessage","colorStateOnline","colorStateOffline","backgroundCounterBadge","colorCounterBadge","icons","add","toggle","menu","close","closeImage","paperclip","closeOutline","send","sendDisabled","document","pencil","checkmark","checkmarkSeen","eye","dropdownMessage","dropdownMessageBackground","dropdownScroll","microphone","microphoneOff","dark","cssThemeVars","ChatWindow","configurable","Vue","productionTip","render","h","App","$mount","roomsValid","obj","roomsValidate","validate","props","every","validType","isArray","checkObjectValid","partcipantsValid","participantsValidate","messagesValid","undefined","detectMobile","userAgent","getUserAgent","userAgentPart","test","navigator","vendor","opera","Error","iOSDevice","includes","platform"],"mappings":"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A,QACA,gBACA,OACA,QApBA,gCAsBA,MCxH8W,MCQ1W,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCkRf,IACA,eACA,gEAEA,YACA,6BAGA,OACA,iDACA,uCACA,gCACA,kCACA,kCACA,wCACA,oDACA,wCACA,oCACA,yBACA,8CACA,kDACA,0CACA,qCACA,wCAGA,KA1BA,WA2BA,OACA,oBACA,gBACA,cACA,gBACA,iBACA,kBACA,iBACA,mBACA,cACA,eACA,qBAIA,OACA,SACA,aACA,QAFA,WAGA,sBAGA,YAPA,SAOA,GACA,wCACA,+CACA,yBAGA,YAbA,SAaA,GACA,4BAEA,YAhBA,SAgBA,GACA,IACA,kBACA,uBAKA,QAlEA,WAmEA,gEACA,8BACA,qBACA,mBAIA,sBAEA,sBACA,6CACA,+CAIA,UACA,SADA,WAEA,OACA,cACA,sDAGA,cAPA,WAQA,OACA,cACA,gEAGA,QAbA,WAcA,8BAEA,aAhBA,WAiBA,mCAEA,eAnBA,WAoBA,OACA,mEAGA,mBAxBA,WAyBA,OACA,8CACA,uBACA,kEAGA,cA/BA,WA+BA,IACA,sCACA,uDACA,wBAEA,iBApCA,WAqCA,OACA,oCACA,oBACA,uBACA,8BAGA,mBA5CA,WA6CA,OACA,yBACA,oBACA,uBACA,gCAGA,uBApDA,WAqDA,mDACA,oBACA,6DAIA,SACA,eADA,WAEA,OACA,2CACA,wCAGA,eAPA,WAQA,mBACA,qBACA,+DAEA,eAZA,WAaA,6BAEA,eAfA,WAgBA,mBACA,6DACA,0BAEA,SApBA,SAoBA,GACA,yDAEA,qBAvBA,SAuBA,cACA,oBACA,qBACA,yBAEA,uBACA,iEACA,MAEA,eAhCA,WAiCA,+CAEA,oBAnCA,WAoCA,4DAEA,eAtCA,SAsCA,GACA,MACA,iCACA,SACA,mEAEA,aA5CA,WA4CA,WACA,0BACA,qBACA,gBACA,4BACA,oEAEA,YAnDA,WAmDA,WACA,sBAEA,uCACA,qBAEA,8BAEA,uBACA,GACA,iBACA,qBACA,mBAHA,CAOA,kDACA,OAEA,iDACA,8CAEA,EACA,SAEA,uBACA,KACA,MAEA,aAhFA,WAgFA,WACA,sBACA,uBACA,yDAEA,gEAEA,UAvFA,WAwFA,mCACA,+BAEA,WA3FA,WA4FA,oBACA,gEAEA,eA/FA,SA+FA,GACA,2BAEA,oBAlGA,SAkGA,KACA,oCACA,2BACA,WACA,+CAEA,kBACA,wBC3hB0W,MCQtW,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,WCgUf,a,GAAA,c,GACA,a,GAAA,gB,GAAA,UAGA,IACA,YACA,YACA,oBACA,SACA,WACA,UACA,gBAGA,YACA,6BAGA,OACA,iDACA,uCACA,sCACA,yCACA,oCACA,+BACA,0CACA,yCACA,kCACA,0BACA,0CACA,qCACA,wCACA,wCACA,qCACA,qCACA,sCACA,8CACA,kDACA,sCACA,wCACA,0CACA,wCACA,yBACA,gCAGA,KA1CA,WA2CA,OACA,WACA,iBACA,kBACA,mBACA,mBACA,uBACA,UACA,eACA,qBACA,cACA,eACA,eACA,cACA,eACA,kBACA,YACA,kBACA,sBAIA,QAjEA,WAiEA,WACA,oBAEA,6CACA,6BACA,MACA,yBACA,sDAEA,oBAKA,OACA,sEACA,4DAEA,4CACA,SACA,4CAIA,kEACA,iBACA,uBACA,aADA,MAGA,WAHA,EAGA,eAHA,EAGA,eAHA,EAGA,UACA,QAEA,sBACA,SAIA,OACA,gBADA,SACA,GACA,0BACA,wBAEA,KALA,SAKA,gBACA,gCACA,wBACA,mBACA,sBACA,mBACA,8BACA,wDAIA,aACA,aACA,QAFA,SAEA,GACA,qCAGA,SAtBA,SAsBA,gBACA,uBACA,UACA,gIAIA,iCACA,KAEA,oCACA,wBAEA,uBACA,6CACA,gBACA,UAGA,oBACA,4BACA,6DACA,UACA,uBACA,iCACA,uBACA,KAGA,eAnDA,SAmDA,GACA,6BACA,oDAIA,UACA,WADA,WAEA,iEACA,mEAEA,KALA,WAKA,WACA,uEAEA,eARA,WASA,OACA,mBACA,uBACA,uBACA,mBAGA,oBAhBA,WAiBA,kDAEA,cAnBA,WAoBA,8BAEA,YAtBA,WAuBA,2DAEA,WAzBA,WAyBA,WA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A0BA,GACA,8FAEA,YA7BA,SA6BA,GACA,8FAEA,cAhCA,SAgCA,GACA,oEAEA,SAnCA,YAmCA,2BACA,8CAEA,kBAtCA,SAsCA,GACA,kCACA,SACA,2BAGA,qBA5CA,SA4CA,GACA,qEACA,GADA,IAEA,4BAGA,oBAlDA,SAkDA,GACA,oEACA,GADA,IAEA,4BAGA,cAxDA,SAwDA,GACA,6BACA,UACA,2BAGA,sBA9DA,SA8DA,GACA,sCACA,UACA,6BC5S6W,MCQzW,I,UAAY,eACd,GACA,EACA,GACA,EACA,KACA,KACA,OAIa,M,QCjBfhd,OAAO8B,eAAeqb,GAAY,UAAW,CAC5CC,cAAc,EACdrb,YAAY,EACZK,MAH4C,SAGtCib,GACLA,EAAIxP,UAAU,cAAesP,OAIhBA,UC+Ef,IACA,YACA,eAGA,gCAEA,KAPA,WAQA,OACA,gBACA,SACA,gBACA,cACA,eACA,gBACA,YACA,2BACA,oBACA,kBACA,mBACA,YACA,kBACA,eACA,mBACA,iBACA,kBACA,aACA,sBACA,eACA,gBACA,mBACA,kBACA,mBACA,kBACA,gBACA,eACA,aACA,wCACA,wCACA,yCAEA,0CAKA,QA9CA,WA+CA,kBACA,+BAGA,UAnDA,WAoDA,mBAGA,UACA,YADA,WAEA,mDAIA,SACA,WADA,WAEA,qBACA,gCACA,wBACA,cACA,oBACA,qBACA,mBACA,uDACA,uBACA,sBAGA,cAdA,WAeA,iBACA,uBACA,wBACA,sBACA,kDACA,mBAGA,WAvBA,WAwBA,kBACA,uBAGA,eA5BA,WA4BA,4KACA,yBADA,yCACA,kBADA,cAGA,IACA,gDACA,8BACA,sBAEA,6CARA,SAUA,QAVA,cAUA,EAVA,OAaA,6CAEA,wCACA,qCAEA,KACA,uBACA,oCACA,uDACA,sBACA,gBAMA,KACA,uBACA,QACA,OACA,MACA,qCAEA,aApCA,4BAuCA,YAvCA,sBAuCA,eAvCA,wCAuCA,WAvCA,iCAyCA,KACA,uBACA,kEAEA,oCACA,uDACA,+BAIA,KAEA,oCACA,WAEA,kBACA,8CAGA,WACA,6DAEA,MACA,0BACA,YACA,UAEA,yCAEA,S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","file":"js/app.a0496f02.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/vue-advanced-chat/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../demo/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../demo/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../demo/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../demo/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../demo/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomsList.vue?vue&type=style&index=0&id=558cb878&lang=scss&scoped=true&\"","export * from \"-!../../demo/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../demo/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../demo/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../demo/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../demo/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./EmojiPicker.vue?vue&type=style&index=0&id=1e137646&lang=scss&scoped=true&\"","export * from \"-!../../demo/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../demo/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../demo/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../demo/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../demo/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./SvgIcon.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"app-container\"},[_c('span',{staticClass:\"user-logged\"},[_vm._v(\"Logged as\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentUserId),expression:\"currentUserId\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.currentUserId=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.users),function(user){return _c('option',{key:user._id,domProps:{\"value\":user._id}},[_vm._v(\" \"+_vm._s(user.username)+\" \")])}),0),_c('div',{staticClass:\"button-theme\"},[_c('button',{staticClass:\"button-light\",on:{\"click\":function($event){_vm.theme = 'light'}}},[_vm._v(\"Light\")]),_c('button',{staticClass:\"button-dark\",on:{\"click\":function($event){_vm.theme = 'dark'}}},[_vm._v(\"Dark\")])]),(_vm.showChat)?_c('chat-container',{attrs:{\"currentUserId\":_vm.currentUserId,\"theme\":_vm.theme}}):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import app from 'firebase/app'\nimport 'firebase/firestore'\nimport 'firebase/database'\nimport 'firebase/storage'\n\nconst config =\n\tprocess.env.NODE_ENV === 'development'\n\t\t? JSON.parse(process.env.VUE_APP_FIREBASE_CONFIG)\n\t\t: JSON.parse(process.env.VUE_APP_FIREBASE_CONFIG_PUBLIC)\n\napp.initializeApp(config)\n\nexport const firebase = app\nexport const db = app.firestore()\nexport const storageRef = app.storage().ref()\n\nexport const usersRef = db.collection('users')\nexport const roomsRef = db.collection('chatRooms')\nexport const messagesRef = roomId => roomsRef.doc(roomId).collection('messages')\n\nexport const filesRef = storageRef.child('files')\n\nexport const dbTimestamp = firebase.firestore.FieldValue.serverTimestamp()\nexport const deleteDbField = firebase.firestore.FieldValue.delete()\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"window-container\"},[_c('div',{staticClass:\"chat-forms\"},[(_vm.addNewRoom)?_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.createRoom($event)}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.addRoomUsername),expression:\"addRoomUsername\"}],attrs:{\"type\":\"text\",\"placeholder\":\"Add username to create a room\"},domProps:{\"value\":(_vm.addRoomUsername)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.addRoomUsername=$event.target.value}}}),_c('button',{attrs:{\"type\":\"submit\",\"disabled\":_vm.disableForm || !_vm.addRoomUsername}},[_vm._v(\" Create Room \")]),_c('button',{staticClass:\"button-cancel\",on:{\"click\":function($event){_vm.addNewRoom = false}}},[_vm._v(\" Cancel \")])]):_vm._e(),(_vm.inviteRoomId)?_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.addRoomUser($event)}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.invitedUsername),expression:\"invitedUsername\"}],attrs:{\"type\":\"text\",\"placeholder\":\"Add user to the room\"},domProps:{\"value\":(_vm.invitedUsername)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.invitedUsername=$event.target.value}}}),_c('button',{attrs:{\"type\":\"submit\",\"disabled\":_vm.disableForm || !_vm.invitedUsername}},[_vm._v(\" Add User \")]),_c('button',{staticClass:\"button-cancel\",on:{\"click\":function($event){_vm.inviteRoomId = null}}},[_vm._v(\" Cancel \")])]):_vm._e(),(_vm.removeRoomId)?_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.deleteRoomUser($event)}}},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.removeUserId),expression:\"removeUserId\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.removeUserId=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"default\":\"\",\"value\":\"\"}},[_vm._v(\"Select User\")]),_vm._l((_vm.removeUsers),function(user){return _c('option',{key:user._id,domProps:{\"value\":user._id}},[_vm._v(\" \"+_vm._s(user.username)+\" \")])})],2),_c('button',{attrs:{\"type\":\"submit\",\"disabled\":_vm.disableForm || !_vm.removeUserId}},[_vm._v(\" Remove User \")]),_c('button',{staticClass:\"button-cancel\",on:{\"click\":function($event){_vm.removeRoomId = null}}},[_vm._v(\" Cancel \")])]):_vm._e()]),_c('chat-window',{attrs:{\"height\":\"calc(100vh - 80px)\",\"theme\":_vm.theme,\"styles\":_vm.styles,\"current-user-id\":_vm.currentUserId,\"rooms\":_vm.loadedRooms,\"loading-rooms\":_vm.loadingRooms,\"messages\":_vm.messages,\"messages-loaded\":_vm.messagesLoaded,\"rooms-loaded\":_vm.roomsLoaded,\"menu-actions\":_vm.menuActions,\"room-message\":_vm.roomMessage},on:{\"fetch-more-rooms\":_vm.fetchMoreRooms,\"fetch-messages\":_vm.fetchMessages,\"send-message\":_vm.sendMessage,\"edit-message\":_vm.editMessage,\"delete-message\":_vm.deleteMessage,\"open-file\":_vm.openFile,\"add-room\":_vm.addRoom,\"menu-action-handler\":_vm.menuActionHandler,\"message-action-handler\":_vm.messageActionHandler,\"send-message-reaction\":_vm.sendMessageReaction,\"typing-message\":_vm.typingMessage}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const parseTimestamp = (timestamp, format = '') => {\n\tif (!timestamp) return\n\n\tconst date = timestamp.seconds\n\t\t? new Date(timestamp.seconds * 1000)\n\t\t: timestamp\n\n\tif (format === 'HH:mm') {\n\t\treturn `${zeroPad(date.getHours(), 2)}:${zeroPad(date.getMinutes(), 2)}`\n\t} else if (format === 'DD MMMM YYYY') {\n\t\tconst options = { month: 'long', year: 'numeric', day: 'numeric' }\n\t\treturn `${new Intl.DateTimeFormat('en-GB', options).format(date)}`\n\t} else if (format === 'DD/MM/YY') {\n\t\tconst options = { month: 'numeric', year: 'numeric', day: 'numeric' }\n\t\treturn `${new Intl.DateTimeFormat('en-GB', options).format(date)}`\n\t} else if (format === 'DD MMMM, HH:mm') {\n\t\tconst options = { month: 'long', day: 'numeric' }\n\t\treturn `${new Intl.DateTimeFormat('en-GB', options).format(\n\t\t\tdate\n\t\t)}, ${zeroPad(date.getHours(), 2)}:${zeroPad(date.getMinutes(), 2)}`\n\t}\n\n\treturn date\n}\n\nconst zeroPad = (num, pad) => {\n\treturn String(num).padStart(pad, '0')\n}\n\nexport const isSameDay = (d1, d2) => {\n\treturn (\n\t\td1.getFullYear() === d2.getFullYear() &&\n\t\td1.getMonth() === d2.getMonth() &&\n\t\td1.getDate() === d2.getDate()\n\t)\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vac-card-window\",style:([{ height: _vm.height }, _vm.cssVars])},[_c('div',{staticClass:\"vac-chat-container\"},[(!_vm.singleRoom)?_c('rooms-list',{attrs:{\"current-user-id\":_vm.currentUserId,\"rooms\":_vm.orderedRooms,\"loading-rooms\":_vm.loadingRooms,\"rooms-loaded\":_vm.roomsLoaded,\"room\":_vm.room,\"text-messages\":_vm.t,\"show-add-room\":_vm.showAddRoom,\"show-rooms-list\":_vm.showRoomsList,\"text-formatting\":_vm.textFormatting,\"is-mobile\":_vm.isMobile},on:{\"fetch-room\":_vm.fetchRoom,\"fetch-more-rooms\":_vm.fetchMoreRooms,\"loading-more-rooms\":function($event){_vm.loadingMoreRooms = $event},\"add-room\":_vm.addRoom},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(index,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)}):_vm._e(),_c('room',{attrs:{\"current-user-id\":_vm.currentUserId,\"rooms\":_vm.rooms,\"room-id\":_vm.room.roomId || '',\"load-first-room\":_vm.loadFirstRoom,\"messages\":_vm.messages,\"room-message\":_vm.roomMessage,\"messages-loaded\":_vm.messagesLoaded,\"menu-actions\":_vm.menuActions,\"message-actions\":_vm.messageActions,\"show-send-icon\":_vm.showSendIcon,\"show-files\":_vm.showFiles,\"show-audio\":_vm.showAudio,\"show-emojis\":_vm.showEmojis,\"show-reaction-emojis\":_vm.showReactionEmojis,\"show-new-messages-divider\":_vm.showNewMessagesDivider,\"show-footer\":_vm.showFooter,\"text-messages\":_vm.t,\"single-room\":_vm.singleRoom,\"show-rooms-list\":_vm.showRoomsList,\"text-formatting\":_vm.textFormatting,\"is-mobile\":_vm.isMobile,\"loading-rooms\":_vm.loadingRooms,\"room-info\":_vm.$listeners.roomInfo,\"textarea-action\":_vm.$listeners.textareaActionHandler,\"accepted-files\":_vm.acceptedFiles},on:{\"toggle-rooms-list\":_vm.toggleRoomsList,\"room-info\":_vm.roomInfo,\"fetch-messages\":_vm.fetchMessages,\"send-message\":_vm.sendMessage,\"edit-message\":_vm.editMessage,\"delete-message\":_vm.deleteMessage,\"open-file\":_vm.openFile,\"menu-action-handler\":_vm.menuActionHandler,\"message-action-handler\":_vm.messageActionHandler,\"send-message-reaction\":_vm.sendMessageReaction,\"typing-message\":_vm.typingMessage,\"textarea-action-handler\":_vm.textareaActionHandler},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(index,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showRoomsList),expression:\"showRoomsList\"}],staticClass:\"vac-rooms-container vac-app-border-r\",class:{ 'vac-rooms-container-full': _vm.isMobile }},[_vm._t(\"rooms-header\"),_c('div',{staticClass:\"vac-box-search\"},[(!_vm.loadingRooms && _vm.rooms.length)?_c('div',{staticClass:\"vac-icon-search\"},[_vm._t(\"search-icon\",[_c('svg-icon',{attrs:{\"name\":\"search\"}})])],2):_vm._e(),(!_vm.loadingRooms && _vm.rooms.length)?_c('input',{staticClass:\"vac-input\",attrs:{\"type\":\"search\",\"placeholder\":_vm.textMessages.SEARCH,\"autocomplete\":\"off\"},on:{\"input\":_vm.searchRoom}}):_vm._e(),(_vm.showAddRoom)?_c('div',{staticClass:\"vac-svg-button vac-add-icon\",on:{\"click\":_vm.addRoom}},[_vm._t(\"add-icon\",[_c('svg-icon',{attrs:{\"name\":\"add\"}})])],2):_vm._e()]),_c('loader',{attrs:{\"show\":_vm.loadingRooms}}),(!_vm.loadingRooms && !_vm.rooms.length)?_c('div',{staticClass:\"vac-rooms-empty\"},[_vm._t(\"rooms-empty\",[_vm._v(\" \"+_vm._s(_vm.textMessages.ROOMS_EMPTY)+\" \")])],2):_vm._e(),(!_vm.loadingRooms)?_c('div',{staticClass:\"vac-room-list\"},[_vm._l((_vm.filteredRooms),function(room){return _c('div',{key:room.roomId,staticClass:\"vac-room-item\",class:{ 'vac-room-selected': _vm.selectedRoomId === room.roomId },attrs:{\"id\":room.roomId},on:{\"click\":function($event){return _vm.openRoom(room)}}},[_vm._t(\"room-list-item\",[(room.avatar)?_c('div',{staticClass:\"vac-room-avatar\",style:({ 'background-image': (\"url('\" + (room.avatar) + \"')\") })}):_vm._e(),_c('div',{staticClass:\"vac-name-container vac-text-ellipsis\"},[_c('div',{staticClass:\"vac-title-container\"},[(_vm.userStatus(room))?_c('div',{staticClass:\"vac-state-circle\",class:{ 'vac-state-online': _vm.userStatus(room) === 'online' }}):_vm._e(),_c('div',{staticClass:\"vac-room-name vac-text-ellipsis\"},[_vm._v(\" \"+_vm._s(room.roomName)+\" \")]),(room.lastMessage)?_c('div',{staticClass:\"vac-text-date\"},[_vm._v(\" \"+_vm._s(room.lastMessage.timestamp)+\" \")]):_vm._e()]),_c('div',{staticClass:\"vac-text-last\",class:{\n\t\t\t\t\t\t\t'vac-message-new':\n\t\t\t\t\t\t\t\troom.lastMessage && room.lastMessage.new && !_vm.typingUsers(room)\n\t\t\t\t\t\t}},[(_vm.isMessageCheckmarkVisible(room))?_c('span',[_vm._t(\"checkmark-icon\",[_c('svg-icon',{staticClass:\"vac-icon-check\",attrs:{\"name\":room.lastMessage.distributed\n\t\t\t\t\t\t\t\t\t\t\t? 'double-checkmark'\n\t\t\t\t\t\t\t\t\t\t\t: 'checkmark',\"param\":room.lastMessage.seen ? 'seen' : ''}})],null,room.lastMessage)],2):_vm._e(),(\n\t\t\t\t\t\t\t\troom.lastMessage &&\n\t\t\t\t\t\t\t\t\t!room.lastMessage.deleted &&\n\t\t\t\t\t\t\t\t\troom.lastMessage.file &&\n\t\t\t\t\t\t\t\t\troom.lastMessage.file.audio\n\t\t\t\t\t\t\t)?_c('div',{staticClass:\"vac-text-ellipsis\"},[_vm._t(\"microphone-icon\",[_c('svg-icon',{staticClass:\"vac-icon-microphone\",attrs:{\"name\":\"microphone\"}})]),_vm._v(\" \"+_vm._s(_vm.formattedDuration(room.lastMessage.file.duration))+\" \")],2):(room.lastMessage)?_c('format-message',{attrs:{\"content\":_vm.getLastMessage(room),\"deleted\":!!room.lastMessage.deleted && !_vm.typingUsers(room),\"linkify\":false,\"text-formatting\":_vm.textFormatting,\"single-line\":true},scopedSlots:_vm._u([{key:\"deleted-icon\",fn:function(data){return [_vm._t(\"deleted-icon\",null,null,data)]}}],null,true)}):_vm._e(),(!room.lastMessage && _vm.typingUsers(room))?_c('div',{staticClass:\"vac-text-ellipsis\"},[_vm._v(\" \"+_vm._s(_vm.typingUsers(room))+\" \")]):_vm._e(),(room.unreadCount)?_c('div',{staticClass:\"vac-room-badge\"},[_vm._v(\" \"+_vm._s(room.unreadCount)+\" \")]):_vm._e()],1)])],null,{ room: room })],2)}),_c('transition',{attrs:{\"name\":\"vac-fade-message\"}},[(_vm.rooms.length && !_vm.loadingRooms)?_c('infinite-loading',{attrs:{\"spinner\":\"spiral\"},on:{\"infinite\":_vm.loadMoreRooms}},[_c('div',{attrs:{\"slot\":\"spinner\"},slot:\"spinner\"},[_c('loader',{attrs:{\"show\":true,\"infinite\":true}})],1),_c('div',{attrs:{\"slot\":\"no-results\"},slot:\"no-results\"}),_c('div',{attrs:{\"slot\":\"no-more\"},slot:\"no-more\"})]):_vm._e()],1)],2):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"vac-fade-spinner\",\"appear\":\"\"}},[(_vm.show)?_c('div',{class:{\n\t\t\t'vac-container-center': !_vm.infinite,\n\t\t\t'vac-container-top': _vm.infinite\n\t\t}},[_c('div',{attrs:{\"id\":\"vac-circle\"}})]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<transition name=\"vac-fade-spinner\" appear>\n\t\t<div\n\t\t\t:class=\"{\n\t\t\t\t'vac-container-center': !infinite,\n\t\t\t\t'vac-container-top': infinite\n\t\t\t}\"\n\t\t\tv-if=\"show\"\n\t\t>\n\t\t\t<div id=\"vac-circle\"></div>\n\t\t</div>\n\t</transition>\n</template>\n\n<script>\nexport default {\n\tname: 'loader',\n\tprops: ['show', 'infinite']\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.vac-container-center {\n\tposition: absolute;\n\tleft: 50%;\n\ttop: 50%;\n\ttransform: translate(-50%, -50%);\n\tz-index: 9;\n}\n\n.vac-container-top {\n\tpadding: 21px;\n\n\t#vac-circle {\n\t\theight: 20px;\n\t\twidth: 20px;\n\t}\n}\n\n#vac-circle {\n\tmargin: auto;\n\theight: 28px;\n\twidth: 28px;\n\tborder: 3px rgba(0, 0, 0, 0.25) solid;\n\tborder-top: 3px var(--chat-color-spinner) solid;\n\tborder-right: 3px var(--chat-color-spinner) solid;\n\tborder-bottom: 3px var(--chat-color-spinner) solid;\n\tborder-radius: 50%;\n\t-webkit-animation: vac-spin 1s infinite linear;\n\tanimation: vac-spin 1s infinite linear;\n}\n\n@media only screen and (max-width: 768px) {\n\t#vac-circle {\n\t\theight: 24px;\n\t\twidth: 24px;\n\t}\n\n\t.vac-container-top {\n\t\tpadding: 18px;\n\n\t\t#vac-circle {\n\t\t\theight: 16px;\n\t\t\twidth: 16px;\n\t\t}\n\t}\n}\n\n@-webkit-keyframes vac-spin {\n\tfrom {\n\t\t-webkit-transform: rotate(0deg);\n\t\ttransform: rotate(0deg);\n\t}\n\tto {\n\t\t-webkit-transform: rotate(359deg);\n\t\ttransform: rotate(359deg);\n\t}\n}\n@keyframes vac-spin {\n\tfrom {\n\t\t-webkit-transform: rotate(0deg);\n\t\ttransform: rotate(0deg);\n\t\t-webkit-transform: rotate(0deg);\n\t\ttransform: rotate(0deg);\n\t}\n\tto {\n\t\t-webkit-transform: rotate(359deg);\n\t\ttransform: rotate(359deg);\n\t\t-webkit-transform: rotate(359deg);\n\t\ttransform: rotate(359deg);\n\t}\n}\n</style>\n","import mod from \"-!../../demo/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../demo/node_modules/thread-loader/dist/cjs.js!../../demo/node_modules/babel-loader/lib/index.js!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../demo/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../demo/node_modules/thread-loader/dist/cjs.js!../../demo/node_modules/babel-loader/lib/index.js!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Loader.vue?vue&type=template&id=70a1ca66&scoped=true&\"\nimport script from \"./Loader.vue?vue&type=script&lang=js&\"\nexport * from \"./Loader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Loader.vue?vue&type=style&index=0&id=70a1ca66&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"70a1ca66\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"version\":\"1.1\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":(\"0 0 \" + _vm.size + \" \" + _vm.size)}},[_c('path',{attrs:{\"id\":_vm.svgId,\"d\":_vm.svgItem.find(function (item) { return item.name === _vm.name; }).path}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<svg\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\txmlns:xlink=\"http://www.w3.org/1999/xlink\"\n\t\tversion=\"1.1\"\n\t\twidth=\"24\"\n\t\theight=\"24\"\n\t\t:viewBox=\"`0 0 ${size} ${size}`\"\n\t>\n\t\t<path :id=\"svgId\" :d=\"svgItem.find(item => item.name === name).path\" />\n\t</svg>\n</template>\n\n<script>\nexport default {\n\tname: 'svg-icon',\n\tprops: ['name', 'path', 'param'],\n\n\tcomputed: {\n\t\tsvgId() {\n\t\t\tconst param = this.param ? '-' + this.param : ''\n\t\t\treturn `vac-icon-${this.name}${param}`\n\t\t},\n\t\tsize() {\n\t\t\treturn this.svgItem.find(item => item.name === this.name).large\n\t\t\t\t? '512'\n\t\t\t\t: '24'\n\t\t}\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tsvgItem: [\n\t\t\t\t{\n\t\t\t\t\tname: 'search',\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'add',\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'toggle',\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M5,13L9,17L7.6,18.42L1.18,12L7.6,5.58L9,7L5,11H21V13H5M21,6V8H11V6H21M21,16V18H11V16H21Z'\n\t\t\t\t},\n\n\t\t\t\t{\n\t\t\t\t\tname: 'menu',\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'close',\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'file',\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M14,17H7V15H14M17,13H7V11H17M17,9H7V7H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'paperclip',\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'close-outline',\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'send',\n\t\t\t\t\tpath: 'M2,21L23,12L2,3V10L17,12L2,14V21Z'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'emoji',\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'document',\n\t\t\t\t\tpath: 'M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'pencil',\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'checkmark',\n\t\t\t\t\tpath: 'M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'double-checkmark',\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'eye',\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'dropdown',\n\t\t\t\t\tpath: 'M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'deleted',\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12C4,13.85 4.63,15.55 5.68,16.91L16.91,5.68C15.55,4.63 13.85,4 12,4M12,20A8,8 0 0,0 20,12C20,10.15 19.37,8.45 18.32,7.09L7.09,18.32C8.45,19.37 10.15,20 12,20Z'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'microphone',\n\t\t\t\t\tlarge: true,\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M432.8,216.4v39.2c0,45.2-15.3,84.3-45.2,118.4c-29.8,33.2-67.3,52.8-111.6,57.9v40.9h78.4c5.1,0,10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6c0,5.1-1.7,10.2-6,13.6c-4.3,4.3-8.5,6-13.6,6H157.6c-5.1,0-10.2-1.7-13.6-6c-4.3-4.3-6-8.5-6-13.6c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6H236v-40.9c-44.3-5.1-81.8-23.9-111.6-57.9s-45.2-73.3-45.2-118.4v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6s10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6v39.2c0,37.5,13.6,70.7,40,97.1s59.6,40,97.1,40s70.7-13.6,97.1-40c26.4-26.4,40-59.6,40-97.1v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6c5.1,0,10.2,1.7,13.6,6C430.2,206.2,432.8,211.3,432.8,216.4z M353.5,98v157.6c0,27.3-9.4,50.3-29,69c-19.6,19.6-42.6,29-69,29s-50.3-9.4-69-29c-19.6-19.6-29-42.6-29-69V98c0-27.3,9.4-50.3,29-69c19.6-19.6,42.6-29,69-29s50.3,9.4,69,29C344.2,47.7,353.5,71.6,353.5,98z'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'microphone-off',\n\t\t\t\t\tlarge: true,\n\t\t\t\t\tpath:\n\t\t\t\t\t\t'M432.8,216.4v39.2c0,45.2-15.3,84.3-45.2,118.4c-29.8,33.2-67.3,52.8-111.6,57.9v40.9h78.4c5.1,0,10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6c0,5.1-1.7,10.2-6,13.6c-4.3,4.3-8.5,6-13.6,6H157.6c-5.1,0-10.2-1.7-13.6-6c-4.3-4.3-6-8.5-6-13.6c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6H236v-40.9c-44.3-5.1-81.8-23.9-111.6-57.9s-45.2-73.3-45.2-118.4v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6s10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6v39.2c0,37.5,13.6,70.7,40,97.1s59.6,40,97.1,40s70.7-13.6,97.1-40c26.4-26.4,40-59.6,40-97.1v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6c5.1,0,10.2,1.7,13.6,6C430.2,206.2,432.8,211.3,432.8,216.4z M353.5,98v157.6c0,27.3-9.4,50.3-29,69c-19.6,19.6-42.6,29-69,29s-50.3-9.4-69-29c-19.6-19.6-29-42.6-29-69V98c0-27.3,9.4-50.3,29-69c19.6-19.6,42.6-29,69-29s50.3,9.4,69,29C344.2,47.7,353.5,71.6,353.5,98z'\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n#vac-icon-search {\n\tfill: var(--chat-icon-color-search);\n}\n\n#vac-icon-add {\n\tfill: var(--chat-icon-color-add);\n}\n\n#vac-icon-toggle {\n\tfill: var(--chat-icon-color-toggle);\n}\n\n#vac-icon-menu {\n\tfill: var(--chat-icon-color-menu);\n}\n\n#vac-icon-close {\n\tfill: var(--chat-icon-color-close);\n}\n\n#vac-icon-close-image {\n\tfill: var(--chat-icon-color-close-image);\n}\n\n#vac-icon-file {\n\tfill: var(--chat-icon-color-file);\n}\n\n#vac-icon-paperclip {\n\tfill: var(--chat-icon-color-paperclip);\n}\n\n#vac-icon-close-outline {\n\tfill: var(--chat-icon-color-close-outline);\n}\n\n#vac-icon-send {\n\tfill: var(--chat-icon-color-send);\n}\n\n#vac-icon-send-disabled {\n\tfill: var(--chat-icon-color-send-disabled);\n}\n\n#vac-icon-emoji {\n\tfill: var(--chat-icon-color-emoji);\n}\n\n#vac-icon-emoji-reaction {\n\tfill: var(--chat-icon-color-emoji-reaction);\n}\n\n#vac-icon-document {\n\tfill: var(--chat-icon-color-document);\n}\n\n#vac-icon-pencil {\n\tfill: var(--chat-icon-color-pencil);\n}\n\n#vac-icon-checkmark,\n#vac-icon-double-checkmark {\n\tfill: var(--chat-icon-color-checkmark);\n}\n\n#vac-icon-checkmark-seen,\n#vac-icon-double-checkmark-seen {\n\tfill: var(--chat-icon-color-checkmark-seen);\n}\n\n#vac-icon-eye {\n\tfill: var(--chat-icon-color-eye);\n}\n\n#vac-icon-dropdown-message {\n\tfill: var(--chat-icon-color-dropdown-message);\n}\n\n#vac-icon-dropdown-scroll {\n\tfill: var(--chat-icon-color-dropdown-scroll);\n}\n\n#vac-icon-microphone-off {\n\tfill: var(--chat-icon-color-microphone-off);\n}\n</style>\n","import mod from \"-!../../demo/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../demo/node_modules/thread-loader/dist/cjs.js!../../demo/node_modules/babel-loader/lib/index.js!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./SvgIcon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../demo/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../demo/node_modules/thread-loader/dist/cjs.js!../../demo/node_modules/babel-loader/lib/index.js!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./SvgIcon.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SvgIcon.vue?vue&type=template&id=6b938009&\"\nimport script from \"./SvgIcon.vue?vue&type=script&lang=js&\"\nexport * from \"./SvgIcon.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SvgIcon.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ 'vac-text-ellipsis': _vm.singleLine }},[(_vm.textFormatting)?_c('div',{class:{ 'vac-text-ellipsis': _vm.singleLine }},[_vm._l((_vm.linkifiedMessage),function(message,i){return [_c(_vm.checkType(message, 'url') ? 'a' : 'span',{key:i,tag:\"component\",class:{\n\t\t\t\t\t'vac-text-ellipsis': _vm.singleLine,\n\t\t\t\t\t'vac-text-deleted': _vm.deleted,\n\t\t\t\t\t'vac-text-bold': _vm.checkType(message, 'bold'),\n\t\t\t\t\t'vac-text-italic': _vm.checkType(message, 'italic'),\n\t\t\t\t\t'vac-text-strike': _vm.checkType(message, 'strike'),\n\t\t\t\t\t'vac-text-underline': _vm.checkType(message, 'underline'),\n\t\t\t\t\t'vac-text-inline-code':\n\t\t\t\t\t\t!_vm.singleLine && _vm.checkType(message, 'inline-code'),\n\t\t\t\t\t'vac-text-multiline-code':\n\t\t\t\t\t\t!_vm.singleLine && _vm.checkType(message, 'multiline-code')\n\t\t\t\t},attrs:{\"href\":message.href,\"target\":\"_blank\"}},[_vm._t(\"deleted-icon\",[(_vm.deleted)?_c('svg-icon',{staticClass:\"vac-icon-deleted\",attrs:{\"name\":\"deleted\"}}):_vm._e()],null,{ deleted: _vm.deleted }),_vm._v(\" \"+_vm._s(message.value)+\" \")],2)]})],2):_c('div',[_vm._v(_vm._s(_vm.content))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const linkify = require('linkifyjs')\n\nexport default (text, doLinkify) => {\n\tconst json = compileToJSON(text)\n\n\tconst html = compileToHTML(json)\n\n\tconst flatten = flattenResult(html)\n\n\tconst result = [].concat.apply([], flatten)\n\n\tmarkdownResult(result)\n\n\tif (doLinkify) linkifyResult(result)\n\n\treturn result\n}\n\nconst type_markdown = {\n\tbold: '*',\n\titalic: '_',\n\tstrike: '~',\n\tunderline: '°'\n}\n\nconst pseudo_markdown = {\n\t[type_markdown.bold]: {\n\t\tend: '\\\\' + [type_markdown.bold],\n\t\tallowed_chars: '.',\n\t\ttype: 'bold'\n\t},\n\t[type_markdown.italic]: {\n\t\tend: [type_markdown.italic],\n\t\tallowed_chars: '.',\n\t\ttype: 'italic'\n\t},\n\t[type_markdown.strike]: {\n\t\tend: [type_markdown.strike],\n\t\tallowed_chars: '.',\n\t\ttype: 'strike'\n\t},\n\t[type_markdown.underline]: {\n\t\tend: [type_markdown.underline],\n\t\tallowed_chars: '.',\n\t\ttype: 'underline'\n\t},\n\t'```': {\n\t\tend: '```',\n\t\tallowed_chars: '(.|\\n)',\n\t\ttype: 'multiline-code'\n\t},\n\t'`': {\n\t\tend: '`',\n\t\tallowed_chars: '.',\n\t\ttype: 'inline-code'\n\t}\n\t// ':': {\n\t// \tallowed_chars: '[a-z_]',\n\t// \tend: ':',\n\t// \tobject: child => <Emojione type={child[0]} />\n\t// },\n\t// '@': {\n\t// \tallowed_chars: '[a-z_.-A-Z0-9]',\n\t// \tend: ' ',\n\t// \tobject: child => <User data={child} />\n\t// }\n}\n\nfunction compileToJSON(str) {\n\tlet result = []\n\tlet min_index_of = -1\n\tlet min_index_of_key = null\n\n\tlet links = linkify.find(str)\n\tlet min_index_from_link = false\n\n\tif (links.length > 0) {\n\t\tmin_index_of = str.indexOf(links[0].value)\n\t\tmin_index_from_link = true\n\t}\n\n\tObject.keys(pseudo_markdown).forEach(starting_value => {\n\t\tconst io = str.indexOf(starting_value)\n\t\tif (io >= 0 && (min_index_of < 0 || io < min_index_of)) {\n\t\t\tmin_index_of = io\n\t\t\tmin_index_of_key = starting_value\n\t\t\tmin_index_from_link = false\n\t\t}\n\t})\n\n\tif (min_index_from_link && min_index_of_key !== -1) {\n\t\tlet str_left = str.substr(0, min_index_of)\n\t\tlet str_link = str.substr(min_index_of, links[0].value.length)\n\t\tlet str_right = str.substr(min_index_of + links[0].value.length)\n\t\tresult.push(str_left)\n\t\tresult.push(str_link)\n\t\tresult = result.concat(compileToJSON(str_right))\n\t\treturn result\n\t}\n\n\tif (min_index_of_key) {\n\t\tlet str_left = str.substr(0, min_index_of)\n\t\tconst char = min_index_of_key\n\t\tlet str_right = str.substr(min_index_of + char.length)\n\n\t\tconst match = str_right.match(\n\t\t\tnew RegExp(\n\t\t\t\t'^(' +\n\t\t\t\t\t(pseudo_markdown[char].allowed_chars || '.') +\n\t\t\t\t\t'*' +\n\t\t\t\t\t(pseudo_markdown[char].end ? '?' : '') +\n\t\t\t\t\t')' +\n\t\t\t\t\t(pseudo_markdown[char].end\n\t\t\t\t\t\t? '(' + pseudo_markdown[char].end + ')'\n\t\t\t\t\t\t: ''),\n\t\t\t\t'm'\n\t\t\t)\n\t\t)\n\t\tif (!match) {\n\t\t\tstr_left = str_left + char\n\t\t\tresult.push(str_left)\n\t\t} else {\n\t\t\tif (str_left) {\n\t\t\t\tresult.push(str_left)\n\t\t\t}\n\t\t\tconst object = {\n\t\t\t\tstart: char,\n\t\t\t\tcontent: compileToJSON(match[1]),\n\t\t\t\tend: match[2],\n\t\t\t\ttype: pseudo_markdown[char].type\n\t\t\t}\n\t\t\tresult.push(object)\n\t\t\tstr_right = str_right.substr(match[0].length)\n\t\t}\n\t\tresult = result.concat(compileToJSON(str_right))\n\t\treturn result\n\t} else {\n\t\tif (str) {\n\t\t\treturn [str]\n\t\t} else {\n\t\t\treturn []\n\t\t}\n\t}\n}\n\nfunction compileToHTML(json) {\n\tconst result = []\n\n\tjson.forEach(item => {\n\t\tif (typeof item == 'string') {\n\t\t\tresult.push({ types: [], value: item })\n\t\t} else {\n\t\t\tif (pseudo_markdown[item.start]) {\n\t\t\t\tresult.push(parseContent(item))\n\t\t\t}\n\t\t}\n\t})\n\n\treturn result\n}\n\nfunction parseContent(item) {\n\tconst result = []\n\n\titem.content.forEach(it => {\n\t\tif (typeof it == 'string') {\n\t\t\tresult.push({\n\t\t\t\ttypes: [item.type],\n\t\t\t\tvalue: it\n\t\t\t})\n\t\t} else {\n\t\t\tit.content.forEach(i => {\n\t\t\t\tif (typeof i == 'string') {\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttypes: [it.type].concat([item.type]),\n\t\t\t\t\t\tvalue: i\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttypes: [i.type].concat([it.type]).concat([item.type]),\n\t\t\t\t\t\tvalue: parseContent(i)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t})\n\n\treturn result\n}\n\nfunction flattenResult(array, types = []) {\n\tconst result = []\n\n\tarray.forEach(arr => {\n\t\tif (typeof arr.value == 'string') {\n\t\t\tarr.types = arr.types.concat(types)\n\t\t\tresult.push(arr)\n\t\t} else {\n\t\t\tarr.forEach(a => {\n\t\t\t\tif (typeof a.value == 'string') {\n\t\t\t\t\ta.types = a.types.concat(types)\n\t\t\t\t\tresult.push(a)\n\t\t\t\t} else {\n\t\t\t\t\tresult.push(flattenResult(a.value, a.types))\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t})\n\n\treturn result\n}\n\nfunction markdownResult(array) {\n\tfor (let i = 0; i < array.length; i) {\n\t\tif (array[i - 1]) {\n\t\t\tconst isInline =\n\t\t\t\tarray[i].types.indexOf('inline-code') !== -1 &&\n\t\t\t\tarray[i - 1].types.indexOf('inline-code') !== -1\n\n\t\t\tconst isMultiline =\n\t\t\t\tarray[i].types.indexOf('multiline-code') !== -1 &&\n\t\t\t\tarray[i - 1].types.indexOf('multiline-code') !== -1\n\n\t\t\tif (isInline || isMultiline) {\n\t\t\t\tlet value = array[i].value\n\t\t\t\tarray[i].types.forEach(type => {\n\t\t\t\t\tconst markdown = type_markdown[type] || ''\n\t\t\t\t\tvalue = markdown + value + markdown\n\t\t\t\t})\n\n\t\t\t\tarray[i - 1].value = array[i - 1].value + value\n\n\t\t\t\tarray.splice(i, 1)\n\t\t\t} else {\n\t\t\t\ti++\n\t\t\t}\n\t\t} else {\n\t\t\ti++\n\t\t}\n\t}\n}\n\nfunction linkifyResult(array) {\n\tconst result = []\n\n\tarray.forEach(arr => {\n\t\tconst links = linkify.find(arr.value)\n\n\t\tif (links.length) {\n\t\t\tconst spaces = arr.value.replace(links[0].value, '')\n\t\t\tresult.push({ types: arr.types, value: spaces })\n\n\t\t\tarr.types = ['url'].concat(arr.types)\n\t\t\tarr.href = links[0].href\n\t\t\tarr.value = links[0].value\n\t\t}\n\n\t\tresult.push(arr)\n\t})\n\n\treturn result\n}\n","<template>\n\t<div :class=\"{ 'vac-text-ellipsis': singleLine }\">\n\t\t<div :class=\"{ 'vac-text-ellipsis': singleLine }\" v-if=\"textFormatting\">\n\t\t\t<template v-for=\"(message, i) in linkifiedMessage\">\n\t\t\t\t<component\n\t\t\t\t\t:is=\"checkType(message, 'url') ? 'a' : 'span'\"\n\t\t\t\t\t:key=\"i\"\n\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t'vac-text-ellipsis': singleLine,\n\t\t\t\t\t\t'vac-text-deleted': deleted,\n\t\t\t\t\t\t'vac-text-bold': checkType(message, 'bold'),\n\t\t\t\t\t\t'vac-text-italic': checkType(message, 'italic'),\n\t\t\t\t\t\t'vac-text-strike': checkType(message, 'strike'),\n\t\t\t\t\t\t'vac-text-underline': checkType(message, 'underline'),\n\t\t\t\t\t\t'vac-text-inline-code':\n\t\t\t\t\t\t\t!singleLine && checkType(message, 'inline-code'),\n\t\t\t\t\t\t'vac-text-multiline-code':\n\t\t\t\t\t\t\t!singleLine && checkType(message, 'multiline-code')\n\t\t\t\t\t}\"\n\t\t\t\t\t:href=\"message.href\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t>\n\t\t\t\t\t<slot name=\"deleted-icon\" v-bind=\"{ deleted }\">\n\t\t\t\t\t\t<svg-icon v-if=\"deleted\" name=\"deleted\" class=\"vac-icon-deleted\" />\n\t\t\t\t\t</slot>\n\t\t\t\t\t{{ message.value }}\n\t\t\t\t</component>\n\t\t\t</template>\n\t\t</div>\n\t\t<div v-else>{{ content }}</div>\n\t</div>\n</template>\n\n<script>\nimport SvgIcon from './SvgIcon'\n\nimport formatString from '../utils/formatString'\n\nexport default {\n\tname: 'format-message',\n\tcomponents: { SvgIcon },\n\n\tprops: {\n\t\tcontent: { type: [String, Number], required: true },\n\t\tdeleted: { type: Boolean, default: false },\n\t\tlinkify: { type: Boolean, default: true },\n\t\tsingleLine: { type: Boolean, default: false },\n\t\ttextFormatting: { type: Boolean, required: true }\n\t},\n\n\tcomputed: {\n\t\tlinkifiedMessage() {\n\t\t\treturn formatString(this.content, this.linkify)\n\t\t}\n\t},\n\n\tmethods: {\n\t\tcheckType(message, type) {\n\t\t\treturn message.types.indexOf(type) !== -1\n\t\t}\n\t}\n}\n</script>\n\n<style>\n.vac-text-deleted {\n\tfont-style: italic;\n}\n\n.vac-icon-deleted {\n\theight: 14px;\n\twidth: 14px;\n\tvertical-align: middle;\n\tmargin: -3px 1px 0 0;\n\tfill: var(--chat-room-color-message);\n}\n\n.vac-text-ellipsis {\n\twidth: 100%;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n</style>\n","import mod from \"-!../../demo/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../demo/node_modules/thread-loader/dist/cjs.js!../../demo/node_modules/babel-loader/lib/index.js!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./FormatMessage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../demo/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../demo/node_modules/thread-loader/dist/cjs.js!../../demo/node_modules/babel-loader/lib/index.js!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./FormatMessage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FormatMessage.vue?vue&type=template&id=1bf5ba0c&\"\nimport script from \"./FormatMessage.vue?vue&type=script&lang=js&\"\nexport * from \"./FormatMessage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FormatMessage.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default (items, prop, val) => {\n\tif (!val || val === '') return items\n\n\treturn items.filter(v => {\n\t\treturn (\n\t\t\tv[prop]\n\t\t\t\t.toLowerCase()\n\t\t\t\t.normalize('NFD')\n\t\t\t\t.replace(/[\\u0300-\\u036f]/g, '')\n\t\t\t\t.indexOf(\n\t\t\t\t\tval\n\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t.normalize('NFD')\n\t\t\t\t\t\t.replace(/[\\u0300-\\u036f]/g, '')\n\t\t\t\t) > -1\n\t\t)\n\t})\n}\n","export default (room, currentUserId, textMessages) => {\n\tif (room.typingUsers && room.typingUsers.length) {\n\t\tconst typingUsers = room.users.filter(user => {\n\t\t\tif (user._id === currentUserId) return\n\t\t\tif (room.typingUsers.indexOf(user._id) === -1) return\n\t\t\tif (user.status && user.status.state === 'offline') return\n\t\t\treturn true\n\t\t})\n\n\t\tif (!typingUsers.length) return\n\n\t\tif (room.users.length === 2) {\n\t\t\treturn textMessages.IS_TYPING\n\t\t} else {\n\t\t\treturn (\n\t\t\t\ttypingUsers.map(user => user.username).join(', ') +\n\t\t\t\t' ' +\n\t\t\t\ttextMessages.IS_TYPING\n\t\t\t)\n\t\t}\n\t}\n}\n","<template>\n\t<div\n\t\tclass=\"vac-rooms-container vac-app-border-r\"\n\t\t:class=\"{ 'vac-rooms-container-full': isMobile }\"\n\t\tv-show=\"showRoomsList\"\n\t>\n\t\t<slot name=\"rooms-header\"></slot>\n\n\t\t<div class=\"vac-box-search\">\n\t\t\t<div class=\"vac-icon-search\" v-if=\"!loadingRooms && rooms.length\">\n\t\t\t\t<slot name=\"search-icon\">\n\t\t\t\t\t<svg-icon name=\"search\" />\n\t\t\t\t</slot>\n\t\t\t</div>\n\t\t\t<input\n\t\t\t\tv-if=\"!loadingRooms && rooms.length\"\n\t\t\t\ttype=\"search\"\n\t\t\t\t:placeholder=\"textMessages.SEARCH\"\n\t\t\t\tautocomplete=\"off\"\n\t\t\t\tclass=\"vac-input\"\n\t\t\t\t@input=\"searchRoom\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tv-if=\"showAddRoom\"\n\t\t\t\tclass=\"vac-svg-button vac-add-icon\"\n\t\t\t\t@click=\"addRoom\"\n\t\t\t>\n\t\t\t\t<slot name=\"add-icon\">\n\t\t\t\t\t<svg-icon name=\"add\" />\n\t\t\t\t</slot>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<loader :show=\"loadingRooms\"></loader>\n\n\t\t<div v-if=\"!loadingRooms && !rooms.length\" class=\"vac-rooms-empty\">\n\t\t\t<slot name=\"rooms-empty\">\n\t\t\t\t{{ textMessages.ROOMS_EMPTY }}\n\t\t\t</slot>\n\t\t</div>\n\n\t\t<div v-if=\"!loadingRooms\" class=\"vac-room-list\">\n\t\t\t<div\n\t\t\t\tclass=\"vac-room-item\"\n\t\t\t\tv-for=\"room in filteredRooms\"\n\t\t\t\t:id=\"room.roomId\"\n\t\t\t\t:key=\"room.roomId\"\n\t\t\t\t:class=\"{ 'vac-room-selected': selectedRoomId === room.roomId }\"\n\t\t\t\t@click=\"openRoom(room)\"\n\t\t\t>\n\t\t\t\t<slot name=\"room-list-item\" v-bind=\"{ room }\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"room.avatar\"\n\t\t\t\t\t\tclass=\"vac-room-avatar\"\n\t\t\t\t\t\t:style=\"{ 'background-image': `url('${room.avatar}')` }\"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div class=\"vac-name-container vac-text-ellipsis\">\n\t\t\t\t\t\t<div class=\"vac-title-container\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"userStatus(room)\"\n\t\t\t\t\t\t\t\tclass=\"vac-state-circle\"\n\t\t\t\t\t\t\t\t:class=\"{ 'vac-state-online': userStatus(room) === 'online' }\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div class=\"vac-room-name vac-text-ellipsis\">\n\t\t\t\t\t\t\t\t{{ room.roomName }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-if=\"room.lastMessage\" class=\"vac-text-date\">\n\t\t\t\t\t\t\t\t{{ room.lastMessage.timestamp }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"vac-text-last\"\n\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t'vac-message-new':\n\t\t\t\t\t\t\t\t\troom.lastMessage && room.lastMessage.new && !typingUsers(room)\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span v-if=\"isMessageCheckmarkVisible(room)\">\n\t\t\t\t\t\t\t\t<slot name=\"checkmark-icon\" v-bind=\"room.lastMessage\">\n\t\t\t\t\t\t\t\t\t<svg-icon\n\t\t\t\t\t\t\t\t\t\t:name=\"\n\t\t\t\t\t\t\t\t\t\t\troom.lastMessage.distributed\n\t\t\t\t\t\t\t\t\t\t\t\t? 'double-checkmark'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'checkmark'\n\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t\t:param=\"room.lastMessage.seen ? 'seen' : ''\"\n\t\t\t\t\t\t\t\t\t\tclass=\"vac-icon-check\"\n\t\t\t\t\t\t\t\t\t></svg-icon>\n\t\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\t\t\troom.lastMessage &&\n\t\t\t\t\t\t\t\t\t\t!room.lastMessage.deleted &&\n\t\t\t\t\t\t\t\t\t\troom.lastMessage.file &&\n\t\t\t\t\t\t\t\t\t\troom.lastMessage.file.audio\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\tclass=\"vac-text-ellipsis\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<slot name=\"microphone-icon\">\n\t\t\t\t\t\t\t\t\t<svg-icon name=\"microphone\" class=\"vac-icon-microphone\" />\n\t\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t\t\t{{ formattedDuration(room.lastMessage.file.duration) }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<format-message\n\t\t\t\t\t\t\t\tv-else-if=\"room.lastMessage\"\n\t\t\t\t\t\t\t\t:content=\"getLastMessage(room)\"\n\t\t\t\t\t\t\t\t:deleted=\"!!room.lastMessage.deleted && !typingUsers(room)\"\n\t\t\t\t\t\t\t\t:linkify=\"false\"\n\t\t\t\t\t\t\t\t:text-formatting=\"textFormatting\"\n\t\t\t\t\t\t\t\t:single-line=\"true\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<template v-slot:deleted-icon=\"data\">\n\t\t\t\t\t\t\t\t\t<slot name=\"deleted-icon\" v-bind=\"data\"></slot>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</format-message>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"!room.lastMessage && typingUsers(room)\"\n\t\t\t\t\t\t\t\tclass=\"vac-text-ellipsis\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ typingUsers(room) }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-if=\"room.unreadCount\" class=\"vac-room-badge\">\n\t\t\t\t\t\t\t\t{{ room.unreadCount }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</slot>\n\t\t\t</div>\n\t\t\t<transition name=\"vac-fade-message\">\n\t\t\t\t<infinite-loading\n\t\t\t\t\tv-if=\"rooms.length && !loadingRooms\"\n\t\t\t\t\tspinner=\"spiral\"\n\t\t\t\t\t@infinite=\"loadMoreRooms\"\n\t\t\t\t>\n\t\t\t\t\t<div slot=\"spinner\">\n\t\t\t\t\t\t<loader :show=\"true\" :infinite=\"true\"></loader>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div slot=\"no-results\"></div>\n\t\t\t\t\t<div slot=\"no-more\"></div>\n\t\t\t\t</infinite-loading>\n\t\t\t</transition>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport InfiniteLoading from 'vue-infinite-loading'\nimport Loader from './Loader'\nimport SvgIcon from './SvgIcon'\nimport FormatMessage from './FormatMessage'\n\nimport filteredUsers from '../utils/filterItems'\nimport typingText from '../utils/typingText'\n\nexport default {\n\tname: 'rooms-list',\n\tcomponents: { InfiniteLoading, Loader, SvgIcon, FormatMessage },\n\n\tprops: {\n\t\tcurrentUserId: { type: [String, Number], required: true },\n\t\ttextMessages: { type: Object, required: true },\n\t\tshowRoomsList: { type: Boolean, required: true },\n\t\tshowAddRoom: { type: Boolean, required: true },\n\t\ttextFormatting: { type: Boolean, required: true },\n\t\tisMobile: { type: Boolean, required: true },\n\t\trooms: { type: Array, required: true },\n\t\tloadingRooms: { type: Boolean, required: true },\n\t\troomsLoaded: { type: Boolean, required: true },\n\t\troom: { type: Object, required: true }\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tfilteredRooms: this.rooms || [],\n\t\t\tinfiniteState: null,\n\t\t\tloadingMoreRooms: false,\n\t\t\tselectedRoomId: ''\n\t\t}\n\t},\n\n\twatch: {\n\t\trooms(newVal, oldVal) {\n\t\t\tthis.filteredRooms = newVal\n\n\t\t\tif (\n\t\t\t\tthis.infiniteState &&\n\t\t\t\t(newVal.length !== oldVal.length || this.roomsLoaded)\n\t\t\t) {\n\t\t\t\tthis.infiniteState.loaded()\n\t\t\t\tthis.loadingMoreRooms = false\n\t\t\t}\n\t\t},\n\n\t\tloadingRooms(val) {\n\t\t\tif (val) this.infiniteState = null\n\t\t},\n\n\t\tloadingMoreRooms(val) {\n\t\t\tthis.$emit('loading-more-rooms', val)\n\t\t},\n\n\t\troom: {\n\t\t\timmediate: true,\n\t\t\thandler(val) {\n\t\t\t\tif (val && !this.isMobile) this.selectedRoomId = val.roomId\n\t\t\t}\n\t\t}\n\t},\n\n\tmethods: {\n\t\tsearchRoom(ev) {\n\t\t\tthis.filteredRooms = filteredUsers(\n\t\t\t\tthis.rooms,\n\t\t\t\t'roomName',\n\t\t\t\tev.target.value\n\t\t\t)\n\t\t},\n\t\topenRoom(room) {\n\t\t\tif (room.roomId === this.room.roomId && !this.isMobile) return\n\t\t\tif (!this.isMobile) this.selectedRoomId = room.roomId\n\t\t\tthis.$emit('fetch-room', { room })\n\t\t},\n\t\tloadMoreRooms(infiniteState) {\n\t\t\tif (this.loadingMoreRooms) return\n\n\t\t\tif (this.roomsLoaded) {\n\t\t\t\tthis.loadingMoreRooms = false\n\t\t\t\treturn infiniteState.complete()\n\t\t\t}\n\n\t\t\tthis.infiniteState = infiniteState\n\t\t\tthis.$emit('fetch-more-rooms')\n\t\t\tthis.loadingMoreRooms = true\n\t\t},\n\t\taddRoom() {\n\t\t\tthis.$emit('add-room')\n\t\t},\n\t\tuserStatus(room) {\n\t\t\tif (!room.users || room.users.length !== 2) return\n\n\t\t\tconst user = room.users.find(u => u._id !== this.currentUserId)\n\n\t\t\tif (user.status) return user.status.state\n\t\t},\n\t\ttypingUsers(room) {\n\t\t\treturn typingText(room, this.currentUserId, this.textMessages)\n\t\t},\n\t\tgetLastMessage(room) {\n\t\t\tconst isTyping = this.typingUsers(room)\n\t\t\tif (isTyping) return isTyping\n\n\t\t\tconst content = room.lastMessage.deleted\n\t\t\t\t? this.textMessages.MESSAGE_DELETED\n\t\t\t\t: room.lastMessage.content\n\n\t\t\tif (room.users.length <= 2) {\n\t\t\t\treturn content\n\t\t\t}\n\n\t\t\tconst user = room.users.find(\n\t\t\t\tuser => user._id === room.lastMessage.sender_id\n\t\t\t)\n\n\t\t\tif (room.lastMessage.username) {\n\t\t\t\treturn `${room.lastMessage.username} - ${content}`\n\t\t\t} else if (!user || user._id === this.currentUserId) {\n\t\t\t\treturn content\n\t\t\t}\n\n\t\t\treturn `${user.username} - ${content}`\n\t\t},\n\t\tformattedDuration(s) {\n\t\t\ts = Math.round(s)\n\t\t\treturn (s - (s %= 60)) / 60 + (9 < s ? ':' : ':0') + s\n\t\t},\n\t\tisMessageCheckmarkVisible(room) {\n\t\t\treturn (\n\t\t\t\t!this.typingUsers(room) &&\n\t\t\t\troom.lastMessage &&\n\t\t\t\t!room.lastMessage.deleted &&\n\t\t\t\troom.lastMessage.sender_id === this.currentUserId &&\n\t\t\t\t(room.lastMessage.saved ||\n\t\t\t\t\troom.lastMessage.distributed ||\n\t\t\t\t\troom.lastMessage.seen)\n\t\t\t)\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.vac-rooms-container {\n\tdisplay: flex;\n\tflex-flow: column;\n\tflex: 0 0 25%;\n\tmin-width: 260px;\n\tmax-width: 500px;\n\tposition: relative;\n\tbackground: var(--chat-sidemenu-bg-color);\n\theight: 100%;\n\tborder-top-left-radius: var(--chat-container-border-radius);\n\tborder-bottom-left-radius: var(--chat-container-border-radius);\n}\n\n.vac-rooms-container-full {\n\tflex: 0 0 100%;\n\tmax-width: 100%;\n}\n\n.vac-box-search {\n\tposition: sticky;\n\tdisplay: flex;\n\talign-items: center;\n\theight: 64px;\n\tpadding: 0 15px;\n}\n\n.vac-icon-search {\n\tdisplay: flex;\n\tposition: absolute;\n\tleft: 30px;\n\n\tsvg {\n\t\twidth: 18px;\n\t\theight: 18px;\n\t}\n}\n\n.vac-add-icon {\n\tmargin-left: auto;\n\tpadding-left: 10px;\n}\n\n.vac-input {\n\theight: 38px;\n\twidth: 100%;\n\tbackground: var(--chat-bg-color-input);\n\tcolor: var(--chat-color);\n\tborder-radius: 4px;\n\tfont-size: 15px;\n\toutline: 0;\n\tcaret-color: var(--chat-color-caret);\n\tpadding: 10px 10px 10px 40px;\n\tborder: 1px solid var(--chat-sidemenu-border-color-search);\n\tborder-radius: 20px;\n\n\t&::placeholder {\n\t\tcolor: var(--chat-color-placeholder);\n\t}\n}\n\n.vac-rooms-empty {\n\tfont-size: 14px;\n\tcolor: #9ca6af;\n\tfont-style: italic;\n\ttext-align: center;\n\tmargin: 40px 0;\n\tline-height: 20px;\n\twhite-space: pre-line;\n}\n\n.vac-room-list {\n\tflex: 1;\n\tposition: relative;\n\tmax-width: 100%;\n\tcursor: pointer;\n\tpadding: 0 10px 5px;\n\toverflow-y: auto;\n}\n\n.vac-room-item {\n\tborder-radius: 8px;\n\talign-items: center;\n\tdisplay: flex;\n\tflex: 1 1 100%;\n\tmargin-bottom: 5px;\n\tpadding: 0 16px;\n\tposition: relative;\n\tmin-height: 71px;\n\n\t&:hover {\n\t\tbackground: var(--chat-sidemenu-bg-color-hover);\n\t\ttransition: background-color 0.3s cubic-bezier(0.25, 0.8, 0.5, 1);\n\t}\n\n\t&:not(:hover) {\n\t\ttransition: background-color 0.3s cubic-bezier(0.25, 0.8, 0.5, 1);\n\t}\n}\n\n.vac-room-selected {\n\tcolor: var(--chat-sidemenu-color-active) !important;\n\tbackground: var(--chat-sidemenu-bg-color-active) !important;\n\n\t&:hover {\n\t\tbackground: var(--chat-sidemenu-bg-color-active) !important;\n\t}\n}\n\n.vac-name-container {\n\tflex: 1;\n}\n\n.vac-title-container {\n\tdisplay: flex;\n\talign-items: center;\n\tline-height: 25px;\n}\n\n.vac-text-ellipsis {\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n\n.vac-room-name {\n\tflex: 1;\n\tcolor: var(--chat-room-color-username);\n\tfont-weight: 500;\n}\n\n.vac-text-last {\n\tdisplay: flex;\n\talign-items: center;\n\tfont-size: 12px;\n\tline-height: 19px;\n\tcolor: var(--chat-room-color-message);\n}\n\n.vac-message-new {\n\tcolor: var(--chat-room-color-username);\n\tfont-weight: 500;\n}\n\n.vac-text-date {\n\tmargin-left: 5px;\n\tfont-size: 11px;\n\tcolor: var(--chat-room-color-timestamp);\n}\n\n.vac-icon-check {\n\tdisplay: flex;\n\tvertical-align: middle;\n\theight: 14px;\n\twidth: 14px;\n\tmargin-top: -2px;\n\tmargin-right: 2px;\n}\n\n.vac-state-circle {\n\twidth: 9px;\n\theight: 9px;\n\tborder-radius: 50%;\n\tbackground-color: var(--chat-room-color-offline);\n\tmargin-right: 6px;\n\ttransition: 0.3s;\n}\n\n.vac-state-online {\n\tbackground-color: var(--chat-room-color-online);\n}\n\n.vac-icon-microphone {\n\theight: 15px;\n\twidth: 15px;\n\tvertical-align: middle;\n\tmargin: -3px 1px 0 -2px;\n\tfill: var(--chat-room-color-message);\n}\n\n.vac-room-badge {\n\tbackground-color: var(--chat-room-bg-color-badge);\n\tcolor: var(--chat-room-color-badge);\n\tfont-size: 11px;\n\tfont-weight: 500;\n\theight: 13px;\n\twidth: auto;\n\tmin-width: 13px;\n\tborder-radius: 50%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: 3px;\n}\n\n@media only screen and (max-width: 768px) {\n\t.vac-box-search {\n\t\theight: 58px;\n\t}\n\n\t.vac-room-list {\n\t\tpadding: 0 7px 5px;\n\t}\n\n\t.vac-room-item {\n\t\tmin-height: 60px;\n\t\tpadding: 0 8px;\n\t}\n}\n</style>\n","import mod from \"-!../../demo/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../demo/node_modules/thread-loader/dist/cjs.js!../../demo/node_modules/babel-loader/lib/index.js!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomsList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../demo/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../demo/node_modules/thread-loader/dist/cjs.js!../../demo/node_modules/babel-loader/lib/index.js!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./RoomsList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoomsList.vue?vue&type=template&id=558cb878&scoped=true&\"\nimport script from \"./RoomsList.vue?vue&type=script&lang=js&\"\nexport * from \"./RoomsList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RoomsList.vue?vue&type=style&index=0&id=558cb878&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"558cb878\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:((_vm.isMobile && !_vm.showRoomsList) || !_vm.isMobile || _vm.singleRoom),expression:\"(isMobile && !showRoomsList) || !isMobile || singleRoom\"}],staticClass:\"vac-col-messages\"},[(\n\t\t\t(!_vm.rooms.length && !_vm.loadingRooms) || (!_vm.room.roomId && !_vm.loadFirstRoom)\n\t\t)?_vm._t(\"no-room-selected\",[_c('div',{staticClass:\"vac-container-center vac-room-empty\"},[_c('div',[_vm._v(_vm._s(_vm.textMessages.ROOM_EMPTY))])])]):_c('div',{staticClass:\"vac-room-header vac-app-border-b\"},[_vm._t(\"room-header\",[_c('div',{staticClass:\"vac-room-wrapper\"},[(!_vm.singleRoom)?_c('div',{staticClass:\"vac-svg-button vac-toggle-button\",class:{ 'vac-rotate-icon': !_vm.showRoomsList && !_vm.isMobile },on:{\"click\":function($event){return _vm.$emit('toggle-rooms-list')}}},[_vm._t(\"toggle-icon\",[_c('svg-icon',{attrs:{\"name\":\"toggle\"}})])],2):_vm._e(),_c('div',{staticClass:\"vac-info-wrapper\",class:{ 'vac-item-clickable': _vm.roomInfo },on:{\"click\":function($event){return _vm.$emit('room-info', _vm.room)}}},[_vm._t(\"room-header-avatar\",[(_vm.room.avatar)?_c('div',{staticClass:\"vac-room-avatar\",style:({ 'background-image': (\"url('\" + (_vm.room.avatar) + \"')\") })}):_vm._e()],null,{ room: _vm.room }),_vm._t(\"room-header-info\",[_c('div',{staticClass:\"vac-text-ellipsis\"},[_c('div',{staticClass:\"vac-room-name vac-text-ellipsis\"},[_vm._v(\" \"+_vm._s(_vm.room.roomName)+\" \")]),(_vm.typingUsers)?_c('div',{staticClass:\"vac-room-info vac-text-ellipsis\"},[_vm._v(\" \"+_vm._s(_vm.typingUsers)+\" \")]):_c('div',{staticClass:\"vac-room-info vac-text-ellipsis\"},[_vm._v(\" \"+_vm._s(_vm.userStatus)+\" \")])])],null,{ room: _vm.room, typingUsers: _vm.typingUsers, userStatus: _vm.userStatus })],2),(_vm.room.roomId)?_vm._t(\"room-options\",[(_vm.menuActions.length)?_c('div',{staticClass:\"vac-svg-button vac-room-options\",on:{\"click\":function($event){_vm.menuOpened = !_vm.menuOpened}}},[_vm._t(\"menu-icon\",[_c('svg-icon',{attrs:{\"name\":\"menu\"}})])],2):_vm._e(),(_vm.menuActions.length)?_c('transition',{attrs:{\"name\":\"vac-slide-left\"}},[(_vm.menuOpened)?_c('div',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.closeMenu),expression:\"closeMenu\"}],staticClass:\"vac-menu-options\"},[_c('div',{staticClass:\"vac-menu-list\"},_vm._l((_vm.menuActions),function(action){return _c('div',{key:action.name},[_c('div',{staticClass:\"vac-menu-item\",on:{\"click\":function($event){return _vm.menuActionHandler(action)}}},[_vm._v(\" \"+_vm._s(action.title)+\" \")])])}),0)]):_vm._e()]):_vm._e()]):_vm._e()],2)],null,{ room: _vm.room, typingUsers: _vm.typingUsers, userStatus: _vm.userStatus })],2),_c('div',{ref:\"scrollContainer\",staticClass:\"vac-container-scroll\"},[_c('loader',{attrs:{\"show\":_vm.loadingMessages}}),_c('div',{staticClass:\"vac-messages-container\"},[_c('div',{class:{ 'vac-messages-hidden': _vm.loadingMessages }},[_c('transition',{attrs:{\"name\":\"vac-fade-message\"}},[(_vm.showNoMessages)?_c('div',{staticClass:\"vac-text-started\"},[_vm._t(\"messages-empty\",[_vm._v(\" \"+_vm._s(_vm.textMessages.MESSAGES_EMPTY)+\" \")])],2):_vm._e(),(_vm.showMessagesStarted)?_c('div',{staticClass:\"vac-text-started\"},[_vm._v(\" \"+_vm._s(_vm.textMessages.CONVERSATION_STARTED)+\" \"+_vm._s(_vm.messages[0].date)+\" \")]):_vm._e()]),_c('transition',{attrs:{\"name\":\"vac-fade-message\"}},[(_vm.messages.length)?_c('infinite-loading',{class:{ 'vac-infinite-loading': !_vm.messagesLoaded },attrs:{\"spinner\":\"spiral\",\"direction\":\"top\",\"distance\":40},on:{\"infinite\":_vm.loadMoreMessages}},[_c('div',{attrs:{\"slot\":\"spinner\"},slot:\"spinner\"},[_c('loader',{attrs:{\"show\":true,\"infinite\":true}})],1),_c('div',{attrs:{\"slot\":\"no-results\"},slot:\"no-results\"}),_c('div',{attrs:{\"slot\":\"no-more\"},slot:\"no-more\"})]):_vm._e()],1),_c('transition-group',{attrs:{\"name\":\"vac-fade-message\"}},_vm._l((_vm.messages),function(message,i){return _c('div',{key:message._id},[_c('message',{attrs:{\"current-user-id\":_vm.currentUserId,\"message\":message,\"index\":i,\"messages\":_vm.messages,\"edited-message\":_vm.editedMessage,\"message-actions\":_vm.messageActions,\"room-users\":_vm.room.users,\"text-messages\":_vm.textMessages,\"room-footer-ref\":_vm.$refs.roomFooter,\"new-messages\":_vm.newMessages,\"show-reaction-emojis\":_vm.showReactionEmojis,\"show-new-messages-divider\":_vm.showNewMessagesDivider,\"text-formatting\":_vm.textFormatting,\"emojis-list\":_vm.emojisList,\"hide-options\":_vm.hideOptions},on:{\"message-action-handler\":_vm.messageActionHandler,\"open-file\":_vm.openFile,\"add-new-message\":_vm.addNewMessage,\"send-message-reaction\":_vm.sendMessageReaction,\"hide-options\":function($event){_vm.hideOptions = $event}},scopedSlots:_vm._u([_vm._l((_vm.$scopedSlots),function(index,name){return {key:name,fn:function(data){return [_vm._t(name,null,null,data)]}}})],null,true)})],1)}),0)],1)])],1),(!_vm.loadingMessages)?_c('div',[_c('transition',{attrs:{\"name\":\"vac-bounce\"}},[(_vm.scrollIcon)?_c('div',{staticClass:\"vac-icon-scroll\",on:{\"click\":_vm.scrollToBottom}},[_vm._t(\"scroll-icon\",[_c('svg-icon',{attrs:{\"name\":\"dropdown\",\"param\":\"scroll\"}})])],2):_vm._e()])],1):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(Object.keys(_vm.room).length && _vm.showFooter),expression:\"Object.keys(room).length && showFooter\"}],ref:\"roomFooter\",staticClass:\"vac-room-footer\"},[_c('transition',{attrs:{\"name\":\"vac-slide-up\"}},[(_vm.messageReply)?_c('div',{staticClass:\"vac-reply-container\"},[_c('div',{staticClass:\"vac-reply-box\"},[(_vm.isImageCheck(_vm.messageReply.file))?_c('img',{staticClass:\"vac-image-reply\",attrs:{\"src\":_vm.messageReply.file.url}}):_vm._e(),_c('div',{staticClass:\"vac-reply-info\"},[_c('div',{staticClass:\"vac-reply-username\"},[_vm._v(_vm._s(_vm.messageReply.username))]),_c('div',{staticClass:\"vac-reply-content\"},[_vm._v(_vm._s(_vm.messageReply.content))])])]),_c('div',{staticClass:\"vac-icon-reply\"},[_c('div',{staticClass:\"vac-svg-button\",on:{\"click\":_vm.resetMessage}},[_vm._t(\"reply-close-icon\",[_c('svg-icon',{attrs:{\"name\":\"close-outline\"}})])],2)])]):_vm._e()]),_c('div',{staticClass:\"vac-box-footer\"},[(_vm.showAudio && !_vm.imageFile)?_c('div',{staticClass:\"vac-icon-textarea-left\"},[_c('div',{staticClass:\"vac-svg-button\",on:{\"click\":_vm.recordAudio}},[(_vm.recorder.state === 'recording')?_vm._t(\"microphone-off-icon\",[_c('svg-icon',{staticClass:\"vac-icon-microphone-off\",attrs:{\"name\":\"microphone-off\"}})]):_vm._t(\"microphone-icon\",[_c('svg-icon',{staticClass:\"vac-icon-microphone\",attrs:{\"name\":\"microphone\"}})])],2)]):_vm._e(),(_vm.imageFile)?_c('div',{staticClass:\"vac-image-container\"},[_c('div',{staticClass:\"vac-svg-button vac-icon-image\",on:{\"click\":_vm.resetImageFile}},[_vm._t(\"image-close-icon\",[_c('svg-icon',{attrs:{\"name\":\"close\",\"param\":\"image\"}})])],2),_c('div',{staticClass:\"vac-image-file\"},[_c('img',{ref:\"imageFile\",attrs:{\"src\":_vm.imageFile},on:{\"load\":_vm.onImgLoad}})])]):(_vm.file)?_c('div',{staticClass:\"vac-file-container\",class:{ 'vac-file-container-edit': _vm.editedMessage._id }},[_c('div',{staticClass:\"vac-icon-file\"},[_vm._t(\"file-icon\",[_c('svg-icon',{attrs:{\"name\":\"file\"}})])],2),(_vm.file && _vm.file.audio)?_c('div',{staticClass:\"vac-file-message\"},[_vm._v(\"audio\")]):_c('div',{staticClass:\"vac-file-message\"},[_vm._v(_vm._s(_vm.message))]),_c('div',{staticClass:\"vac-svg-button vac-icon-remove\",on:{\"click\":function($event){return _vm.resetMessage(null, true)}}},[_vm._t(\"file-close-icon\",[_c('svg-icon',{attrs:{\"name\":\"close\"}})])],2)]):_vm._e(),_c('textarea',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.file || _vm.imageFile),expression:\"!file || imageFile\"},{name:\"model\",rawName:\"v-model\",value:(_vm.message),expression:\"message\"}],ref:\"roomTextarea\",staticClass:\"vac-textarea\",class:{\n\t\t\t\t\t'vac-textarea-outline': _vm.editedMessage._id\n\t\t\t\t},style:({\n\t\t\t\t\t'min-height': ((_vm.imageDimensions ? _vm.imageDimensions.height : 20) + \"px\"),\n\t\t\t\t\t'padding-left': ((_vm.imageDimensions ? _vm.imageDimensions.width - 10 : 12) + \"px\")\n\t\t\t\t}),attrs:{\"placeholder\":_vm.textMessages.TYPE_MESSAGE},domProps:{\"value\":(_vm.message)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.message=$event.target.value},_vm.onChangeInput],\"keydown\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }return _vm.resetMessage($event)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey){ return null; }$event.preventDefault();}]}}),_c('div',{staticClass:\"vac-icon-textarea\"},[(_vm.editedMessage._id)?_c('div',{staticClass:\"vac-svg-button\",on:{\"click\":_vm.resetMessage}},[_vm._t(\"edit-close-icon\",[_c('svg-icon',{attrs:{\"name\":\"close-outline\"}})])],2):_vm._e(),(_vm.showEmojis && (!_vm.file || _vm.imageFile))?_c('emoji-picker',{attrs:{\"emoji-opened\":_vm.emojiOpened,\"position-top\":true},on:{\"add-emoji\":_vm.addEmoji,\"open-emoji\":function($event){_vm.emojiOpened = $event}},scopedSlots:_vm._u([{key:\"emoji-picker-icon\",fn:function(){return [_vm._t(\"emoji-picker-icon\")]},proxy:true}],null,true)}):_vm._e(),(_vm.showFiles)?_c('div',{staticClass:\"vac-svg-button\",on:{\"click\":_vm.launchFilePicker}},[_vm._t(\"paperclip-icon\",[_c('svg-icon',{attrs:{\"name\":\"paperclip\"}})])],2):_vm._e(),(_vm.textareaAction)?_c('div',{staticClass:\"vac-svg-button\",on:{\"click\":_vm.textareaActionHandler}},[_vm._t(\"custom-action-icon\",[_c('svg-icon',{attrs:{\"name\":\"deleted\"}})])],2):_vm._e(),(_vm.showFiles)?_c('input',{ref:\"file\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"accept\":_vm.acceptedFiles},on:{\"change\":function($event){return _vm.onFileChange($event.target.files)}}}):_vm._e(),(_vm.showSendIcon)?_c('div',{staticClass:\"vac-svg-button\",class:{ 'vac-send-disabled': _vm.inputDisabled },on:{\"click\":_vm.sendMessage}},[_vm._t(\"send-icon\",[_c('svg-icon',{attrs:{\"name\":\"send\",\"param\":_vm.inputDisabled ? 'disabled' : ''}})])],2):_vm._e()],1)])],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.showDate)?_c('div',{staticClass:\"vac-card-info vac-card-date\"},[_vm._v(\" \"+_vm._s(_vm.message.date)+\" \")]):_vm._e(),(_vm.newMessage._id === _vm.message._id)?_c('div',{staticClass:\"vac-line-new\"},[_vm._v(\" \"+_vm._s(_vm.textMessages.NEW_MESSAGES)+\" \")]):_vm._e(),(_vm.message.system)?_c('div',{staticClass:\"vac-card-info vac-card-system\"},[_vm._v(\" \"+_vm._s(_vm.message.content)+\" \")]):_c('div',{staticClass:\"vac-message-box\",class:{ 'vac-offset-current': _vm.message.sender_id === _vm.currentUserId },attrs:{\"id\":_vm.message._id}},[_vm._t(\"message\",[_c('div',{staticClass:\"vac-message-container\",class:{\n\t\t\t\t\t'vac-message-container-offset': _vm.messageOffset\n\t\t\t\t}},[_c('div',{ref:\"imageRef\",staticClass:\"vac-message-card\",class:{\n\t\t\t\t\t\t'vac-message-highlight': _vm.isMessageHover(_vm.message),\n\t\t\t\t\t\t'vac-message-current': _vm.message.sender_id === _vm.currentUserId,\n\t\t\t\t\t\t'vac-message-deleted': _vm.message.deleted\n\t\t\t\t\t},on:{\"mouseover\":function($event){return _vm.onHoverMessage(_vm.message)},\"mouseleave\":_vm.onLeaveMessage}},[(_vm.roomUsers.length > 2 && _vm.message.sender_id !== _vm.currentUserId)?_c('div',{staticClass:\"vac-text-username\",class:{\n\t\t\t\t\t\t\t'vac-username-reply': !_vm.message.deleted && _vm.message.replyMessage\n\t\t\t\t\t\t}},[_c('span',[_vm._v(_vm._s(_vm.message.username))])]):_vm._e(),(!_vm.message.deleted && _vm.message.replyMessage)?_c('div',{staticClass:\"vac-reply-message\"},[_c('div',{staticClass:\"vac-reply-username\"},[_vm._v(_vm._s(_vm.replyUsername))]),(_vm.isImageReply)?_c('div',{staticClass:\"vac-image-reply-container\"},[_c('div',{staticClass:\"vac-message-image vac-message-image-reply\",style:({\n\t\t\t\t\t\t\t\t\t'background-image': (\"url('\" + (_vm.message.replyMessage.file.url) + \"')\")\n\t\t\t\t\t\t\t\t})})]):_vm._e(),_c('div',{staticClass:\"vac-reply-content\"},[_vm._v(\" \"+_vm._s(_vm.message.replyMessage.content)+\" \")])]):_vm._e(),(_vm.message.deleted)?_c('div',[_vm._t(\"deleted-icon\",[_c('svg-icon',{staticClass:\"vac-icon-deleted\",attrs:{\"name\":\"deleted\"}})]),_c('span',[_vm._v(_vm._s(_vm.textMessages.MESSAGE_DELETED))])],2):(!_vm.message.file)?_c('div',[_c('format-message',{attrs:{\"content\":this.message.content,\"text-formatting\":_vm.textFormatting},scopedSlots:_vm._u([{key:\"deleted-icon\",fn:function(data){return [_vm._t(\"deleted-icon\",null,null,data)]}}],null,true)})],1):(_vm.isImage)?_c('div',{staticClass:\"vac-image-container\"},[_c('loader',{style:({ top: ((_vm.imageResponsive.loaderTop) + \"px\") }),attrs:{\"show\":_vm.isImageLoading}}),_c('div',{staticClass:\"vac-message-image\",class:{\n\t\t\t\t\t\t\t\t'vac-image-loading':\n\t\t\t\t\t\t\t\t\t_vm.isImageLoading && _vm.message.sender_id === _vm.currentUserId\n\t\t\t\t\t\t\t},style:({\n\t\t\t\t\t\t\t\t'background-image': (\"url('\" + (_vm.message.file.url) + \"')\"),\n\t\t\t\t\t\t\t\t'max-height': ((_vm.imageResponsive.maxHeight) + \"px\")\n\t\t\t\t\t\t\t})},[_c('transition',{attrs:{\"name\":\"vac-fade-image\"}},[(_vm.imageHover && !_vm.isImageLoading)?_c('div',{staticClass:\"vac-image-buttons\"},[_c('div',{staticClass:\"vac-svg-button vac-button-view\",on:{\"click\":function($event){$event.stopPropagation();return _vm.openFile('preview')}}},[_vm._t(\"eye-icon\",[_c('svg-icon',{attrs:{\"name\":\"eye\"}})])],2),_c('div',{staticClass:\"vac-svg-button vac-button-download\",on:{\"click\":function($event){$event.stopPropagation();return _vm.openFile('download')}}},[_vm._t(\"document-icon\",[_c('svg-icon',{attrs:{\"name\":\"document\"}})])],2)]):_vm._e()])],1),_c('format-message',{attrs:{\"content\":this.message.content,\"text-formatting\":_vm.textFormatting}})],1):(_vm.message.file.audio)?_c('div',{staticClass:\"vac-audio-message\"},[_c('div',{attrs:{\"id\":\"vac-player\"}},[(_vm.message.file.audio)?_c('audio',{attrs:{\"controls\":\"\"}},[_c('source',{attrs:{\"src\":_vm.message.file.url}})]):_vm._e()])]):_c('div',{staticClass:\"vac-file-message\"},[_c('div',{staticClass:\"vac-svg-button vac-icon-file\",on:{\"click\":function($event){$event.stopPropagation();return _vm.openFile('download')}}},[_vm._t(\"document-icon\",[_c('svg-icon',{attrs:{\"name\":\"document\"}})])],2),_c('span',[_vm._v(_vm._s(_vm.message.content))])]),_c('div',{staticClass:\"vac-text-timestamp\"},[(_vm.message.edited && !_vm.message.deleted)?_c('div',{staticClass:\"vac-icon-edited\"},[_vm._t(\"pencil-icon\",[_c('svg-icon',{attrs:{\"name\":\"pencil\"}})])],2):_vm._e(),_c('span',[_vm._v(_vm._s(_vm.message.timestamp))]),(_vm.isCheckmarkVisible)?_c('span',[_vm._t(\"checkmark-icon\",[_c('svg-icon',{staticClass:\"vac-icon-check\",attrs:{\"name\":_vm.message.distributed ? 'double-checkmark' : 'checkmark',\"param\":_vm.message.seen ? 'seen' : ''}})],null,{ message: _vm.message })],2):_vm._e()]),_c('div',{staticClass:\"vac-options-container\",class:{ 'vac-options-image': _vm.isImage && !_vm.message.replyMessage },style:({\n\t\t\t\t\t\t\twidth:\n\t\t\t\t\t\t\t\t_vm.filteredMessageActions.length && _vm.showReactionEmojis\n\t\t\t\t\t\t\t\t\t? '70px'\n\t\t\t\t\t\t\t\t\t: '45px'\n\t\t\t\t\t\t})},[_c('transition-group',{attrs:{\"name\":\"vac-slide-left\"}},[(_vm.isMessageActions || _vm.isMessageReactions)?_c('div',{key:\"1\",staticClass:\"vac-blur-container\",class:{\n\t\t\t\t\t\t\t\t\t'vac-options-me': _vm.message.sender_id === _vm.currentUserId\n\t\t\t\t\t\t\t\t}}):_vm._e(),(_vm.isMessageActions)?_c('div',{key:\"2\",ref:\"actionIcon\",staticClass:\"vac-svg-button vac-message-options\",on:{\"click\":_vm.openOptions}},[_vm._t(\"dropdown-icon\",[_c('svg-icon',{attrs:{\"name\":\"dropdown\",\"param\":\"message\"}})])],2):_vm._e(),(_vm.isMessageReactions)?_c('emoji-picker',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.closeEmoji),expression:\"closeEmoji\"}],key:\"3\",staticClass:\"vac-message-reactions\",style:({ right: _vm.isMessageActions ? '30px' : '5px' }),attrs:{\"emoji-opened\":_vm.emojiOpened,\"emoji-reaction\":true,\"room-footer-ref\":_vm.roomFooterRef,\"position-right\":_vm.message.sender_id === _vm.currentUserId},on:{\"add-emoji\":_vm.sendMessageReaction,\"open-emoji\":_vm.openEmoji},scopedSlots:_vm._u([{key:\"emoji-picker-icon\",fn:function(){return [_vm._t(\"emoji-picker-reaction-icon\")]},proxy:true}],null,true)}):_vm._e()],1)],1),(_vm.filteredMessageActions.length)?_c('transition',{attrs:{\"name\":_vm.message.sender_id === _vm.currentUserId\n\t\t\t\t\t\t\t\t? 'vac-slide-left'\n\t\t\t\t\t\t\t\t: 'vac-slide-right'}},[(_vm.optionsOpened)?_c('div',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.closeOptions),expression:\"closeOptions\"}],ref:\"menuOptions\",staticClass:\"vac-menu-options\",class:{\n\t\t\t\t\t\t\t\t'vac-menu-left': _vm.message.sender_id !== _vm.currentUserId\n\t\t\t\t\t\t\t},style:({ top: (_vm.menuOptionsTop + \"px\") })},[_c('div',{staticClass:\"vac-menu-list\"},_vm._l((_vm.filteredMessageActions),function(action){return _c('div',{key:action.name},[_c('div',{staticClass:\"vac-menu-item\",on:{\"click\":function($event){return _vm.messageActionHandler(action)}}},[_vm._v(\" \"+_vm._s(action.title)+\" \")])])}),0)]):_vm._e()]):_vm._e()],1),(!_vm.message.deleted)?_c('transition-group',{attrs:{\"name\":\"vac-slide-left\"}},_vm._l((_vm.message.reactions),function(reaction,key){return _c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(reaction.length),expression:\"reaction.length\"}],key:key + 0,staticClass:\"vac-button-reaction\",class:{\n\t\t\t\t\t\t\t'vac-reaction-me': reaction.indexOf(_vm.currentUserId) !== -1\n\t\t\t\t\t\t},style:({\n\t\t\t\t\t\t\tfloat: _vm.message.sender_id === _vm.currentUserId ? 'right' : 'left'\n\t\t\t\t\t\t}),on:{\"click\":function($event){return _vm.sendMessageReaction({ name: key }, reaction)}}},[_vm._v(\" \"+_vm._s(_vm.getEmojiByName(key))),_c('span',[_vm._v(_vm._s(reaction.length))])])}),0):_vm._e()],1)],null,{ message: _vm.message })],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vac-wrapper\"},[_c('emoji-picker',{attrs:{\"search\":_vm.search},on:{\"emoji\":_vm.append},scopedSlots:_vm._u([{key:\"emoji-invoker\",fn:function(ref){\nvar clickEvent = ref.events.click;\nreturn _c('div',{staticClass:\"vac-svg-button\",class:{ 'vac-button-reaction': _vm.emojiReaction },on:{\"click\":[function($event){$event.stopPropagation();return clickEvent($event)},_vm.openEmoji]}},[_vm._t(\"emoji-picker-icon\",[_c('svg-icon',{attrs:{\"name\":\"emoji\",\"param\":_vm.emojiReaction ? 'reaction' : ''}})])],2)}},{key:\"emoji-picker\",fn:function(ref){\nvar emojis = ref.emojis;\nvar insert = ref.insert;\nreturn (_vm.emojiOpened)?_c('div',{},[_c('transition',{attrs:{\"name\":\"vac-slide-up\",\"appear\":\"\"}},[_c('div',{staticClass:\"vac-emoji-picker\",class:{ 'vac-picker-reaction': _vm.emojiReaction },style:({\n\t\t\t\t\t\theight: (_vm.emojiPickerHeight + \"px\"),\n\t\t\t\t\t\ttop: _vm.positionTop ? _vm.emojiPickerHeight : (_vm.emojiPickerTop + \"px\"),\n\t\t\t\t\t\tright: _vm.emojiPickerRight,\n\t\t\t\t\t\tdisplay: _vm.emojiPickerTop || !_vm.emojiReaction ? 'initial' : 'none'\n\t\t\t\t\t})},[_c('div',{staticClass:\"vac-emoji-picker__search\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.search),expression:\"search\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.search)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.search=$event.target.value}}})]),_c('div',_vm._l((emojis),function(emojiGroup,category){return _c('div',{key:category},[(category !== 'Frequently used')?_c('h5',[_vm._v(_vm._s(category))]):_vm._e(),(category !== 'Frequently used')?_c('div',{staticClass:\"vac-emojis\"},_vm._l((emojiGroup),function(emoji,emojiName){return _c('span',{key:emojiName,attrs:{\"title\":emojiName},on:{\"click\":function($event){return insert({ emoji: emoji, emojiName: emojiName })}}},[_vm._v(\" \"+_vm._s(emoji)+\" \")])}),0):_vm._e()])}),0)])])],1):_vm._e()}}],null,true)})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"vac-wrapper\">\n\t\t<emoji-picker @emoji=\"append\" :search=\"search\">\n\t\t\t<div\n\t\t\t\tclass=\"vac-svg-button\"\n\t\t\t\t:class=\"{ 'vac-button-reaction': emojiReaction }\"\n\t\t\t\tslot=\"emoji-invoker\"\n\t\t\t\tslot-scope=\"{ events: { click: clickEvent } }\"\n\t\t\t\t@click.stop=\"clickEvent\"\n\t\t\t\t@click=\"openEmoji\"\n\t\t\t>\n\t\t\t\t<slot name=\"emoji-picker-icon\">\n\t\t\t\t\t<svg-icon name=\"emoji\" :param=\"emojiReaction ? 'reaction' : ''\" />\n\t\t\t\t</slot>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tslot=\"emoji-picker\"\n\t\t\t\tslot-scope=\"{ emojis, insert }\"\n\t\t\t\tv-if=\"emojiOpened\"\n\t\t\t>\n\t\t\t\t<transition name=\"vac-slide-up\" appear>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"vac-emoji-picker\"\n\t\t\t\t\t\t:class=\"{ 'vac-picker-reaction': emojiReaction }\"\n\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\theight: `${emojiPickerHeight}px`,\n\t\t\t\t\t\t\ttop: positionTop ? emojiPickerHeight : `${emojiPickerTop}px`,\n\t\t\t\t\t\t\tright: emojiPickerRight,\n\t\t\t\t\t\t\tdisplay: emojiPickerTop || !emojiReaction ? 'initial' : 'none'\n\t\t\t\t\t\t}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"vac-emoji-picker__search\">\n\t\t\t\t\t\t\t<input type=\"text\" v-model=\"search\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div v-for=\"(emojiGroup, category) in emojis\" :key=\"category\">\n\t\t\t\t\t\t\t\t<h5 v-if=\"category !== 'Frequently used'\">{{ category }}</h5>\n\t\t\t\t\t\t\t\t<div class=\"vac-emojis\" v-if=\"category !== 'Frequently used'\">\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tv-for=\"(emoji, emojiName) in emojiGroup\"\n\t\t\t\t\t\t\t\t\t\t:key=\"emojiName\"\n\t\t\t\t\t\t\t\t\t\t@click=\"insert({ emoji, emojiName })\"\n\t\t\t\t\t\t\t\t\t\t:title=\"emojiName\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ emoji }}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</transition>\n\t\t\t</div>\n\t\t</emoji-picker>\n\t</div>\n</template>\n\n<script>\nimport EmojiPicker from 'vue-emoji-picker'\n\nimport SvgIcon from './SvgIcon'\n\nexport default {\n\tcomponents: {\n\t\tEmojiPicker,\n\t\tSvgIcon\n\t},\n\tprops: [\n\t\t'emojiOpened',\n\t\t'emojiReaction',\n\t\t'roomFooterRef',\n\t\t'positionTop',\n\t\t'positionRight'\n\t],\n\tdata() {\n\t\treturn {\n\t\t\tsearch: '',\n\t\t\temojiPickerHeight: 320,\n\t\t\temojiPickerTop: 0,\n\t\t\temojiPickerRight: ''\n\t\t}\n\t},\n\tmethods: {\n\t\tappend({ emoji, emojiName }) {\n\t\t\tthis.$emit('add-emoji', { icon: emoji, name: emojiName })\n\t\t},\n\t\topenEmoji(ev) {\n\t\t\tthis.$emit('open-emoji', true)\n\t\t\tthis.setEmojiPickerPosition(\n\t\t\t\tev.clientY,\n\t\t\t\tev.view.innerWidth,\n\t\t\t\tev.view.innerHeight\n\t\t\t)\n\t\t},\n\t\tsetEmojiPickerPosition(clientY, innerWidth, innerHeight) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst mobileSize = innerWidth < 500 || innerHeight < 700\n\n\t\t\t\tif (!this.roomFooterRef) {\n\t\t\t\t\tif (mobileSize) this.emojiPickerRight = '0px'\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tif (mobileSize) {\n\t\t\t\t\tthis.emojiPickerRight = innerWidth / 2 - 120 + 'px'\n\t\t\t\t\tthis.emojiPickerTop = 100\n\t\t\t\t\tthis.emojiPickerHeight = innerHeight - 200\n\t\t\t\t} else {\n\t\t\t\t\tconst roomFooterTop = this.roomFooterRef.getBoundingClientRect().top\n\t\t\t\t\tconst pickerTopPosition =\n\t\t\t\t\t\troomFooterTop - clientY > this.emojiPickerHeight - 50\n\n\t\t\t\t\tif (pickerTopPosition) this.emojiPickerTop = clientY + 10\n\t\t\t\t\telse this.emojiPickerTop = clientY - this.emojiPickerHeight - 10\n\n\t\t\t\t\tthis.emojiPickerRight = this.positionTop\n\t\t\t\t\t\t? '-50px'\n\t\t\t\t\t\t: this.positionRight\n\t\t\t\t\t\t? '60px'\n\t\t\t\t\t\t: ''\n\t\t\t\t}\n\t\t\t}, 0)\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.vac-wrapper {\n\tposition: relative;\n\tdisplay: flex;\n}\n\n.vac-emoji-picker {\n\tposition: absolute;\n\tz-index: 9999;\n\tbottom: 32px;\n\tright: 10px;\n\twidth: 240px;\n\toverflow: scroll;\n\tpadding: 16px;\n\tbox-sizing: border-box;\n\tborder-radius: 0.5rem;\n\tbackground: var(--chat-emoji-bg-color);\n\tbox-shadow: 0 1px 2px -2px rgba(0, 0, 0, 0.1),\n\t\t0 1px 2px -1px rgba(0, 0, 0, 0.1), 0 1px 2px 1px rgba(0, 0, 0, 0.1);\n}\n\n.vac-picker-reaction {\n\tposition: fixed;\n\ttop: initial;\n\tright: initial;\n}\n\n.vac-emoji-picker__search {\n\tdisplay: flex;\n}\n\n.vac-emoji-picker__search > input {\n\tflex: 1;\n\tborder-radius: 10rem;\n\tborder: var(--chat-border-style);\n\tpadding: 5px 10px;\n\toutline: none;\n\tbackground: var(--chat-bg-color-input);\n\tcolor: var(--chat-color);\n}\n\n.vac-emoji-picker h5 {\n\tmargin: 15px 0 8px;\n\tcolor: #b1b1b1;\n\ttext-transform: uppercase;\n\tfont-size: 0.8rem;\n\tcursor: default;\n}\n\n.vac-emoji-picker .vac-emojis {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: space-between;\n}\n\n.vac-emoji-picker .vac-emojis:after {\n\tcontent: '';\n\tflex: auto;\n}\n\n.vac-emoji-picker .vac-emojis span {\n\tpadding: 0.2rem;\n\tcursor: pointer;\n\tborder-radius: 5px;\n}\n\n.vac-emoji-picker .vac-emojis span:hover {\n\tbackground: var(--chat-sidemenu-bg-color-hover);\n\tcursor: pointer;\n}\n\n.vac-button-reaction svg {\n\theight: 19px;\n\twidth: 19px;\n}\n</style>\n","import mod from \"-!../../demo/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../demo/node_modules/thread-loader/dist/cjs.js!../../demo/node_modules/babel-loader/lib/index.js!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./EmojiPicker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../demo/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../demo/node_modules/thread-loader/dist/cjs.js!../../demo/node_modules/babel-loader/lib/index.js!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./EmojiPicker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EmojiPicker.vue?vue&type=template&id=1e137646&scoped=true&\"\nimport script from \"./EmojiPicker.vue?vue&type=script&lang=js&\"\nexport * from \"./EmojiPicker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EmojiPicker.vue?vue&type=style&index=0&id=1e137646&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1e137646\",\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div>\n\t\t<div v-if=\"showDate\" class=\"vac-card-info vac-card-date\">\n\t\t\t{{ message.date }}\n\t\t</div>\n\n\t\t<div v-if=\"newMessage._id === message._id\" class=\"vac-line-new\">\n\t\t\t{{ textMessages.NEW_MESSAGES }}\n\t\t</div>\n\n\t\t<div v-if=\"message.system\" class=\"vac-card-info vac-card-system\">\n\t\t\t{{ message.content }}\n\t\t</div>\n\n\t\t<div\n\t\t\tv-else\n\t\t\t:id=\"message._id\"\n\t\t\tclass=\"vac-message-box\"\n\t\t\t:class=\"{ 'vac-offset-current': message.sender_id === currentUserId }\"\n\t\t>\n\t\t\t<slot name=\"message\" v-bind=\"{ message }\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"vac-message-container\"\n\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t'vac-message-container-offset': messageOffset\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tref=\"imageRef\"\n\t\t\t\t\t\tclass=\"vac-message-card\"\n\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t'vac-message-highlight': isMessageHover(message),\n\t\t\t\t\t\t\t'vac-message-current': message.sender_id === currentUserId,\n\t\t\t\t\t\t\t'vac-message-deleted': message.deleted\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\t@mouseover=\"onHoverMessage(message)\"\n\t\t\t\t\t\t@mouseleave=\"onLeaveMessage\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"roomUsers.length > 2 && message.sender_id !== currentUserId\"\n\t\t\t\t\t\t\tclass=\"vac-text-username\"\n\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t'vac-username-reply': !message.deleted && message.replyMessage\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span>{{ message.username }}</span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"!message.deleted && message.replyMessage\"\n\t\t\t\t\t\t\tclass=\"vac-reply-message\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"vac-reply-username\">{{ replyUsername }}</div>\n\n\t\t\t\t\t\t\t<div class=\"vac-image-reply-container\" v-if=\"isImageReply\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass=\"vac-message-image vac-message-image-reply\"\n\t\t\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\t\t\t'background-image': `url('${message.replyMessage.file.url}')`\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"vac-reply-content\">\n\t\t\t\t\t\t\t\t{{ message.replyMessage.content }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div v-if=\"message.deleted\">\n\t\t\t\t\t\t\t<slot name=\"deleted-icon\">\n\t\t\t\t\t\t\t\t<svg-icon name=\"deleted\" class=\"vac-icon-deleted\" />\n\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t\t<span>{{ textMessages.MESSAGE_DELETED }}</span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div v-else-if=\"!message.file\">\n\t\t\t\t\t\t\t<format-message\n\t\t\t\t\t\t\t\t:content=\"this.message.content\"\n\t\t\t\t\t\t\t\t:text-formatting=\"textFormatting\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<template v-slot:deleted-icon=\"data\">\n\t\t\t\t\t\t\t\t\t<slot name=\"deleted-icon\" v-bind=\"data\"></slot>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</format-message>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"vac-image-container\" v-else-if=\"isImage\">\n\t\t\t\t\t\t\t<loader\n\t\t\t\t\t\t\t\t:style=\"{ top: `${imageResponsive.loaderTop}px` }\"\n\t\t\t\t\t\t\t\t:show=\"isImageLoading\"\n\t\t\t\t\t\t\t></loader>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"vac-message-image\"\n\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t'vac-image-loading':\n\t\t\t\t\t\t\t\t\t\tisImageLoading && message.sender_id === currentUserId\n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\t\t'background-image': `url('${message.file.url}')`,\n\t\t\t\t\t\t\t\t\t'max-height': `${imageResponsive.maxHeight}px`\n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<transition name=\"vac-fade-image\">\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclass=\"vac-image-buttons\"\n\t\t\t\t\t\t\t\t\t\tv-if=\"imageHover && !isImageLoading\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"vac-svg-button vac-button-view\"\n\t\t\t\t\t\t\t\t\t\t\t@click.stop=\"openFile('preview')\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<slot name=\"eye-icon\">\n\t\t\t\t\t\t\t\t\t\t\t\t<svg-icon name=\"eye\" />\n\t\t\t\t\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"vac-svg-button vac-button-download\"\n\t\t\t\t\t\t\t\t\t\t\t@click.stop=\"openFile('download')\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<slot name=\"document-icon\">\n\t\t\t\t\t\t\t\t\t\t\t\t<svg-icon name=\"document\" />\n\t\t\t\t\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</transition>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<format-message\n\t\t\t\t\t\t\t\t:content=\"this.message.content\"\n\t\t\t\t\t\t\t\t:text-formatting=\"textFormatting\"\n\t\t\t\t\t\t\t></format-message>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div v-else-if=\"message.file.audio\" class=\"vac-audio-message\">\n\t\t\t\t\t\t\t<div id=\"vac-player\">\n\t\t\t\t\t\t\t\t<audio controls v-if=\"message.file.audio\">\n\t\t\t\t\t\t\t\t\t<source :src=\"message.file.url\" />\n\t\t\t\t\t\t\t\t</audio>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div v-else class=\"vac-file-message\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"vac-svg-button vac-icon-file\"\n\t\t\t\t\t\t\t\t@click.stop=\"openFile('download')\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<slot name=\"document-icon\">\n\t\t\t\t\t\t\t\t\t<svg-icon name=\"document\" />\n\t\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<span>{{ message.content }}</span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"vac-text-timestamp\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"vac-icon-edited\"\n\t\t\t\t\t\t\t\tv-if=\"message.edited && !message.deleted\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<slot name=\"pencil-icon\">\n\t\t\t\t\t\t\t\t\t<svg-icon name=\"pencil\" />\n\t\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<span>{{ message.timestamp }}</span>\n\t\t\t\t\t\t\t<span v-if=\"isCheckmarkVisible\">\n\t\t\t\t\t\t\t\t<slot name=\"checkmark-icon\" v-bind=\"{ message }\">\n\t\t\t\t\t\t\t\t\t<svg-icon\n\t\t\t\t\t\t\t\t\t\t:name=\"\n\t\t\t\t\t\t\t\t\t\t\tmessage.distributed ? 'double-checkmark' : 'checkmark'\n\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t\t:param=\"message.seen ? 'seen' : ''\"\n\t\t\t\t\t\t\t\t\t\tclass=\"vac-icon-check\"\n\t\t\t\t\t\t\t\t\t></svg-icon>\n\t\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"vac-options-container\"\n\t\t\t\t\t\t\t:class=\"{ 'vac-options-image': isImage && !message.replyMessage }\"\n\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\twidth:\n\t\t\t\t\t\t\t\t\tfilteredMessageActions.length && showReactionEmojis\n\t\t\t\t\t\t\t\t\t\t? '70px'\n\t\t\t\t\t\t\t\t\t\t: '45px'\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<transition-group name=\"vac-slide-left\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tkey=\"1\"\n\t\t\t\t\t\t\t\t\tclass=\"vac-blur-container\"\n\t\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t\t'vac-options-me': message.sender_id === currentUserId\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t\tv-if=\"isMessageActions || isMessageReactions\"\n\t\t\t\t\t\t\t\t></div>\n\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tref=\"actionIcon\"\n\t\t\t\t\t\t\t\t\tkey=\"2\"\n\t\t\t\t\t\t\t\t\tclass=\"vac-svg-button vac-message-options\"\n\t\t\t\t\t\t\t\t\tv-if=\"isMessageActions\"\n\t\t\t\t\t\t\t\t\t@click=\"openOptions\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<slot name=\"dropdown-icon\">\n\t\t\t\t\t\t\t\t\t\t<svg-icon name=\"dropdown\" param=\"message\" />\n\t\t\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<emoji-picker\n\t\t\t\t\t\t\t\t\tkey=\"3\"\n\t\t\t\t\t\t\t\t\tclass=\"vac-message-reactions\"\n\t\t\t\t\t\t\t\t\t:style=\"{ right: isMessageActions ? '30px' : '5px' }\"\n\t\t\t\t\t\t\t\t\tv-if=\"isMessageReactions\"\n\t\t\t\t\t\t\t\t\tv-click-outside=\"closeEmoji\"\n\t\t\t\t\t\t\t\t\t:emoji-opened=\"emojiOpened\"\n\t\t\t\t\t\t\t\t\t:emoji-reaction=\"true\"\n\t\t\t\t\t\t\t\t\t:room-footer-ref=\"roomFooterRef\"\n\t\t\t\t\t\t\t\t\t:position-right=\"message.sender_id === currentUserId\"\n\t\t\t\t\t\t\t\t\t@add-emoji=\"sendMessageReaction\"\n\t\t\t\t\t\t\t\t\t@open-emoji=\"openEmoji\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<template v-slot:emoji-picker-icon>\n\t\t\t\t\t\t\t\t\t\t<slot name=\"emoji-picker-reaction-icon\"></slot>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</emoji-picker>\n\t\t\t\t\t\t\t</transition-group>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<transition\n\t\t\t\t\t\t\t:name=\"\n\t\t\t\t\t\t\t\tmessage.sender_id === currentUserId\n\t\t\t\t\t\t\t\t\t? 'vac-slide-left'\n\t\t\t\t\t\t\t\t\t: 'vac-slide-right'\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\tv-if=\"filteredMessageActions.length\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tref=\"menuOptions\"\n\t\t\t\t\t\t\t\tv-if=\"optionsOpened\"\n\t\t\t\t\t\t\t\tv-click-outside=\"closeOptions\"\n\t\t\t\t\t\t\t\tclass=\"vac-menu-options\"\n\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t'vac-menu-left': message.sender_id !== currentUserId\n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t:style=\"{ top: `${menuOptionsTop}px` }\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"vac-menu-list\">\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tv-for=\"action in filteredMessageActions\"\n\t\t\t\t\t\t\t\t\t\t:key=\"action.name\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"vac-menu-item\"\n\t\t\t\t\t\t\t\t\t\t\t@click=\"messageActionHandler(action)\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{{ action.title }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</transition>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<transition-group name=\"vac-slide-left\" v-if=\"!message.deleted\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tv-for=\"(reaction, key) in message.reactions\"\n\t\t\t\t\t\t\tv-show=\"reaction.length\"\n\t\t\t\t\t\t\t:key=\"key + 0\"\n\t\t\t\t\t\t\tclass=\"vac-button-reaction\"\n\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t'vac-reaction-me': reaction.indexOf(currentUserId) !== -1\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\tfloat: message.sender_id === currentUserId ? 'right' : 'left'\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t@click=\"sendMessageReaction({ name: key }, reaction)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ getEmojiByName(key) }}<span>{{ reaction.length }}</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</transition-group>\n\t\t\t\t</div>\n\t\t\t</slot>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport vClickOutside from 'v-click-outside'\n\nimport SvgIcon from './SvgIcon'\nimport Loader from './Loader'\nimport EmojiPicker from './EmojiPicker'\nimport FormatMessage from './FormatMessage'\n\nexport default {\n\tname: 'message',\n\tcomponents: { SvgIcon, Loader, EmojiPicker, FormatMessage },\n\n\tdirectives: {\n\t\tclickOutside: vClickOutside.directive\n\t},\n\n\tprops: {\n\t\tcurrentUserId: { type: [String, Number], required: true },\n\t\ttextMessages: { type: Object, required: true },\n\t\tindex: { type: Number, required: true },\n\t\tmessage: { type: Object, required: true },\n\t\tmessages: { type: Array, required: true },\n\t\teditedMessage: { type: Object, required: true },\n\t\troomUsers: { type: Array, default: () => [] },\n\t\tmessageActions: { type: Array, required: true },\n\t\troomFooterRef: { type: HTMLDivElement },\n\t\tnewMessages: { type: Array },\n\t\tshowReactionEmojis: { type: Boolean, required: true },\n\t\tshowNewMessagesDivider: { type: Boolean, required: true },\n\t\ttextFormatting: { type: Boolean, required: true },\n\t\temojisList: { type: Object, required: true },\n\t\thideOptions: { type: Boolean, required: true }\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\thoverMessageId: null,\n\t\t\timageLoading: false,\n\t\t\timageHover: false,\n\t\t\tmessageHover: false,\n\t\t\toptionsOpened: false,\n\t\t\toptionsClosing: false,\n\t\t\tmenuOptionsTop: 0,\n\t\t\tmessageReaction: '',\n\t\t\tnewMessage: {},\n\t\t\temojiOpened: false,\n\t\t\timageResponsive: ''\n\t\t}\n\t},\n\n\twatch: {\n\t\tmessage: {\n\t\t\timmediate: true,\n\t\t\thandler() {\n\t\t\t\tthis.checkImgLoad()\n\t\t\t}\n\t\t},\n\t\tnewMessages(val) {\n\t\t\tif (!val.length || !this.showNewMessagesDivider) return\n\t\t\tthis.newMessage = val.reduce((res, obj) =>\n\t\t\t\tobj.index < res.index ? obj : res\n\t\t\t)\n\t\t},\n\t\temojiOpened(val) {\n\t\t\tif (val) this.optionsOpened = false\n\t\t},\n\t\thideOptions(val) {\n\t\t\tif (val) {\n\t\t\t\tthis.closeEmoji()\n\t\t\t\tthis.closeOptions()\n\t\t\t}\n\t\t}\n\t},\n\n\tmounted() {\n\t\tif (!this.message.seen && this.message.sender_id !== this.currentUserId) {\n\t\t\tthis.$emit('add-new-message', {\n\t\t\t\t_id: this.message._id,\n\t\t\t\tindex: this.index\n\t\t\t})\n\t\t}\n\n\t\tif (!this.$refs.imageRef) return\n\n\t\tthis.imageResponsive = {\n\t\t\tmaxHeight: this.$refs.imageRef.clientWidth - 18,\n\t\t\tloaderTop: this.$refs.imageRef.clientWidth / 2\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tshowDate() {\n\t\t\treturn (\n\t\t\t\tthis.index > 0 &&\n\t\t\t\tthis.message.date !== this.messages[this.index - 1].date\n\t\t\t)\n\t\t},\n\t\tmessageOffset() {\n\t\t\treturn (\n\t\t\t\tthis.index > 0 &&\n\t\t\t\tthis.message.sender_id !== this.messages[this.index - 1].sender_id\n\t\t\t)\n\t\t},\n\t\tisImage() {\n\t\t\treturn this.checkImageFile()\n\t\t},\n\t\tisImageReply() {\n\t\t\treturn this.checkImageReplyFile()\n\t\t},\n\t\tisImageLoading() {\n\t\t\treturn (\n\t\t\t\tthis.message.file.url.indexOf('blob:http') !== -1 || this.imageLoading\n\t\t\t)\n\t\t},\n\t\tisCheckmarkVisible() {\n\t\t\treturn (\n\t\t\t\tthis.message.sender_id === this.currentUserId &&\n\t\t\t\t!this.message.deleted &&\n\t\t\t\t(this.message.saved || this.message.distributed || this.message.seen)\n\t\t\t)\n\t\t},\n\t\treplyUsername() {\n\t\t\tconst { sender_id } = this.message.replyMessage\n\t\t\tconst replyUser = this.roomUsers.find(user => user._id === sender_id)\n\t\t\treturn replyUser ? replyUser.username : ''\n\t\t},\n\t\tisMessageActions() {\n\t\t\treturn (\n\t\t\t\tthis.filteredMessageActions.length &&\n\t\t\t\tthis.messageHover &&\n\t\t\t\t!this.message.deleted &&\n\t\t\t\t!this.message.disable_actions\n\t\t\t)\n\t\t},\n\t\tisMessageReactions() {\n\t\t\treturn (\n\t\t\t\tthis.showReactionEmojis &&\n\t\t\t\tthis.messageHover &&\n\t\t\t\t!this.message.deleted &&\n\t\t\t\t!this.message.disable_reactions\n\t\t\t)\n\t\t},\n\t\tfilteredMessageActions() {\n\t\t\treturn this.message.sender_id === this.currentUserId\n\t\t\t\t? this.messageActions\n\t\t\t\t: this.messageActions.filter(message => !message.onlyMe)\n\t\t}\n\t},\n\n\tmethods: {\n\t\tisMessageHover() {\n\t\t\treturn (\n\t\t\t\tthis.editedMessage._id === this.message._id ||\n\t\t\t\tthis.hoverMessageId === this.message._id\n\t\t\t)\n\t\t},\n\t\tonHoverMessage() {\n\t\t\tthis.imageHover = true\n\t\t\tthis.messageHover = true\n\t\t\tif (this.canEditMessage()) this.hoverMessageId = this.message._id\n\t\t},\n\t\tcanEditMessage() {\n\t\t\treturn !this.message.deleted\n\t\t},\n\t\tonLeaveMessage() {\n\t\t\tthis.imageHover = false\n\t\t\tif (!this.optionsOpened && !this.emojiOpened) this.messageHover = false\n\t\t\tthis.hoverMessageId = null\n\t\t},\n\t\topenFile(action) {\n\t\t\tthis.$emit('open-file', { message: this.message, action })\n\t\t},\n\t\tmessageActionHandler(action) {\n\t\t\tthis.closeOptions()\n\t\t\tthis.messageHover = false\n\t\t\tthis.hoverMessageId = null\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.$emit('message-action-handler', { action, message: this.message })\n\t\t\t}, 300)\n\t\t},\n\t\tcheckImageFile() {\n\t\t\treturn this.checkImageType(this.message.file)\n\t\t},\n\t\tcheckImageReplyFile() {\n\t\t\treturn this.checkImageType(this.message.replyMessage.file)\n\t\t},\n\t\tcheckImageType(file) {\n\t\t\tif (!file) return\n\t\t\tconst imageTypes = ['png', 'jpg', 'jpeg', 'svg']\n\t\t\tconst { type } = file\n\t\t\treturn imageTypes.some(t => type.toLowerCase().includes(t))\n\t\t},\n\t\tcheckImgLoad() {\n\t\t\tif (!this.checkImageFile()) return\n\t\t\tthis.imageLoading = true\n\t\t\tconst image = new Image()\n\t\t\timage.src = this.message.file.url\n\t\t\timage.addEventListener('load', () => (this.imageLoading = false))\n\t\t},\n\t\topenOptions() {\n\t\t\tif (this.optionsClosing) return\n\n\t\t\tthis.optionsOpened = !this.optionsOpened\n\t\t\tif (!this.optionsOpened) return\n\n\t\t\tthis.$emit('hide-options', false)\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (\n\t\t\t\t\t!this.roomFooterRef ||\n\t\t\t\t\t!this.$refs.menuOptions ||\n\t\t\t\t\t!this.$refs.actionIcon\n\t\t\t\t)\n\t\t\t\t\treturn\n\n\t\t\t\tconst menuOptionsTop = this.$refs.menuOptions.getBoundingClientRect()\n\t\t\t\t\t.height\n\n\t\t\t\tconst actionIconTop = this.$refs.actionIcon.getBoundingClientRect().top\n\t\t\t\tconst roomFooterTop = this.roomFooterRef.getBoundingClientRect().top\n\n\t\t\t\tconst optionsTopPosition =\n\t\t\t\t\troomFooterTop - actionIconTop > menuOptionsTop + 50\n\n\t\t\t\tif (optionsTopPosition) this.menuOptionsTop = 30\n\t\t\t\telse this.menuOptionsTop = -menuOptionsTop\n\t\t\t}, 0)\n\t\t},\n\t\tcloseOptions() {\n\t\t\tthis.optionsOpened = false\n\t\t\tthis.optionsClosing = true\n\t\t\tsetTimeout(() => (this.optionsClosing = false), 100)\n\n\t\t\tif (this.hoverMessageId !== this.message._id) this.messageHover = false\n\t\t},\n\t\topenEmoji() {\n\t\t\tthis.emojiOpened = !this.emojiOpened\n\t\t\tthis.$emit('hide-options', false)\n\t\t},\n\t\tcloseEmoji() {\n\t\t\tthis.emojiOpened = false\n\t\t\tif (this.hoverMessageId !== this.message._id) this.messageHover = false\n\t\t},\n\t\tgetEmojiByName(emojiName) {\n\t\t\treturn this.emojisList[emojiName]\n\t\t},\n\t\tsendMessageReaction(emoji, reaction) {\n\t\t\tthis.$emit('send-message-reaction', {\n\t\t\t\tmessageId: this.message._id,\n\t\t\t\treaction: emoji,\n\t\t\t\tremove: reaction && reaction.indexOf(this.currentUserId) !== -1\n\t\t\t})\n\t\t\tthis.closeEmoji()\n\t\t\tthis.messageHover = false\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.vac-card-info {\n\tborder-radius: 4px;\n\ttext-align: center;\n\tmargin: 10px auto;\n\tfont-size: 12px;\n\tpadding: 4px;\n\tdisplay: block;\n\toverflow-wrap: break-word;\n\tposition: relative;\n\twhite-space: normal;\n\tbox-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.1),\n\t\t0 1px 1px -1px rgba(0, 0, 0, 0.11), 0 1px 2px -1px rgba(0, 0, 0, 0.11);\n}\n\n.vac-card-date {\n\tmax-width: 150px;\n\tfont-weight: 500;\n\ttext-transform: uppercase;\n\tcolor: var(--chat-message-color-date);\n\tbackground: var(--chat-message-bg-color-date);\n}\n\n.vac-card-system {\n\tmax-width: 250px;\n\tpadding: 8px 4px;\n\tcolor: var(--chat-message-color-system);\n\tbackground: var(--chat-message-bg-color-system);\n}\n\n.vac-line-new {\n\tcolor: var(--chat-message-color-new-messages);\n\tposition: relative;\n\ttext-align: center;\n\tfont-size: 13px;\n\tpadding: 10px 0;\n}\n\n.vac-line-new:after,\n.vac-line-new:before {\n\tborder-top: 1px solid var(--chat-message-color-new-messages);\n\tcontent: '';\n\tleft: 0;\n\tposition: absolute;\n\ttop: 50%;\n\twidth: calc(50% - 60px);\n}\n\n.vac-line-new:before {\n\tleft: auto;\n\tright: 0;\n}\n\n.vac-message-box {\n\tdisplay: flex;\n\tflex: 0 0 50%;\n\tmax-width: 50%;\n\tjustify-content: flex-start;\n\tline-height: 1.4;\n}\n\n.vac-message-container {\n\tposition: relative;\n\tpadding: 2px 10px;\n\talign-items: end;\n\tmin-width: 100px;\n\tbox-sizing: content-box;\n}\n\n.vac-message-container-offset {\n\tmargin-top: 10px;\n}\n\n.vac-offset-current {\n\tmargin-left: 50%;\n\tjustify-content: flex-end;\n}\n\n.vac-message-card {\n\tbackground: var(--chat-message-bg-color);\n\tcolor: var(--chat-message-color);\n\tborder-radius: 8px;\n\tfont-size: 14px;\n\tpadding: 6px 9px 3px;\n\twhite-space: pre-wrap;\n\tmax-width: 100%;\n\t-webkit-transition-property: box-shadow, opacity;\n\ttransition-property: box-shadow, opacity;\n\ttransition: box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);\n\twill-change: box-shadow;\n\tbox-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.1),\n\t\t0 1px 1px -1px rgba(0, 0, 0, 0.11), 0 1px 2px -1px rgba(0, 0, 0, 0.11);\n}\n\n.vac-message-highlight {\n\tbox-shadow: 0 1px 2px -1px rgba(0, 0, 0, 0.1),\n\t\t0 1px 2px -1px rgba(0, 0, 0, 0.11), 0 1px 5px -1px rgba(0, 0, 0, 0.11);\n}\n\n.vac-message-current {\n\tbackground: var(--chat-message-bg-color-me) !important;\n}\n\n.vac-message-deleted {\n\tcolor: var(--chat-message-color-deleted) !important;\n\tfont-size: 13px !important;\n\tfont-style: italic !important;\n\tbackground: var(--chat-message-bg-color-deleted) !important;\n}\n\n.vac-icon-deleted {\n\theight: 14px;\n\twidth: 14px;\n\tvertical-align: middle;\n\tmargin: -2px 2px 0 0;\n\tfill: var(--chat-message-color-deleted);\n}\n\n.vac-image-container {\n\twidth: 250px;\n\tmax-width: 100%;\n}\n\n.vac-image-reply-container {\n\twidth: 70px;\n}\n\n.vac-message-image {\n\tposition: relative;\n\tbackground-color: var(--chat-message-bg-color-image) !important;\n\tbackground-size: cover !important;\n\tbackground-position: center center !important;\n\tbackground-repeat: no-repeat !important;\n\theight: 250px;\n\twidth: 250px;\n\tmax-width: 100%;\n\tborder-radius: 4px;\n\tmargin: 4px auto 5px;\n\ttransition: 0.4s filter linear;\n}\n\n.vac-message-image-reply {\n\theight: 70px;\n\twidth: 70px;\n\tmargin: 4px auto 3px;\n}\n\n.vac-image-loading {\n\tfilter: blur(3px);\n}\n\n.vac-reply-message {\n\tbackground: var(--chat-message-bg-color-reply);\n\tborder-radius: 4px;\n\tmargin: -1px -5px 8px;\n\tpadding: 8px 10px;\n\n\t.vac-reply-username {\n\t\tcolor: var(--chat-message-color-reply-username);\n\t\tfont-size: 12px;\n\t\tline-height: 15px;\n\t\tmargin-bottom: 2px;\n\t}\n\n\t.vac-reply-content {\n\t\tfont-size: 12px;\n\t\tcolor: var(--chat-message-color-reply-content);\n\t}\n}\n\n.vac-text-username {\n\tfont-size: 13px;\n\tcolor: var(--chat-message-color-username);\n\tmargin-bottom: 2px;\n}\n\n.vac-username-reply {\n\tmargin-bottom: 5px;\n}\n\n.vac-text-timestamp {\n\tfont-size: 10px;\n\tcolor: var(--chat-message-color-timestamp);\n\ttext-align: right;\n}\n\n.selector:not(*:root),\n#vac-player {\n\twidth: 250px;\n\toverflow: hidden;\n\tborder-top-right-radius: 1em;\n\tborder-bottom-right-radius: 2.5em 1em;\n\n\taudio {\n\t\theight: 40px;\n\n\t\t&::-webkit-media-controls-panel {\n\t\t\theight: 40px;\n\t\t}\n\n\t\t&::-webkit-media-controls-mute-button {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t&::-webkit-media-controls-timeline {\n\t\t\tmin-width: 103px;\n\t\t\tmax-width: 142px;\n\t\t}\n\n\t\t&:focus {\n\t\t\toutline: none;\n\t\t}\n\t}\n}\n\n.vac-audio-message {\n\tmargin-top: 3px;\n}\n\n.vac-file-message {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\talign-items: center;\n\tmargin-top: 3px;\n\n\tspan {\n\t\tmax-width: 100%;\n\t}\n\n\t.vac-icon-file svg {\n\t\tmargin-right: 5px;\n\t}\n}\n\n.vac-icon-edited {\n\t-webkit-box-align: center;\n\talign-items: center;\n\tdisplay: -webkit-inline-box;\n\tdisplay: inline-flex;\n\tjustify-content: center;\n\tletter-spacing: normal;\n\tline-height: 1;\n\ttext-indent: 0;\n\tvertical-align: middle;\n\tmargin: 0 4px 2px;\n\n\tsvg {\n\t\theight: 12px;\n\t\twidth: 12px;\n\t}\n}\n\n.vac-options-container {\n\tposition: absolute;\n\ttop: 2px;\n\tright: 10px;\n\theight: 40px;\n\twidth: 70px;\n\toverflow: hidden;\n\tz-index: 1;\n\tborder-top-right-radius: 8px;\n}\n\n.vac-blur-container {\n\tposition: absolute;\n\theight: 100%;\n\twidth: 100%;\n\tleft: 8px;\n\tbottom: 10px;\n\tbackground: var(--chat-message-bg-color);\n\tfilter: blur(3px);\n\tborder-bottom-left-radius: 8px;\n}\n\n.vac-options-me {\n\tbackground: var(--chat-message-bg-color-me);\n}\n\n.vac-options-image .vac-blur-container {\n\tbackground: rgba(255, 255, 255, 0.6);\n\tborder-bottom-left-radius: 15px;\n}\n\n.vac-image-buttons {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tborder-radius: 4px;\n\tbackground: linear-gradient(\n\t\tto bottom,\n\t\trgba(0, 0, 0, 0) 55%,\n\t\trgba(0, 0, 0, 0.02) 60%,\n\t\trgba(0, 0, 0, 0.05) 65%,\n\t\trgba(0, 0, 0, 0.1) 70%,\n\t\trgba(0, 0, 0, 0.2) 75%,\n\t\trgba(0, 0, 0, 0.3) 80%,\n\t\trgba(0, 0, 0, 0.5) 85%,\n\t\trgba(0, 0, 0, 0.6) 90%,\n\t\trgba(0, 0, 0, 0.7) 95%,\n\t\trgba(0, 0, 0, 0.8) 100%\n\t);\n\n\tsvg {\n\t\theight: 26px;\n\t\twidth: 26px;\n\t}\n\n\t.vac-button-view,\n\t.vac-button-download {\n\t\tposition: absolute;\n\t\tbottom: 6px;\n\t\tleft: 7px;\n\t}\n\n\t:first-child {\n\t\tleft: 40px;\n\t}\n\n\t.vac-button-view {\n\t\tmax-width: 18px;\n\t\tbottom: 8px;\n\t}\n}\n\n.vac-message-options {\n\tbackground: var(--chat-icon-bg-dropdown-message);\n\tborder-radius: 50%;\n\tposition: absolute;\n\ttop: 7px;\n\tright: 7px;\n\n\tsvg {\n\t\theight: 17px;\n\t\twidth: 17px;\n\t\tpadding: 5px;\n\t\tmargin: -5px;\n\t}\n}\n\n.vac-message-reactions {\n\tposition: absolute;\n\ttop: 6px;\n\tright: 30px;\n}\n\n.vac-menu-options {\n\tright: 15px;\n}\n\n.vac-menu-left {\n\tright: -118px;\n}\n\n.vac-icon-check {\n\theight: 14px;\n\twidth: 14px;\n\tvertical-align: middle;\n\tmargin: -3px -3px 0 3px;\n}\n\n.vac-button-reaction {\n\tdisplay: inline-flex;\n\talign-items: center;\n\tborder: var(--chat-message-border-style-reaction);\n\toutline: none;\n\tbackground: var(--chat-message-bg-color-reaction);\n\tborder-radius: 4px;\n\tmargin: 4px 2px 0;\n\ttransition: 0.3s;\n\tpadding: 0 5px;\n\tfont-size: 18px;\n\tline-height: 23px;\n\n\tspan {\n\t\tfont-size: 11px;\n\t\tfont-weight: 500;\n\t\tmin-width: 7px;\n\t\tcolor: var(--chat-message-color-reaction-counter);\n\t}\n\n\t&:hover {\n\t\tborder: var(--chat-message-border-style-reaction-hover);\n\t\tbackground: var(--chat-message-bg-color-reaction-hover);\n\t\tcursor: pointer;\n\t}\n}\n\n.vac-reaction-me {\n\tborder: var(--chat-message-border-style-reaction-me);\n\tbackground: var(--chat-message-bg-color-reaction-me);\n\n\tspan {\n\t\tcolor: var(--chat-message-color-reaction-counter-me);\n\t}\n\n\t&:hover {\n\t\tborder: var(--chat-message-border-style-reaction-hover-me);\n\t\tbackground: var(--chat-message-bg-color-reaction-hover-me);\n\t}\n}\n\n@media only screen and (max-width: 768px) {\n\t.vac-message-container {\n\t\tpadding: 2px 3px 1px;\n\t}\n\n\t.vac-message-container-offset {\n\t\tmargin-top: 10px;\n\t}\n\n\t.vac-message-box {\n\t\tflex: 0 0 80%;\n\t\tmax-width: 80%;\n\t}\n\n\t.vac-offset-current {\n\t\tmargin-left: 20%;\n\t}\n\n\t.vac-options-container {\n\t\tright: 3px;\n\t}\n\n\t.vac-menu-left {\n\t\tright: -50px;\n\t}\n}\n</style>\n","import mod from \"-!../../demo/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../demo/node_modules/thread-loader/dist/cjs.js!../../demo/node_modules/babel-loader/lib/index.js!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../demo/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../demo/node_modules/thread-loader/dist/cjs.js!../../demo/node_modules/babel-loader/lib/index.js!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Message.vue?vue&type=template&id=7c02eae5&scoped=true&\"\nimport script from \"./Message.vue?vue&type=script&lang=js&\"\nexport * from \"./Message.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Message.vue?vue&type=style&index=0&id=7c02eae5&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c02eae5\",\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div\n\t\tclass=\"vac-col-messages\"\n\t\tv-show=\"(isMobile && !showRoomsList) || !isMobile || singleRoom\"\n\t>\n\t\t<slot\n\t\t\tv-if=\"\n\t\t\t\t(!rooms.length && !loadingRooms) || (!room.roomId && !loadFirstRoom)\n\t\t\t\"\n\t\t\tname=\"no-room-selected\"\n\t\t>\n\t\t\t<div class=\"vac-container-center vac-room-empty\">\n\t\t\t\t<div>{{ textMessages.ROOM_EMPTY }}</div>\n\t\t\t</div>\n\t\t</slot>\n\t\t<div v-else class=\"vac-room-header vac-app-border-b\">\n\t\t\t<slot name=\"room-header\" v-bind=\"{ room, typingUsers, userStatus }\">\n\t\t\t\t<div class=\"vac-room-wrapper\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"!singleRoom\"\n\t\t\t\t\t\tclass=\"vac-svg-button vac-toggle-button\"\n\t\t\t\t\t\t:class=\"{ 'vac-rotate-icon': !showRoomsList && !isMobile }\"\n\t\t\t\t\t\t@click=\"$emit('toggle-rooms-list')\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<slot name=\"toggle-icon\">\n\t\t\t\t\t\t\t<svg-icon name=\"toggle\" />\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"vac-info-wrapper\"\n\t\t\t\t\t\t:class=\"{ 'vac-item-clickable': roomInfo }\"\n\t\t\t\t\t\t@click=\"$emit('room-info', room)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<slot name=\"room-header-avatar\" v-bind=\"{ room }\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"room.avatar\"\n\t\t\t\t\t\t\t\tclass=\"vac-room-avatar\"\n\t\t\t\t\t\t\t\t:style=\"{ 'background-image': `url('${room.avatar}')` }\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t<slot\n\t\t\t\t\t\t\tname=\"room-header-info\"\n\t\t\t\t\t\t\tv-bind=\"{ room, typingUsers, userStatus }\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"vac-text-ellipsis\">\n\t\t\t\t\t\t\t\t<div class=\"vac-room-name vac-text-ellipsis\">\n\t\t\t\t\t\t\t\t\t{{ room.roomName }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div v-if=\"typingUsers\" class=\"vac-room-info vac-text-ellipsis\">\n\t\t\t\t\t\t\t\t\t{{ typingUsers }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div v-else class=\"vac-room-info vac-text-ellipsis\">\n\t\t\t\t\t\t\t\t\t{{ userStatus }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\t\t\t\t\t<slot v-if=\"room.roomId\" name=\"room-options\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"vac-svg-button vac-room-options\"\n\t\t\t\t\t\t\tv-if=\"menuActions.length\"\n\t\t\t\t\t\t\t@click=\"menuOpened = !menuOpened\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<slot name=\"menu-icon\">\n\t\t\t\t\t\t\t\t<svg-icon name=\"menu\" />\n\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<transition name=\"vac-slide-left\" v-if=\"menuActions.length\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"menuOpened\"\n\t\t\t\t\t\t\t\tv-click-outside=\"closeMenu\"\n\t\t\t\t\t\t\t\tclass=\"vac-menu-options\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"vac-menu-list\">\n\t\t\t\t\t\t\t\t\t<div v-for=\"action in menuActions\" :key=\"action.name\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"vac-menu-item\"\n\t\t\t\t\t\t\t\t\t\t\t@click=\"menuActionHandler(action)\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{{ action.title }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</transition>\n\t\t\t\t\t</slot>\n\t\t\t\t</div>\n\t\t\t</slot>\n\t\t</div>\n\t\t<div ref=\"scrollContainer\" class=\"vac-container-scroll\">\n\t\t\t<loader :show=\"loadingMessages\"></loader>\n\t\t\t<div class=\"vac-messages-container\">\n\t\t\t\t<div :class=\"{ 'vac-messages-hidden': loadingMessages }\">\n\t\t\t\t\t<transition name=\"vac-fade-message\">\n\t\t\t\t\t\t<div class=\"vac-text-started\" v-if=\"showNoMessages\">\n\t\t\t\t\t\t\t<slot name=\"messages-empty\">\n\t\t\t\t\t\t\t\t{{ textMessages.MESSAGES_EMPTY }}\n\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"vac-text-started\" v-if=\"showMessagesStarted\">\n\t\t\t\t\t\t\t{{ textMessages.CONVERSATION_STARTED }} {{ messages[0].date }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</transition>\n\t\t\t\t\t<transition name=\"vac-fade-message\">\n\t\t\t\t\t\t<infinite-loading\n\t\t\t\t\t\t\tv-if=\"messages.length\"\n\t\t\t\t\t\t\t:class=\"{ 'vac-infinite-loading': !messagesLoaded }\"\n\t\t\t\t\t\t\tspinner=\"spiral\"\n\t\t\t\t\t\t\tdirection=\"top\"\n\t\t\t\t\t\t\t:distance=\"40\"\n\t\t\t\t\t\t\t@infinite=\"loadMoreMessages\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div slot=\"spinner\">\n\t\t\t\t\t\t\t\t<loader :show=\"true\" :infinite=\"true\"></loader>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div slot=\"no-results\"></div>\n\t\t\t\t\t\t\t<div slot=\"no-more\"></div>\n\t\t\t\t\t\t</infinite-loading>\n\t\t\t\t\t</transition>\n\t\t\t\t\t<transition-group name=\"vac-fade-message\">\n\t\t\t\t\t\t<div v-for=\"(message, i) in messages\" :key=\"message._id\">\n\t\t\t\t\t\t\t<message\n\t\t\t\t\t\t\t\t:current-user-id=\"currentUserId\"\n\t\t\t\t\t\t\t\t:message=\"message\"\n\t\t\t\t\t\t\t\t:index=\"i\"\n\t\t\t\t\t\t\t\t:messages=\"messages\"\n\t\t\t\t\t\t\t\t:edited-message=\"editedMessage\"\n\t\t\t\t\t\t\t\t:message-actions=\"messageActions\"\n\t\t\t\t\t\t\t\t:room-users=\"room.users\"\n\t\t\t\t\t\t\t\t:text-messages=\"textMessages\"\n\t\t\t\t\t\t\t\t:room-footer-ref=\"$refs.roomFooter\"\n\t\t\t\t\t\t\t\t:new-messages=\"newMessages\"\n\t\t\t\t\t\t\t\t:show-reaction-emojis=\"showReactionEmojis\"\n\t\t\t\t\t\t\t\t:show-new-messages-divider=\"showNewMessagesDivider\"\n\t\t\t\t\t\t\t\t:text-formatting=\"textFormatting\"\n\t\t\t\t\t\t\t\t:emojis-list=\"emojisList\"\n\t\t\t\t\t\t\t\t:hide-options=\"hideOptions\"\n\t\t\t\t\t\t\t\t@message-action-handler=\"messageActionHandler\"\n\t\t\t\t\t\t\t\t@open-file=\"openFile\"\n\t\t\t\t\t\t\t\t@add-new-message=\"addNewMessage\"\n\t\t\t\t\t\t\t\t@send-message-reaction=\"sendMessageReaction\"\n\t\t\t\t\t\t\t\t@hide-options=\"hideOptions = $event\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<template\n\t\t\t\t\t\t\t\t\tv-for=\"(index, name) in $scopedSlots\"\n\t\t\t\t\t\t\t\t\tv-slot:[name]=\"data\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\"></slot>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</message>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</transition-group>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"!loadingMessages\">\n\t\t\t<transition name=\"vac-bounce\">\n\t\t\t\t<div class=\"vac-icon-scroll\" v-if=\"scrollIcon\" @click=\"scrollToBottom\">\n\t\t\t\t\t<slot name=\"scroll-icon\">\n\t\t\t\t\t\t<svg-icon name=\"dropdown\" param=\"scroll\" />\n\t\t\t\t\t</slot>\n\t\t\t\t</div>\n\t\t\t</transition>\n\t\t</div>\n\t\t<div\n\t\t\tref=\"roomFooter\"\n\t\t\tclass=\"vac-room-footer\"\n\t\t\tv-show=\"Object.keys(room).length && showFooter\"\n\t\t>\n\t\t\t<transition name=\"vac-slide-up\">\n\t\t\t\t<div v-if=\"messageReply\" class=\"vac-reply-container\">\n\t\t\t\t\t<div class=\"vac-reply-box\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tv-if=\"isImageCheck(messageReply.file)\"\n\t\t\t\t\t\t\t:src=\"messageReply.file.url\"\n\t\t\t\t\t\t\tclass=\"vac-image-reply\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class=\"vac-reply-info\">\n\t\t\t\t\t\t\t<div class=\"vac-reply-username\">{{ messageReply.username }}</div>\n\t\t\t\t\t\t\t<div class=\"vac-reply-content\">{{ messageReply.content }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"vac-icon-reply\">\n\t\t\t\t\t\t<div class=\"vac-svg-button\" @click=\"resetMessage\">\n\t\t\t\t\t\t\t<slot name=\"reply-close-icon\">\n\t\t\t\t\t\t\t\t<svg-icon name=\"close-outline\" />\n\t\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</transition>\n\n\t\t\t<div class=\"vac-box-footer\">\n\t\t\t\t<div class=\"vac-icon-textarea-left\" v-if=\"showAudio && !imageFile\">\n\t\t\t\t\t<div class=\"vac-svg-button\" @click=\"recordAudio\">\n\t\t\t\t\t\t<slot\n\t\t\t\t\t\t\tv-if=\"recorder.state === 'recording'\"\n\t\t\t\t\t\t\tname=\"microphone-off-icon\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<svg-icon name=\"microphone-off\" class=\"vac-icon-microphone-off\" />\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t\t<slot v-else name=\"microphone-icon\">\n\t\t\t\t\t\t\t<svg-icon name=\"microphone\" class=\"vac-icon-microphone\" />\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"vac-image-container\" v-if=\"imageFile\">\n\t\t\t\t\t<div class=\"vac-svg-button vac-icon-image\" @click=\"resetImageFile\">\n\t\t\t\t\t\t<slot name=\"image-close-icon\">\n\t\t\t\t\t\t\t<svg-icon name=\"close\" param=\"image\" />\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"vac-image-file\">\n\t\t\t\t\t\t<img ref=\"imageFile\" :src=\"imageFile\" @load=\"onImgLoad\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div\n\t\t\t\t\tv-else-if=\"file\"\n\t\t\t\t\tclass=\"vac-file-container\"\n\t\t\t\t\t:class=\"{ 'vac-file-container-edit': editedMessage._id }\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"vac-icon-file\">\n\t\t\t\t\t\t<slot name=\"file-icon\">\n\t\t\t\t\t\t\t<svg-icon name=\"file\" />\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"vac-file-message\" v-if=\"file && file.audio\">audio</div>\n\t\t\t\t\t<div class=\"vac-file-message\" v-else>{{ message }}</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"vac-svg-button vac-icon-remove\"\n\t\t\t\t\t\t@click=\"resetMessage(null, true)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<slot name=\"file-close-icon\">\n\t\t\t\t\t\t\t<svg-icon name=\"close\" />\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<textarea\n\t\t\t\t\tv-show=\"!file || imageFile\"\n\t\t\t\t\tref=\"roomTextarea\"\n\t\t\t\t\t:placeholder=\"textMessages.TYPE_MESSAGE\"\n\t\t\t\t\tclass=\"vac-textarea\"\n\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t'vac-textarea-outline': editedMessage._id\n\t\t\t\t\t}\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t'min-height': `${imageDimensions ? imageDimensions.height : 20}px`,\n\t\t\t\t\t\t'padding-left': `${\n\t\t\t\t\t\t\timageDimensions ? imageDimensions.width - 10 : 12\n\t\t\t\t\t\t}px`\n\t\t\t\t\t}\"\n\t\t\t\t\tv-model=\"message\"\n\t\t\t\t\t@input=\"onChangeInput\"\n\t\t\t\t\t@keydown.esc=\"resetMessage\"\n\t\t\t\t\t@keydown.enter.exact.prevent=\"\"\n\t\t\t\t></textarea>\n\n\t\t\t\t<div class=\"vac-icon-textarea\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"vac-svg-button\"\n\t\t\t\t\t\tv-if=\"editedMessage._id\"\n\t\t\t\t\t\t@click=\"resetMessage\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<slot name=\"edit-close-icon\">\n\t\t\t\t\t\t\t<svg-icon name=\"close-outline\" />\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<emoji-picker\n\t\t\t\t\t\tv-if=\"showEmojis && (!file || imageFile)\"\n\t\t\t\t\t\t:emoji-opened=\"emojiOpened\"\n\t\t\t\t\t\t:position-top=\"true\"\n\t\t\t\t\t\t@add-emoji=\"addEmoji\"\n\t\t\t\t\t\t@open-emoji=\"emojiOpened = $event\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template v-slot:emoji-picker-icon>\n\t\t\t\t\t\t\t<slot name=\"emoji-picker-icon\"></slot>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</emoji-picker>\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"showFiles\"\n\t\t\t\t\t\tclass=\"vac-svg-button\"\n\t\t\t\t\t\t@click=\"launchFilePicker\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<slot name=\"paperclip-icon\">\n\t\t\t\t\t\t\t<svg-icon name=\"paperclip\" />\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"textareaAction\"\n\t\t\t\t\t\t@click=\"textareaActionHandler\"\n\t\t\t\t\t\tclass=\"vac-svg-button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<slot name=\"custom-action-icon\">\n\t\t\t\t\t\t\t<svg-icon name=\"deleted\" />\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<input\n\t\t\t\t\t\tv-if=\"showFiles\"\n\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\tref=\"file\"\n\t\t\t\t\t\t:accept=\"acceptedFiles\"\n\t\t\t\t\t\t@change=\"onFileChange($event.target.files)\"\n\t\t\t\t\t\tstyle=\"display:none\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"showSendIcon\"\n\t\t\t\t\t\t@click=\"sendMessage\"\n\t\t\t\t\t\tclass=\"vac-svg-button\"\n\t\t\t\t\t\t:class=\"{ 'vac-send-disabled': inputDisabled }\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<slot name=\"send-icon\">\n\t\t\t\t\t\t\t<svg-icon name=\"send\" :param=\"inputDisabled ? 'disabled' : ''\" />\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport InfiniteLoading from 'vue-infinite-loading'\nimport vClickOutside from 'v-click-outside'\nimport emojis from 'vue-emoji-picker/src/emojis'\n\nimport Loader from './Loader'\nimport Message from './Message'\nimport SvgIcon from './SvgIcon'\nimport EmojiPicker from './EmojiPicker'\n\nconst { messagesValid } = require('../utils/roomValidation')\nconst { detectMobile, iOSDevice } = require('../utils/mobileDetection')\nimport typingText from '../utils/typingText'\n\nexport default {\n\tname: 'room',\n\tcomponents: {\n\t\tInfiniteLoading,\n\t\tLoader,\n\t\tMessage,\n\t\tSvgIcon,\n\t\tEmojiPicker\n\t},\n\n\tdirectives: {\n\t\tclickOutside: vClickOutside.directive\n\t},\n\n\tprops: {\n\t\tcurrentUserId: { type: [String, Number], required: true },\n\t\ttextMessages: { type: Object, required: true },\n\t\tsingleRoom: { type: Boolean, required: true },\n\t\tshowRoomsList: { type: Boolean, required: true },\n\t\tisMobile: { type: Boolean, required: true },\n\t\trooms: { type: Array, required: true },\n\t\troomId: { type: [String, Number], required: true },\n\t\tloadFirstRoom: { type: Boolean, required: true },\n\t\tmessages: { type: Array, required: true },\n\t\troomMessage: { type: String },\n\t\tmessagesLoaded: { type: Boolean, required: true },\n\t\tmenuActions: { type: Array, required: true },\n\t\tmessageActions: { type: Array, required: true },\n\t\tshowSendIcon: { type: Boolean, required: true },\n\t\tshowFiles: { type: Boolean, required: true },\n\t\tshowAudio: { type: Boolean, required: true },\n\t\tshowEmojis: { type: Boolean, required: true },\n\t\tshowReactionEmojis: { type: Boolean, required: true },\n\t\tshowNewMessagesDivider: { type: Boolean, required: true },\n\t\tshowFooter: { type: Boolean, required: true },\n\t\tacceptedFiles: { type: String, required: true },\n\t\ttextFormatting: { type: Boolean, required: true },\n\t\tloadingRooms: { type: Boolean, required: true },\n\t\troomInfo: { type: Function },\n\t\ttextareaAction: { type: Function }\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tmessage: '',\n\t\t\teditedMessage: {},\n\t\t\tmessageReply: null,\n\t\t\tinfiniteState: null,\n\t\t\tloadingMessages: false,\n\t\t\tloadingMoreMessages: false,\n\t\t\tfile: null,\n\t\t\timageFile: null,\n\t\t\timageDimensions: null,\n\t\t\tmenuOpened: false,\n\t\t\temojiOpened: false,\n\t\t\thideOptions: true,\n\t\t\tscrollIcon: false,\n\t\t\tnewMessages: [],\n\t\t\trecorderStream: {},\n\t\t\trecorder: {},\n\t\t\trecordedChunks: [],\n\t\t\tkeepKeyboardOpen: false\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.newMessages = []\n\n\t\twindow.addEventListener('keyup', e => {\n\t\t\tif (e.keyCode === 13 && !e.shiftKey) {\n\t\t\t\tif (detectMobile()) {\n\t\t\t\t\tthis.message = this.message + '\\n'\n\t\t\t\t\tsetTimeout(() => this.onChangeInput(), 0)\n\t\t\t\t} else {\n\t\t\t\t\tthis.sendMessage()\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tif (detectMobile()) {\n\t\t\tthis.$refs['roomTextarea'].addEventListener('blur', () =>\n\t\t\t\tsetTimeout(() => (this.keepKeyboardOpen = false), 0)\n\t\t\t)\n\t\t\tthis.$refs['roomTextarea'].addEventListener(\n\t\t\t\t'click',\n\t\t\t\t() => (this.keepKeyboardOpen = true)\n\t\t\t)\n\t\t}\n\n\t\tthis.$refs.scrollContainer.addEventListener('scroll', e => {\n\t\t\tthis.hideOptions = true\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (!e.target) return\n\n\t\t\t\tconst { scrollHeight, clientHeight, scrollTop } = e.target\n\t\t\t\tconst bottomScroll = scrollHeight - clientHeight - scrollTop\n\n\t\t\t\tthis.scrollIcon = bottomScroll > 1000\n\t\t\t}, 200)\n\t\t})\n\t},\n\n\twatch: {\n\t\tloadingMessages(val) {\n\t\t\tif (val) this.infiniteState = null\n\t\t\telse this.focusTextarea(true)\n\t\t},\n\t\troom(newVal, oldVal) {\n\t\t\tif (newVal.roomId && newVal.roomId !== oldVal.roomId) {\n\t\t\t\tthis.loadingMessages = true\n\t\t\t\tthis.scrollIcon = false\n\t\t\t\tthis.resetMessage(true)\n\t\t\t\tif (this.roomMessage) {\n\t\t\t\t\tthis.message = this.roomMessage\n\t\t\t\t\tsetTimeout(() => this.onChangeInput(), 0)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\troomMessage: {\n\t\t\timmediate: true,\n\t\t\thandler(val) {\n\t\t\t\tif (val) this.message = this.roomMessage\n\t\t\t}\n\t\t},\n\t\tmessages(newVal, oldVal) {\n\t\t\tnewVal.forEach(message => {\n\t\t\t\tif (!messagesValid(message)) {\n\t\t\t\t\tthrow 'Messages object is not valid! Must contain _id[String, Number], content[String, Number] and sender_id[String, Number]'\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tconst element = this.$refs.scrollContainer\n\t\t\tif (!element) return\n\n\t\t\tif (oldVal && newVal && oldVal.length === newVal.length - 1) {\n\t\t\t\tthis.loadingMessages = false\n\n\t\t\t\treturn setTimeout(() => {\n\t\t\t\t\tconst options = { top: element.scrollHeight, behavior: 'smooth' }\n\t\t\t\t\telement.scrollTo(options)\n\t\t\t\t}, 50)\n\t\t\t}\n\n\t\t\tif (this.infiniteState) {\n\t\t\t\tthis.infiniteState.loaded()\n\t\t\t\tsetTimeout(() => (this.loadingMoreMessages = false), 0)\n\t\t\t} else if (newVal.length) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\telement.scrollTo({ top: element.scrollHeight })\n\t\t\t\t\tthis.loadingMessages = false\n\t\t\t\t}, 0)\n\t\t\t}\n\t\t},\n\t\tmessagesLoaded(val) {\n\t\t\tif (val) this.loadingMessages = false\n\t\t\tif (this.infiniteState) this.infiniteState.complete()\n\t\t}\n\t},\n\n\tcomputed: {\n\t\temojisList() {\n\t\t\tconst emojisTable = Object.keys(emojis).map(key => emojis[key])\n\t\t\treturn Object.assign({}, ...emojisTable)\n\t\t},\n\t\troom() {\n\t\t\treturn this.rooms.find(room => room.roomId === this.roomId) || {}\n\t\t},\n\t\tshowNoMessages() {\n\t\t\treturn (\n\t\t\t\tthis.room.roomId &&\n\t\t\t\t!this.messages.length &&\n\t\t\t\t!this.loadingMessages &&\n\t\t\t\t!this.loadingRooms\n\t\t\t)\n\t\t},\n\t\tshowMessagesStarted() {\n\t\t\treturn this.messages.length && this.messagesLoaded\n\t\t},\n\t\tinputDisabled() {\n\t\t\treturn this.isMessageEmpty()\n\t\t},\n\t\ttypingUsers() {\n\t\t\treturn typingText(this.room, this.currentUserId, this.textMessages)\n\t\t},\n\t\tuserStatus() {\n\t\t\tif (!this.room.users || this.room.users.length !== 2) return\n\n\t\t\tconst user = this.room.users.find(u => u._id !== this.currentUserId)\n\n\t\t\tif (!user.status) return\n\n\t\t\tlet text = ''\n\n\t\t\tif (user.status.state === 'online') {\n\t\t\t\ttext = this.textMessages.IS_ONLINE\n\t\t\t} else if (user.status.last_changed) {\n\t\t\t\ttext = this.textMessages.LAST_SEEN + user.status.last_changed\n\t\t\t}\n\n\t\t\treturn text\n\t\t}\n\t},\n\n\tmethods: {\n\t\tonImgLoad() {\n\t\t\tlet height = this.$refs.imageFile.height\n\t\t\tif (height < 30) height = 30\n\n\t\t\tthis.imageDimensions = {\n\t\t\t\theight: this.$refs.imageFile.height - 10,\n\t\t\t\twidth: this.$refs.imageFile.width + 26\n\t\t\t}\n\t\t},\n\t\tasync recordAudio() {\n\t\t\tif (this.recorder.state === 'recording') {\n\t\t\t\tthis.recorder.stop()\n\t\t\t} else {\n\t\t\t\tthis.file = null\n\t\t\t\tthis.recordedChunk = await this.startRecording()\n\t\t\t}\n\t\t},\n\t\tasync startRecording() {\n\t\t\tconst stream = await navigator.mediaDevices.getUserMedia({\n\t\t\t\taudio: true,\n\t\t\t\tvideo: false\n\t\t\t})\n\n\t\t\tthis.recorder = new MediaRecorder(stream)\n\n\t\t\tthis.recorder.ondataavailable = e => this.recordedChunks.push(e.data)\n\t\t\tthis.recorder.start()\n\n\t\t\tconst stopped = new Promise((resolve, reject) => {\n\t\t\t\tthis.recorder.onstop = resolve\n\t\t\t\tthis.recorder.onerror = event => reject(event.name)\n\t\t\t})\n\n\t\t\tstopped.then(async () => {\n\t\t\t\tstream.getTracks().forEach(track => track.stop())\n\n\t\t\t\tconst blob = new Blob(this.recordedChunks, {\n\t\t\t\t\ttype: 'audio/ogg; codecs=\"opus\"'\n\t\t\t\t})\n\n\t\t\t\tconst duration = await this.getBlobDuration(blob)\n\n\t\t\t\tthis.file = {\n\t\t\t\t\tblob: blob,\n\t\t\t\t\tname: 'audio',\n\t\t\t\t\tsize: blob.size,\n\t\t\t\t\tduration: duration,\n\t\t\t\t\ttype: blob.type,\n\t\t\t\t\taudio: true,\n\t\t\t\t\tlocalUrl: URL.createObjectURL(blob)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tgetBlobDuration(blob) {\n\t\t\tconst tempVideoEl = document.createElement('video')\n\n\t\t\tconst durationP = new Promise(resolve =>\n\t\t\t\ttempVideoEl.addEventListener('loadedmetadata', () => {\n\t\t\t\t\tif (tempVideoEl.duration === Infinity) {\n\t\t\t\t\t\ttempVideoEl.currentTime = Number.MAX_SAFE_INTEGER\n\t\t\t\t\t\ttempVideoEl.ontimeupdate = () => {\n\t\t\t\t\t\t\ttempVideoEl.ontimeupdate = null\n\t\t\t\t\t\t\tresolve(tempVideoEl.duration)\n\t\t\t\t\t\t\ttempVideoEl.currentTime = 0\n\t\t\t\t\t\t}\n\t\t\t\t\t} else resolve(tempVideoEl.duration)\n\t\t\t\t})\n\t\t\t)\n\n\t\t\ttempVideoEl.src =\n\t\t\t\ttypeof blob === 'string' || blob instanceof String\n\t\t\t\t\t? blob\n\t\t\t\t\t: window.URL.createObjectURL(blob)\n\n\t\t\treturn durationP\n\t\t},\n\t\taddNewMessage(message) {\n\t\t\tthis.newMessages.push(message)\n\t\t},\n\t\tresetMessage(disableMobileFocus = null, editFile = null) {\n\t\t\tthis.$emit('typing-message', null)\n\n\t\t\tif (editFile) {\n\t\t\t\tthis.file = null\n\t\t\t\tthis.message = ''\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.resetTextareaSize()\n\t\t\tthis.message = ''\n\t\t\tthis.editedMessage = {}\n\t\t\tthis.messageReply = null\n\t\t\tthis.file = null\n\t\t\tthis.imageDimensions = null\n\t\t\tthis.imageFile = null\n\t\t\tthis.emojiOpened = false\n\t\t\tthis.preventKeyboardFromClosing()\n\t\t\tsetTimeout(() => this.focusTextarea(disableMobileFocus), 0)\n\t\t},\n\t\tresetImageFile() {\n\t\t\tthis.imageDimensions = null\n\t\t\tthis.imageFile = null\n\t\t\tthis.editedMessage.file = null\n\t\t\tthis.file = null\n\t\t\tthis.focusTextarea()\n\t\t\tsetTimeout(() => this.resizeTextarea(), 0)\n\t\t},\n\t\tresetTextareaSize() {\n\t\t\tif (!this.$refs['roomTextarea']) return\n\t\t\tthis.$refs['roomTextarea'].style.height = '20px'\n\t\t},\n\t\tfocusTextarea(disableMobileFocus) {\n\t\t\tif (detectMobile() && disableMobileFocus) return\n\t\t\tif (!this.$refs['roomTextarea']) return\n\t\t\tthis.$refs['roomTextarea'].focus()\n\t\t},\n\t\tisMessageEmpty() {\n\t\t\treturn !this.file && !this.message.trim()\n\t\t},\n\t\tpreventKeyboardFromClosing() {\n\t\t\tif (this.keepKeyboardOpen) this.$refs['roomTextarea'].focus()\n\t\t},\n\t\tsendMessage() {\n\t\t\tif (!this.file && !this.message.trim()) return\n\n\t\t\tif (this.editedMessage._id) {\n\t\t\t\tif (this.editedMessage.content !== this.message || this.file) {\n\t\t\t\t\tthis.$emit('edit-message', {\n\t\t\t\t\t\tmessageId: this.editedMessage._id,\n\t\t\t\t\t\tnewContent: this.message.trim(),\n\t\t\t\t\t\tfile: this.file,\n\t\t\t\t\t\treplyMessage: this.messageReply\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.$emit('send-message', {\n\t\t\t\t\tcontent: this.message.trim(),\n\t\t\t\t\tfile: this.file,\n\t\t\t\t\treplyMessage: this.messageReply\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tthis.resetMessage(true)\n\t\t},\n\t\tloadMoreMessages(infiniteState) {\n\t\t\tsetTimeout(\n\t\t\t\t() => {\n\t\t\t\t\tif (this.loadingMoreMessages) return\n\n\t\t\t\t\tif (this.messagesLoaded || !this.room.roomId) {\n\t\t\t\t\t\treturn infiniteState.complete()\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.infiniteState = infiniteState\n\t\t\t\t\tthis.$emit('fetch-messages')\n\t\t\t\t\tthis.loadingMoreMessages = true\n\t\t\t\t},\n\t\t\t\t// prevent scroll bouncing issue on iOS devices\n\t\t\t\tiOSDevice() ? 500 : 0\n\t\t\t)\n\t\t},\n\t\tmessageActionHandler({ action, message }) {\n\t\t\tswitch (action.name) {\n\t\t\t\tcase 'replyMessage':\n\t\t\t\t\treturn this.replyMessage(message)\n\t\t\t\tcase 'editMessage':\n\t\t\t\t\treturn this.editMessage(message)\n\t\t\t\tcase 'deleteMessage':\n\t\t\t\t\treturn this.$emit('delete-message', message._id)\n\t\t\t\tdefault:\n\t\t\t\t\treturn this.$emit('message-action-handler', { action, message })\n\t\t\t}\n\t\t},\n\t\tsendMessageReaction(messageReaction) {\n\t\t\tthis.$emit('send-message-reaction', messageReaction)\n\t\t},\n\t\treplyMessage(message) {\n\t\t\tthis.resetMessage()\n\t\t\tthis.messageReply = message\n\t\t},\n\t\teditMessage(message) {\n\t\t\tthis.resetMessage()\n\t\t\tthis.editedMessage = { ...message }\n\t\t\tthis.file = message.file\n\t\t\tif (this.isImageCheck(this.file)) this.imageFile = message.file.url\n\t\t\tthis.message = message.content\n\n\t\t\tsetTimeout(() => this.resizeTextarea(), 0)\n\t\t},\n\t\tscrollToBottom() {\n\t\t\tconst element = this.$refs.scrollContainer\n\t\t\telement.scrollTo({ top: element.scrollHeight, behavior: 'smooth' })\n\t\t},\n\t\tonChangeInput() {\n\t\t\tthis.keepKeyboardOpen = true\n\t\t\tthis.resizeTextarea()\n\t\t\tthis.$emit('typing-message', this.message)\n\t\t},\n\t\tresizeTextarea() {\n\t\t\tconst el = this.$refs['roomTextarea']\n\n\t\t\tif (!el) return\n\n\t\t\tconst padding = window\n\t\t\t\t.getComputedStyle(el, null)\n\t\t\t\t.getPropertyValue('padding-top')\n\t\t\t\t.replace('px', '')\n\n\t\t\tel.style.height = 0\n\t\t\tel.style.height = el.scrollHeight - padding * 2 + 'px'\n\t\t},\n\t\taddEmoji(emoji) {\n\t\t\tthis.message += emoji.icon\n\t\t\tthis.focusTextarea(true)\n\t\t},\n\t\tlaunchFilePicker() {\n\t\t\tthis.$refs.file.value = ''\n\t\t\tthis.$refs.file.click()\n\t\t},\n\t\tasync onFileChange(files) {\n\t\t\tthis.resetImageFile()\n\t\t\tconst file = files[0]\n\t\t\tconst fileURL = URL.createObjectURL(file)\n\t\t\tconst blobFile = await fetch(fileURL).then(res => res.blob())\n\t\t\tconst typeIndex = file.name.lastIndexOf('.')\n\n\t\t\tthis.file = {\n\t\t\t\tblob: blobFile,\n\t\t\t\tname: file.name.substring(0, typeIndex),\n\t\t\t\tsize: file.size,\n\t\t\t\ttype: file.type,\n\t\t\t\textension: file.name.substring(typeIndex + 1),\n\t\t\t\tlocalUrl: fileURL\n\t\t\t}\n\t\t\tif (this.isImageCheck(this.file)) this.imageFile = fileURL\n\t\t\telse this.message = file.name\n\t\t},\n\t\tisImageCheck(file) {\n\t\t\tif (!file) return\n\t\t\tconst imageTypes = ['png', 'jpg', 'jpeg', 'svg']\n\t\t\tconst { type } = file\n\t\t\treturn imageTypes.some(t => type.toLowerCase().includes(t))\n\t\t},\n\t\topenFile({ message, action }) {\n\t\t\tthis.$emit('open-file', { message, action })\n\t\t},\n\t\tmenuActionHandler(action) {\n\t\t\tthis.closeMenu()\n\t\t\tthis.$emit('menu-action-handler', action)\n\t\t},\n\t\tcloseMenu() {\n\t\t\tthis.menuOpened = false\n\t\t},\n\t\ttextareaActionHandler() {\n\t\t\tthis.$emit('textarea-action-handler', this.message)\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.vac-container-center {\n\theight: 100%;\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\ttext-align: center;\n}\n\n.vac-room-empty {\n\tfont-size: 14px;\n\tcolor: #9ca6af;\n\tfont-style: italic;\n\tline-height: 20px;\n\twhite-space: pre-line;\n\n\tdiv {\n\t\tpadding: 0 10%;\n\t}\n}\n\n.vac-col-messages {\n\tposition: relative;\n\theight: 100%;\n\tflex: 1;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex-flow: column;\n}\n\n.vac-room-header {\n\tposition: absolute;\n\tdisplay: flex;\n\talign-items: center;\n\theight: 64px;\n\twidth: 100%;\n\tz-index: 10;\n\tmargin-right: 1px;\n\tbackground: var(--chat-header-bg-color);\n\tborder-top-right-radius: var(--chat-container-border-radius);\n}\n\n.vac-room-wrapper {\n\tdisplay: flex;\n\talign-items: center;\n\tmin-width: 0;\n\theight: 100%;\n\twidth: 100%;\n\tpadding: 0 16px;\n}\n\n.vac-info-wrapper {\n\tdisplay: flex;\n\talign-items: center;\n\tmin-width: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.vac-toggle-button {\n\tmargin-right: 15px;\n\n\tsvg {\n\t\theight: 26px;\n\t\twidth: 26px;\n\t}\n}\n\n.vac-rotate-icon {\n\ttransform: rotate(180deg) !important;\n}\n\n.vac-room-name {\n\tfont-size: 17px;\n\tfont-weight: 500;\n\tline-height: 22px;\n\tcolor: var(--chat-header-color-name);\n}\n\n.vac-room-info {\n\tfont-size: 13px;\n\tline-height: 18px;\n\tcolor: var(--chat-header-color-info);\n}\n\n.vac-room-options {\n\tmargin-left: auto;\n}\n\n.vac-container-scroll {\n\tbackground: var(--chat-content-bg-color);\n\tflex: 1;\n\toverflow-y: auto;\n\tmargin-right: 1px;\n\tmargin-top: 60px;\n\t-webkit-overflow-scrolling: touch;\n}\n\n.vac-messages-container {\n\tpadding: 0 5px 5px;\n}\n\n.vac-text-started {\n\tfont-size: 14px;\n\tcolor: var(--chat-message-color-started);\n\tfont-style: italic;\n\ttext-align: center;\n\tmargin-top: 30px;\n\tmargin-bottom: 20px;\n}\n\n.vac-infinite-loading {\n\theight: 68px;\n}\n\n.vac-icon-scroll {\n\tposition: absolute;\n\tbottom: 80px;\n\tright: 20px;\n\tpadding: 8px;\n\tbackground: var(--chat-bg-scroll-icon);\n\tborder-radius: 50%;\n\tbox-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.2), 0 1px 1px 0 rgba(0, 0, 0, 0.14),\n\t\t0 1px 2px 0 rgba(0, 0, 0, 0.12);\n\tdisplay: flex;\n\tcursor: pointer;\n\tz-index: 10;\n\n\tsvg {\n\t\theight: 25px;\n\t\twidth: 25px;\n\t}\n}\n\n.vac-room-footer {\n\twidth: calc(100% - 1px);\n\tborder-bottom-right-radius: 4px;\n\tz-index: 10;\n}\n\n.vac-box-footer {\n\tdisplay: flex;\n\tposition: relative;\n\tbackground: var(--chat-footer-bg-color);\n\tpadding: 10px 8px 10px;\n}\n\n.vac-reply-container {\n\tdisplay: flex;\n\tpadding: 10px 10px 0 10px;\n\tbackground: var(--chat-content-bg-color);\n\talign-items: center;\n\tmax-width: 100%;\n\n\t.vac-reply-box {\n\t\twidth: 100%;\n\t\toverflow: hidden;\n\t\tbackground: var(--chat-footer-bg-color-reply);\n\t\tborder-radius: 4px;\n\t\tpadding: 8px 10px;\n\t\tdisplay: flex;\n\t}\n\n\t.vac-reply-info {\n\t\toverflow: hidden;\n\t}\n\n\t.vac-reply-username {\n\t\tcolor: var(--chat-message-color-reply-username);\n\t\tfont-size: 12px;\n\t\tline-height: 15px;\n\t\tmargin-bottom: 2px;\n\t}\n\n\t.vac-reply-content {\n\t\tfont-size: 12px;\n\t\tcolor: var(--chat-message-color-reply-content);\n\t}\n\n\t.vac-icon-reply {\n\t\tmargin-left: 10px;\n\n\t\tsvg {\n\t\t\theight: 20px;\n\t\t\twidth: 20px;\n\t\t}\n\t}\n\n\t.vac-image-reply {\n\t\tmax-height: 100px;\n\t\tmargin-right: 10px;\n\t}\n}\n\n.vac-textarea {\n\theight: 20px;\n\twidth: 100%;\n\tline-height: 20px;\n\toverflow: hidden;\n\toutline: 0;\n\tresize: none;\n\tborder-radius: 20px;\n\tpadding: 12px 16px;\n\tbox-sizing: content-box;\n\tfont-size: 16px;\n\tbackground: var(--chat-bg-color-input);\n\tcolor: var(--chat-color);\n\tcaret-color: var(--chat-color-caret);\n\tborder: var(--chat-border-style-input);\n\n\t&::placeholder {\n\t\tcolor: var(--chat-color-placeholder);\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n}\n\n.vac-textarea-outline {\n\tborder: 1px solid var(--chat-border-color-input-selected);\n\tbox-shadow: inset 0px 0px 0px 1px var(--chat-border-color-input-selected);\n}\n\n.vac-icon-textarea-left {\n\tdisplay: flex;\n\tmargin: 12px 5px 0 0;\n\n\tsvg,\n\t.vac-wrapper {\n\t\tmargin: 0 7px;\n\t}\n}\n\n.vac-icon-textarea {\n\tdisplay: flex;\n\tmargin: 12px 0 0 5px;\n\n\tsvg,\n\t.vac-wrapper {\n\t\tmargin: 0 7px;\n\t}\n}\n\n.vac-icon-microphone {\n\tfill: var(--chat-icon-color-microphone);\n}\n\n.vac-icon-microphone-off {\n\tanimation: vac-scaling 0.8s ease-in-out infinite alternate;\n}\n\n@keyframes vac-scaling {\n\t0% {\n\t\ttransform: scale(1);\n\t}\n\t100% {\n\t\ttransform: scale(1.2);\n\t}\n}\n\n.vac-image-container {\n\tposition: absolute;\n\tmax-width: 25%;\n\tleft: 16px;\n\ttop: 18px;\n}\n\n.vac-image-file {\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-direction: column;\n\tmin-height: 30px;\n\n\timg {\n\t\tborder-radius: 15px;\n\t\twidth: 100%;\n\t\tmax-width: 150px;\n\t\tmax-height: 100%;\n\t}\n}\n\n.vac-icon-image {\n\tposition: absolute;\n\ttop: 6px;\n\tleft: 6px;\n\tz-index: 10;\n\n\tsvg {\n\t\theight: 20px;\n\t\twidth: 20px;\n\t\tborder-radius: 50%;\n\t}\n\n\t&:before {\n\t\tcontent: ' ';\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground: rgba(0, 0, 0, 0.5);\n\t\tborder-radius: 50%;\n\t\tz-index: -1;\n\t}\n}\n\n.vac-file-container {\n\tdisplay: flex;\n\talign-items: center;\n\twidth: calc(100% - 75px);\n\theight: 20px;\n\tpadding: 12px 0;\n\tbox-sizing: content-box;\n\tbackground: var(--chat-bg-color-input);\n\tborder: var(--chat-border-style-input);\n\tborder-radius: 20px;\n}\n\n.vac-file-container-edit {\n\twidth: calc(100% - 109px);\n}\n\n.vac-file-message {\n\tmax-width: calc(100% - 75px);\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n\n.vac-icon-file {\n\tdisplay: flex;\n\tmargin: 0 8px 0 15px;\n}\n\n.vac-icon-remove {\n\tmargin-left: 8px;\n\n\tsvg {\n\t\theight: 18px;\n\t\twidth: 18px;\n\t}\n}\n\n.vac-send-disabled,\n.vac-send-disabled svg {\n\tcursor: none !important;\n\tpointer-events: none !important;\n\ttransform: none !important;\n}\n\n.vac-messages-hidden {\n\topacity: 0;\n}\n\n@media only screen and (max-width: 768px) {\n\t.vac-room-header {\n\t\theight: 50px;\n\n\t\t.vac-room-wrapper {\n\t\t\tpadding: 0 10px;\n\t\t}\n\n\t\t.vac-room-name {\n\t\t\tfont-size: 16px;\n\t\t\tline-height: 22px;\n\t\t}\n\n\t\t.vac-room-info {\n\t\t\tfont-size: 12px;\n\t\t\tline-height: 16px;\n\t\t}\n\n\t\t.vac-room-avatar {\n\t\t\theight: 37px;\n\t\t\twidth: 37px;\n\t\t\tmin-height: 37px;\n\t\t\tmin-width: 37px;\n\t\t}\n\t}\n\n\t.vac-container-scroll {\n\t\tmargin-top: 50px;\n\t}\n\n\t.vac-infinite-loading {\n\t\theight: 58px;\n\t}\n\n\t.vac-box-footer {\n\t\tborder-top: var(--chat-border-style-input);\n\t\tpadding: 7px 2px 7px 7px;\n\t}\n\n\t.vac-text-started {\n\t\tmargin-top: 20px;\n\t}\n\n\t.vac-textarea {\n\t\tpadding: 7px;\n\t\tline-height: 18px;\n\n\t\t&::placeholder {\n\t\t\tcolor: transparent;\n\t\t}\n\t}\n\n\t.vac-icon-textarea-left {\n\t\tmargin: 6px 5px 0 0;\n\n\t\tsvg,\n\t\t.wrapper {\n\t\t\tmargin: 0 5px;\n\t\t}\n\t}\n\n\t.vac-icon-textarea {\n\t\tmargin: 6px 0 0 5px;\n\n\t\tsvg,\n\t\t.wrapper {\n\t\t\tmargin: 0 5px;\n\t\t}\n\t}\n\n\t.vac-image-container {\n\t\ttop: 10px;\n\t\tleft: 10px;\n\t}\n\n\t.vac-image-file img {\n\t\ttransform: scale(0.97);\n\t}\n\n\t.vac-room-footer {\n\t\twidth: 100%;\n\t}\n\n\t.vac-file-container {\n\t\tpadding: 7px 0;\n\n\t\t.icon-file {\n\t\t\tmargin-left: 10px;\n\t\t}\n\t}\n\n\t.vac-reply-container {\n\t\tpadding: 5px 8px;\n\t}\n\n\t.vac-icon-scroll {\n\t\tbottom: 70px;\n\t}\n}\n</style>\n","import mod from \"-!../../demo/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../demo/node_modules/thread-loader/dist/cjs.js!../../demo/node_modules/babel-loader/lib/index.js!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./Room.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../demo/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../demo/node_modules/thread-loader/dist/cjs.js!../../demo/node_modules/babel-loader/lib/index.js!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./Room.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Room.vue?vue&type=template&id=06df2d8e&scoped=true&\"\nimport script from \"./Room.vue?vue&type=script&lang=js&\"\nexport * from \"./Room.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Room.vue?vue&type=style&index=0&id=06df2d8e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06df2d8e\",\n  null\n  \n)\n\nexport default component.exports","export default {\n\tROOMS_EMPTY: 'No rooms',\n\tROOM_EMPTY: 'No room selected',\n\tNEW_MESSAGES: 'New Messages',\n\tMESSAGE_DELETED: 'This message was deleted',\n\tMESSAGES_EMPTY: 'No messages',\n\tCONVERSATION_STARTED: 'Conversation started on:',\n\tTYPE_MESSAGE: 'Type message',\n\tSEARCH: 'Search',\n\tIS_ONLINE: 'is online',\n\tLAST_SEEN: 'last seen ',\n\tIS_TYPING: 'is writing...'\n}\n","export const defaultThemeStyles = {\n\tlight: {\n\t\tgeneral: {\n\t\t\tcolor: '#0a0a0a',\n\t\t\tbackgroundInput: '#fff',\n\t\t\tcolorPlaceholder: '#9ca6af',\n\t\t\tcolorCaret: '#1976d2',\n\t\t\tcolorSpinner: '#333',\n\t\t\tborderStyle: '1px solid #e1e4e8',\n\t\t\tbackgroundScrollIcon: '#fff'\n\t\t},\n\n\t\tcontainer: {\n\t\t\tborder: 'none',\n\t\t\tborderRadius: '4px',\n\t\t\tboxShadow:\n\t\t\t\t'0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)'\n\t\t},\n\n\t\theader: {\n\t\t\tbackground: '#fff',\n\t\t\tcolorRoomName: '#0a0a0a',\n\t\t\tcolorRoomInfo: '#9ca6af'\n\t\t},\n\n\t\tfooter: {\n\t\t\tbackground: '#f8f9fa',\n\t\t\tborderStyleInput: '1px solid #e1e4e8',\n\t\t\tborderInputSelected: '#1976d2',\n\t\t\tbackgroundReply: 'rgba(0, 0, 0, 0.08)'\n\t\t},\n\n\t\tcontent: {\n\t\t\tbackground: '#f8f9fa'\n\t\t},\n\n\t\tsidemenu: {\n\t\t\tbackground: '#fff',\n\t\t\tbackgroundHover: '#f6f6f6',\n\t\t\tbackgroundActive: '#e5effa',\n\t\t\tcolorActive: '#1976d2',\n\t\t\tborderColorSearch: '#e1e5e8'\n\t\t},\n\n\t\tdropdown: {\n\t\t\tbackground: '#fff',\n\t\t\tbackgroundHover: '#f6f6f6'\n\t\t},\n\n\t\tmessage: {\n\t\t\tbackground: '#fff',\n\t\t\tbackgroundMe: '#ccf2cf',\n\t\t\tcolor: '#0a0a0a',\n\t\t\tcolorStarted: '#9ca6af',\n\t\t\tbackgroundDeleted: '#dadfe2',\n\t\t\tcolorDeleted: '#757e85',\n\t\t\tcolorUsername: '#9ca6af',\n\t\t\tcolorTimestamp: '#828c94',\n\t\t\tbackgroundDate: '#e5effa',\n\t\t\tcolorDate: '#505a62',\n\t\t\tbackgroundSystem: '#e5effa',\n\t\t\tcolorSystem: '#505a62',\n\t\t\tbackgroundReply: 'rgba(0, 0, 0, 0.08)',\n\t\t\tcolorReplyUsername: '#0a0a0a',\n\t\t\tcolorReply: '#6e6e6e',\n\t\t\tbackgroundImage: '#ddd',\n\t\t\tcolorNewMessages: '#1976d2',\n\t\t\tbackgroundReaction: '#eee',\n\t\t\tborderStyleReaction: '1px solid #eee',\n\t\t\tbackgroundReactionHover: '#fff',\n\t\t\tborderStyleReactionHover: '1px solid #ddd',\n\t\t\tcolorReactionCounter: '#0a0a0a',\n\t\t\tbackgroundReactionMe: '#cfecf5',\n\t\t\tborderStyleReactionMe: '1px solid #3b98b8',\n\t\t\tbackgroundReactionHoverMe: '#cfecf5',\n\t\t\tborderStyleReactionHoverMe: '1px solid #3b98b8',\n\t\t\tcolorReactionCounterMe: '#0b59b3'\n\t\t},\n\n\t\tmarkdown: {\n\t\t\tbackground: 'rgba(239, 239, 239, 0.7)',\n\t\t\tborder: 'rgba(212, 212, 212, 0.9)',\n\t\t\tcolor: '#e01e5a',\n\t\t\tcolorMulti: '#0a0a0a'\n\t\t},\n\n\t\troom: {\n\t\t\tcolorUsername: '#0a0a0a',\n\t\t\tcolorMessage: '#67717a',\n\t\t\tcolorTimestamp: '#a2aeb8',\n\t\t\tcolorStateOnline: '#4caf50',\n\t\t\tcolorStateOffline: '#9ca6af',\n\t\t\tbackgroundCounterBadge: '#0696c7',\n\t\t\tcolorCounterBadge: '#fff'\n\t\t},\n\n\t\temoji: {\n\t\t\tbackground: '#fff'\n\t\t},\n\n\t\ticons: {\n\t\t\tsearch: '#9ca6af',\n\t\t\tadd: '#1976d2',\n\t\t\ttoggle: '#0a0a0a',\n\t\t\tmenu: '#0a0a0a',\n\t\t\tclose: '#9ca6af',\n\t\t\tcloseImage: '#fff',\n\t\t\tfile: '#1976d2',\n\t\t\tpaperclip: '#1976d2',\n\t\t\tcloseOutline: '#000',\n\t\t\tsend: '#1976d2',\n\t\t\tsendDisabled: '#9ca6af',\n\t\t\temoji: '#1976d2',\n\t\t\temojiReaction: 'rgba(0, 0, 0, 0.3)',\n\t\t\tdocument: '#1976d2',\n\t\t\tpencil: '#9e9e9e',\n\t\t\tcheckmark: '#9e9e9e',\n\t\t\tcheckmarkSeen: '#0696c7',\n\t\t\teye: '#fff',\n\t\t\tdropdownMessage: '#fff',\n\t\t\tdropdownMessageBackground: 'rgba(0, 0, 0, 0.25)',\n\t\t\tdropdownScroll: '#0a0a0a',\n\t\t\tmicrophone: '#1976d2',\n\t\t\tmicrophoneOff: '#eb4034'\n\t\t}\n\t},\n\tdark: {\n\t\tgeneral: {\n\t\t\tcolor: '#fff',\n\t\t\tbackgroundInput: '#202223',\n\t\t\tcolorPlaceholder: '#596269',\n\t\t\tcolorCaret: '#1976d2',\n\t\t\tcolorSpinner: '#fff',\n\t\t\tborderStyle: 'none',\n\t\t\tbackgroundScrollIcon: '#fff'\n\t\t},\n\n\t\tcontainer: {\n\t\t\tborder: 'none',\n\t\t\tborderRadius: '4px',\n\t\t\tboxShadow:\n\t\t\t\t'0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)'\n\t\t},\n\n\t\theader: {\n\t\t\tbackground: '#181a1b',\n\t\t\tcolorRoomName: '#fff',\n\t\t\tcolorRoomInfo: '#9ca6af'\n\t\t},\n\n\t\tfooter: {\n\t\t\tbackground: '#131415',\n\t\t\tborderStyleInput: 'none',\n\t\t\tborderInputSelected: '#1976d2',\n\t\t\tbackgroundReply: '#1b1c1c'\n\t\t},\n\n\t\tcontent: {\n\t\t\tbackground: '#131415'\n\t\t},\n\n\t\tsidemenu: {\n\t\t\tbackground: '#181a1b',\n\t\t\tbackgroundHover: '#202224',\n\t\t\tbackgroundActive: '#151617',\n\t\t\tcolorActive: '#fff',\n\t\t\tborderColorSearch: '#181a1b'\n\t\t},\n\n\t\tdropdown: {\n\t\t\tbackground: '#2a2c33',\n\t\t\tbackgroundHover: '#26282e'\n\t\t},\n\n\t\tmessage: {\n\t\t\tbackground: '#22242a',\n\t\t\tbackgroundMe: '#4fb381',\n\t\t\tcolor: '#fff',\n\t\t\tcolorStarted: '#9ca6af',\n\t\t\tbackgroundDeleted: '#1b1c21',\n\t\t\tcolorDeleted: '#a2a5a8',\n\t\t\tcolorUsername: '#b3bac9',\n\t\t\tcolorTimestamp: '#ebedf2',\n\t\t\tbackgroundDate: 'rgba(0, 0, 0, 0.3)',\n\t\t\tcolorDate: '#bec5cc',\n\t\t\tbackgroundSystem: 'rgba(0, 0, 0, 0.3)',\n\t\t\tcolorSystem: '#bec5cc',\n\t\t\tbackgroundReply: 'rgba(0, 0, 0, 0.18)',\n\t\t\tcolorReplyUsername: '#fff',\n\t\t\tcolorReply: '#d6d6d6',\n\t\t\tbackgroundImage: '#ddd',\n\t\t\tcolorNewMessages: '#fff',\n\t\t\tbackgroundReaction: 'none',\n\t\t\tborderStyleReaction: 'none',\n\t\t\tbackgroundReactionHover: '#202223',\n\t\t\tborderStyleReactionHover: 'none',\n\t\t\tcolorReactionCounter: '#fff',\n\t\t\tbackgroundReactionMe: '#4e9ad1',\n\t\t\tborderStyleReactionMe: 'none',\n\t\t\tbackgroundReactionHoverMe: '#4e9ad1',\n\t\t\tborderStyleReactionHoverMe: 'none',\n\t\t\tcolorReactionCounterMe: '#fff'\n\t\t},\n\n\t\tmarkdown: {\n\t\t\tbackground: 'rgba(239, 239, 239, 0.7)',\n\t\t\tborder: 'rgba(212, 212, 212, 0.9)',\n\t\t\tcolor: '#e01e5a',\n\t\t\tcolorMulti: '#0a0a0a'\n\t\t},\n\n\t\troom: {\n\t\t\tcolorUsername: '#fff',\n\t\t\tcolorMessage: '#6c7278',\n\t\t\tcolorTimestamp: '#6c7278',\n\t\t\tcolorStateOnline: '#4caf50',\n\t\t\tcolorStateOffline: '#596269',\n\t\t\tbackgroundCounterBadge: '#1976d2',\n\t\t\tcolorCounterBadge: '#fff'\n\t\t},\n\n\t\temoji: {\n\t\t\tbackground: '#343740'\n\t\t},\n\n\t\ticons: {\n\t\t\tsearch: '#596269',\n\t\t\tadd: '#fff',\n\t\t\ttoggle: '#fff',\n\t\t\tmenu: '#fff',\n\t\t\tclose: '#9ca6af',\n\t\t\tcloseImage: '#fff',\n\t\t\tfile: '#1976d2',\n\t\t\tpaperclip: '#fff',\n\t\t\tcloseOutline: '#fff',\n\t\t\tsend: '#fff',\n\t\t\tsendDisabled: '#646a70',\n\t\t\temoji: '#fff',\n\t\t\temojiReaction: '#fff',\n\t\t\tdocument: '#1976d2',\n\t\t\tpencil: '#ebedf2',\n\t\t\tcheckmark: '#ebedf2',\n\t\t\tcheckmarkSeen: '#f0d90a',\n\t\t\teye: '#fff',\n\t\t\tdropdownMessage: '#fff',\n\t\t\tdropdownMessageBackground: 'rgba(0, 0, 0, 0.25)',\n\t\t\tdropdownScroll: '#0a0a0a',\n\t\t\tmicrophone: '#fff',\n\t\t\tmicrophoneOff: '#eb4034'\n\t\t}\n\t}\n}\n\nexport const cssThemeVars = ({\n\tgeneral,\n\tcontainer,\n\theader,\n\tfooter,\n\tsidemenu,\n\tcontent,\n\tdropdown,\n\tmessage,\n\tmarkdown,\n\troom,\n\temoji,\n\ticons\n}) => {\n\treturn {\n\t\t// general\n\t\t'--chat-color': general.color,\n\t\t'--chat-bg-color-input': general.backgroundInput,\n\t\t'--chat-color-spinner': general.colorSpinner,\n\t\t'--chat-color-placeholder': general.colorPlaceholder,\n\t\t'--chat-color-caret': general.colorCaret,\n\t\t'--chat-border-style': general.borderStyle,\n\t\t'--chat-bg-scroll-icon': general.backgroundScrollIcon,\n\n\t\t// container\n\t\t'--chat-container-border': container.border,\n\t\t'--chat-container-border-radius': container.borderRadius,\n\t\t'--chat-container-box-shadow': container.boxShadow,\n\n\t\t// header\n\t\t'--chat-header-bg-color': header.background,\n\t\t'--chat-header-color-name': header.colorRoomName,\n\t\t'--chat-header-color-info': header.colorRoomInfo,\n\n\t\t// footer\n\t\t'--chat-footer-bg-color': footer.background,\n\t\t'--chat-border-style-input': footer.borderStyleInput,\n\t\t'--chat-border-color-input-selected': footer.borderInputSelected,\n\t\t'--chat-footer-bg-color-reply': footer.backgroundReply,\n\n\t\t// content\n\t\t'--chat-content-bg-color': content.background,\n\n\t\t// sidemenu\n\t\t'--chat-sidemenu-bg-color': sidemenu.background,\n\t\t'--chat-sidemenu-bg-color-hover': sidemenu.backgroundHover,\n\t\t'--chat-sidemenu-bg-color-active': sidemenu.backgroundActive,\n\t\t'--chat-sidemenu-color-active': sidemenu.colorActive,\n\t\t'--chat-sidemenu-border-color-search': sidemenu.borderColorSearch,\n\n\t\t// dropdown\n\t\t'--chat-dropdown-bg-color': dropdown.background,\n\t\t'--chat-dropdown-bg-color-hover': dropdown.backgroundHover,\n\n\t\t// message\n\t\t'--chat-message-bg-color': message.background,\n\t\t'--chat-message-bg-color-me': message.backgroundMe,\n\t\t'--chat-message-color-started': message.colorStarted,\n\t\t'--chat-message-bg-color-deleted': message.backgroundDeleted,\n\t\t'--chat-message-color-deleted': message.colorDeleted,\n\t\t'--chat-message-color-username': message.colorUsername,\n\t\t'--chat-message-color-timestamp': message.colorTimestamp,\n\t\t'--chat-message-bg-color-date': message.backgroundDate,\n\t\t'--chat-message-color-date': message.colorDate,\n\t\t'--chat-message-bg-color-system': message.backgroundSystem,\n\t\t'--chat-message-color-system': message.colorSystem,\n\t\t'--chat-message-color': message.color,\n\t\t'--chat-message-bg-color-reply': message.backgroundReply,\n\t\t'--chat-message-color-reply-username': message.colorReplyUsername,\n\t\t'--chat-message-color-reply-content': message.colorReply,\n\t\t'--chat-message-bg-color-image': message.backgroundImage,\n\t\t'--chat-message-color-new-messages': message.colorNewMessages,\n\t\t'--chat-message-bg-color-reaction': message.backgroundReaction,\n\t\t'--chat-message-border-style-reaction': message.borderStyleReaction,\n\t\t'--chat-message-bg-color-reaction-hover': message.backgroundReactionHover,\n\t\t'--chat-message-border-style-reaction-hover':\n\t\t\tmessage.borderStyleReactionHover,\n\t\t'--chat-message-color-reaction-counter': message.colorReactionCounter,\n\t\t'--chat-message-bg-color-reaction-me': message.backgroundReactionMe,\n\t\t'--chat-message-border-style-reaction-me': message.borderStyleReactionMe,\n\t\t'--chat-message-bg-color-reaction-hover-me':\n\t\t\tmessage.backgroundReactionHoverMe,\n\t\t'--chat-message-border-style-reaction-hover-me':\n\t\t\tmessage.borderStyleReactionHoverMe,\n\t\t'--chat-message-color-reaction-counter-me': message.colorReactionCounterMe,\n\n\t\t// markdown\n\t\t'--chat-markdown-bg': markdown.background,\n\t\t'--chat-markdown-border': markdown.border,\n\t\t'--chat-markdown-color': markdown.color,\n\t\t'--chat-markdown-color-multi': markdown.colorMulti,\n\n\t\t// room\n\t\t'--chat-room-color-username': room.colorUsername,\n\t\t'--chat-room-color-message': room.colorMessage,\n\t\t'--chat-room-color-timestamp': room.colorTimestamp,\n\t\t'--chat-room-color-online': room.colorStateOnline,\n\t\t'--chat-room-color-offline': room.colorStateOffline,\n\t\t'--chat-room-bg-color-badge': room.backgroundCounterBadge,\n\t\t'--chat-room-color-badge': room.colorCounterBadge,\n\n\t\t// emoji\n\t\t'--chat-emoji-bg-color': emoji.background,\n\n\t\t// icons\n\t\t'--chat-icon-color-search': icons.search,\n\t\t'--chat-icon-color-add': icons.add,\n\t\t'--chat-icon-color-toggle': icons.toggle,\n\t\t'--chat-icon-color-menu': icons.menu,\n\t\t'--chat-icon-color-close': icons.close,\n\t\t'--chat-icon-color-close-image': icons.closeImage,\n\t\t'--chat-icon-color-file': icons.file,\n\t\t'--chat-icon-color-paperclip': icons.paperclip,\n\t\t'--chat-icon-color-close-outline': icons.closeOutline,\n\t\t'--chat-icon-color-send': icons.send,\n\t\t'--chat-icon-color-send-disabled': icons.sendDisabled,\n\t\t'--chat-icon-color-emoji': icons.emoji,\n\t\t'--chat-icon-color-emoji-reaction': icons.emojiReaction,\n\t\t'--chat-icon-color-document': icons.document,\n\t\t'--chat-icon-color-pencil': icons.pencil,\n\t\t'--chat-icon-color-checkmark': icons.checkmark,\n\t\t'--chat-icon-color-checkmark-seen': icons.checkmarkSeen,\n\t\t'--chat-icon-color-eye': icons.eye,\n\t\t'--chat-icon-color-dropdown-message': icons.dropdownMessage,\n\t\t'--chat-icon-bg-dropdown-message': icons.dropdownMessageBackground,\n\t\t'--chat-icon-color-dropdown-scroll': icons.dropdownScroll,\n\t\t'--chat-icon-color-microphone': icons.microphone,\n\t\t'--chat-icon-color-microphone-off': icons.microphoneOff\n\t}\n}\n","<template>\n\t<div class=\"vac-card-window\" :style=\"[{ height }, cssVars]\">\n\t\t<div class=\"vac-chat-container\">\n\t\t\t<rooms-list\n\t\t\t\tv-if=\"!singleRoom\"\n\t\t\t\t:current-user-id=\"currentUserId\"\n\t\t\t\t:rooms=\"orderedRooms\"\n\t\t\t\t:loading-rooms=\"loadingRooms\"\n\t\t\t\t:rooms-loaded=\"roomsLoaded\"\n\t\t\t\t:room=\"room\"\n\t\t\t\t:text-messages=\"t\"\n\t\t\t\t:show-add-room=\"showAddRoom\"\n\t\t\t\t:show-rooms-list=\"showRoomsList\"\n\t\t\t\t:text-formatting=\"textFormatting\"\n\t\t\t\t:is-mobile=\"isMobile\"\n\t\t\t\t@fetch-room=\"fetchRoom\"\n\t\t\t\t@fetch-more-rooms=\"fetchMoreRooms\"\n\t\t\t\t@loading-more-rooms=\"loadingMoreRooms = $event\"\n\t\t\t\t@add-room=\"addRoom\"\n\t\t\t>\n\t\t\t\t<template v-for=\"(index, name) in $scopedSlots\" v-slot:[name]=\"data\">\n\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\"></slot>\n\t\t\t\t</template>\n\t\t\t</rooms-list>\n\n\t\t\t<room\n\t\t\t\t:current-user-id=\"currentUserId\"\n\t\t\t\t:rooms=\"rooms\"\n\t\t\t\t:room-id=\"room.roomId || ''\"\n\t\t\t\t:load-first-room=\"loadFirstRoom\"\n\t\t\t\t:messages=\"messages\"\n\t\t\t\t:room-message=\"roomMessage\"\n\t\t\t\t:messages-loaded=\"messagesLoaded\"\n\t\t\t\t:menu-actions=\"menuActions\"\n\t\t\t\t:message-actions=\"messageActions\"\n\t\t\t\t:show-send-icon=\"showSendIcon\"\n\t\t\t\t:show-files=\"showFiles\"\n\t\t\t\t:show-audio=\"showAudio\"\n\t\t\t\t:show-emojis=\"showEmojis\"\n\t\t\t\t:show-reaction-emojis=\"showReactionEmojis\"\n\t\t\t\t:show-new-messages-divider=\"showNewMessagesDivider\"\n\t\t\t\t:show-footer=\"showFooter\"\n\t\t\t\t:text-messages=\"t\"\n\t\t\t\t:single-room=\"singleRoom\"\n\t\t\t\t:show-rooms-list=\"showRoomsList\"\n\t\t\t\t:text-formatting=\"textFormatting\"\n\t\t\t\t:is-mobile=\"isMobile\"\n\t\t\t\t:loading-rooms=\"loadingRooms\"\n\t\t\t\t:room-info=\"$listeners.roomInfo\"\n\t\t\t\t:textarea-action=\"$listeners.textareaActionHandler\"\n\t\t\t\t:accepted-files=\"acceptedFiles\"\n\t\t\t\t@toggle-rooms-list=\"toggleRoomsList\"\n\t\t\t\t@room-info=\"roomInfo\"\n\t\t\t\t@fetch-messages=\"fetchMessages\"\n\t\t\t\t@send-message=\"sendMessage\"\n\t\t\t\t@edit-message=\"editMessage\"\n\t\t\t\t@delete-message=\"deleteMessage\"\n\t\t\t\t@open-file=\"openFile\"\n\t\t\t\t@menu-action-handler=\"menuActionHandler\"\n\t\t\t\t@message-action-handler=\"messageActionHandler\"\n\t\t\t\t@send-message-reaction=\"sendMessageReaction\"\n\t\t\t\t@typing-message=\"typingMessage\"\n\t\t\t\t@textarea-action-handler=\"textareaActionHandler\"\n\t\t\t>\n\t\t\t\t<template v-for=\"(index, name) in $scopedSlots\" v-slot:[name]=\"data\">\n\t\t\t\t\t<slot :name=\"name\" v-bind=\"data\"></slot>\n\t\t\t\t</template>\n\t\t\t</room>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport RoomsList from './RoomsList'\nimport Room from './Room'\n\nimport locales from '../locales'\nimport { defaultThemeStyles, cssThemeVars } from '../themes'\nconst { roomsValid, partcipantsValid } = require('../utils/roomValidation')\n\nexport default {\n\tname: 'chat-container',\n\tcomponents: {\n\t\tRoomsList,\n\t\tRoom\n\t},\n\n\tprops: {\n\t\theight: { type: String, default: '600px' },\n\t\ttheme: { type: String, default: 'light' },\n\t\tstyles: { type: Object, default: () => ({}) },\n\t\tresponsiveBreakpoint: { type: Number, default: 900 },\n\t\tsingleRoom: { type: Boolean, default: false },\n\t\ttextMessages: { type: Object, default: null },\n\t\tcurrentUserId: { type: [String, Number], default: '' },\n\t\trooms: { type: Array, default: () => [] },\n\t\tloadingRooms: { type: Boolean, default: false },\n\t\troomsLoaded: { type: Boolean, default: false },\n\t\troomId: { type: [String, Number], default: null },\n\t\tloadFirstRoom: { type: Boolean, default: true },\n\t\tmessages: { type: Array, default: () => [] },\n\t\tmessagesLoaded: { type: Boolean, default: false },\n\t\tmenuActions: { type: Array, default: () => [] },\n\t\tmessageActions: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [\n\t\t\t\t{ name: 'replyMessage', title: 'Reply' },\n\t\t\t\t{ name: 'editMessage', title: 'Edit Message', onlyMe: true },\n\t\t\t\t{ name: 'deleteMessage', title: 'Delete Message', onlyMe: true }\n\t\t\t]\n\t\t},\n\t\tshowAddRoom: { type: Boolean, default: true },\n\t\tshowSendIcon: { type: Boolean, default: true },\n\t\tshowFiles: { type: Boolean, default: true },\n\t\tshowAudio: { type: Boolean, default: true },\n\t\tshowEmojis: { type: Boolean, default: true },\n\t\tshowReactionEmojis: { type: Boolean, default: true },\n\t\tshowNewMessagesDivider: { type: Boolean, default: true },\n\t\tshowFooter: { type: Boolean, default: true },\n\t\ttextFormatting: { type: Boolean, default: true },\n\t\tnewMessage: { type: Object, default: null },\n\t\troomMessage: { type: String, default: '' },\n\t\tacceptedFiles: { type: String, default: '*' }\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\troom: {},\n\t\t\tloadingMoreRooms: false,\n\t\t\tshowRoomsList: true,\n\t\t\tisMobile: false\n\t\t}\n\t},\n\n\twatch: {\n\t\trooms: {\n\t\t\timmediate: true,\n\t\t\thandler(newVal, oldVal) {\n\t\t\t\tif (\n\t\t\t\t\t!newVal[0] ||\n\t\t\t\t\t!newVal.find(room => room.roomId === this.room.roomId)\n\t\t\t\t) {\n\t\t\t\t\tthis.showRoomsList = true\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!this.loadingMoreRooms &&\n\t\t\t\t\tthis.loadFirstRoom &&\n\t\t\t\t\tnewVal[0] &&\n\t\t\t\t\t(!oldVal || newVal.length !== oldVal.length)\n\t\t\t\t) {\n\t\t\t\t\tif (this.roomId) {\n\t\t\t\t\t\tconst room = newVal.find(r => r.roomId === this.roomId)\n\t\t\t\t\t\tthis.fetchRoom({ room })\n\t\t\t\t\t} else if (!this.isMobile || this.singleRoom) {\n\t\t\t\t\t\tthis.fetchRoom({ room: this.orderedRooms[0] })\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.showRoomsList = true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tloadingRooms(val) {\n\t\t\tif (val) this.room = {}\n\t\t},\n\n\t\troomId: {\n\t\t\timmediate: true,\n\t\t\thandler(val) {\n\t\t\t\tif (val && !this.loadingRooms && this.rooms.length) {\n\t\t\t\t\tconst room = this.rooms.find(r => r.roomId === val)\n\t\t\t\t\tthis.fetchRoom({ room })\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\troom(val) {\n\t\t\tif (!val) return\n\n\t\t\tif (Object.entries(val).length === 0) return\n\n\t\t\tif (!roomsValid(val)) {\n\t\t\t\tthrow 'Rooms object is not valid! Must contain roomId[String, Number], roomName[String] and users[Array]'\n\t\t\t}\n\n\t\t\tval.users.forEach(user => {\n\t\t\t\tif (!partcipantsValid(user)) {\n\t\t\t\t\tthrow 'Participants object is not valid! Must contain _id[String, Number] and username[String]'\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\tnewMessage(val) {\n\t\t\tthis.$set(this.messages, val.index, val.message)\n\t\t}\n\t},\n\n\tcreated() {\n\t\tthis.updateResponsive()\n\t\twindow.addEventListener('resize', ev => {\n\t\t\tif (ev.isTrusted) this.updateResponsive()\n\t\t})\n\t},\n\n\tcomputed: {\n\t\tt() {\n\t\t\treturn {\n\t\t\t\t...locales,\n\t\t\t\t...this.textMessages\n\t\t\t}\n\t\t},\n\t\tcssVars() {\n\t\t\tconst defaultStyles = defaultThemeStyles[this.theme]\n\t\t\tconst customStyles = {}\n\n\t\t\tObject.keys(defaultStyles).map(key => {\n\t\t\t\tcustomStyles[key] = {\n\t\t\t\t\t...defaultStyles[key],\n\t\t\t\t\t...(this.styles[key] || {})\n\t\t\t\t}\n\t\t\t})\n\n\t\t\treturn cssThemeVars(customStyles)\n\t\t},\n\t\torderedRooms() {\n\t\t\treturn this.rooms.slice().sort((a, b) => {\n\t\t\t\tconst aVal = a.lastMessage || { date: 0 }\n\t\t\t\tconst bVal = b.lastMessage || { date: 0 }\n\n\t\t\t\treturn aVal.date > bVal.date ? -1 : bVal.date > aVal.date ? 1 : 0\n\t\t\t})\n\t\t}\n\t},\n\n\tmethods: {\n\t\tupdateResponsive() {\n\t\t\tthis.isMobile = window.innerWidth < this.responsiveBreakpoint\n\t\t},\n\t\ttoggleRoomsList() {\n\t\t\tthis.showRoomsList = !this.showRoomsList\n\t\t\tif (this.isMobile) this.room = {}\n\t\t\tthis.$emit('toggle-rooms-list', { opened: this.showRoomsList })\n\t\t},\n\t\tfetchRoom({ room }) {\n\t\t\tthis.room = room\n\t\t\tthis.fetchMessages({ reset: true })\n\t\t\tif (this.isMobile) this.showRoomsList = false\n\t\t},\n\t\tfetchMoreRooms() {\n\t\t\tthis.$emit('fetch-more-rooms')\n\t\t},\n\t\troomInfo() {\n\t\t\tthis.$emit('room-info', this.room)\n\t\t},\n\t\taddRoom() {\n\t\t\tthis.$emit('add-room')\n\t\t},\n\t\tfetchMessages(options) {\n\t\t\tthis.$emit('fetch-messages', { room: this.room, options })\n\t\t},\n\t\tsendMessage(message) {\n\t\t\tthis.$emit('send-message', { ...message, roomId: this.room.roomId })\n\t\t},\n\t\teditMessage(message) {\n\t\t\tthis.$emit('edit-message', { ...message, roomId: this.room.roomId })\n\t\t},\n\t\tdeleteMessage(messageId) {\n\t\t\tthis.$emit('delete-message', { messageId, roomId: this.room.roomId })\n\t\t},\n\t\topenFile({ message, action }) {\n\t\t\tthis.$emit('open-file', { message, action })\n\t\t},\n\t\tmenuActionHandler(ev) {\n\t\t\tthis.$emit('menu-action-handler', {\n\t\t\t\taction: ev,\n\t\t\t\troomId: this.room.roomId\n\t\t\t})\n\t\t},\n\t\tmessageActionHandler(ev) {\n\t\t\tthis.$emit('message-action-handler', {\n\t\t\t\t...ev,\n\t\t\t\troomId: this.room.roomId\n\t\t\t})\n\t\t},\n\t\tsendMessageReaction(messageReaction) {\n\t\t\tthis.$emit('send-message-reaction', {\n\t\t\t\t...messageReaction,\n\t\t\t\troomId: this.room.roomId\n\t\t\t})\n\t\t},\n\t\ttypingMessage(message) {\n\t\t\tthis.$emit('typing-message', {\n\t\t\t\tmessage,\n\t\t\t\troomId: this.room.roomId\n\t\t\t})\n\t\t},\n\t\ttextareaActionHandler(message) {\n\t\t\tthis.$emit('textarea-action-handler', {\n\t\t\t\tmessage,\n\t\t\t\troomId: this.room.roomId\n\t\t\t})\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n@import '../styles/index.scss';\n\n.vac-card-window {\n\twidth: 100%;\n\tdisplay: block;\n\tmax-width: 100%;\n\tbackground: var(--chat-content-bg-color);\n\tcolor: var(--chat-color);\n\toverflow-wrap: break-word;\n\tposition: relative;\n\twhite-space: normal;\n\tborder: var(--chat-container-border);\n\tborder-radius: var(--chat-container-border-radius);\n\tbox-shadow: var(--chat-container-box-shadow);\n\n\t* {\n\t\tfont-family: inherit;\n\t}\n\n\ta {\n\t\tcolor: #0d579c;\n\t}\n\n\t.vac-chat-container {\n\t\theight: 100%;\n\t\tdisplay: flex;\n\n\t\tinput {\n\t\t\tmin-width: 10px;\n\t\t}\n\n\t\ttextarea,\n\t\tinput[type='text'],\n\t\tinput[type='search'] {\n\t\t\t-webkit-appearance: none;\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../demo/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../demo/node_modules/thread-loader/dist/cjs.js!../../demo/node_modules/babel-loader/lib/index.js!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatWindow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../demo/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../demo/node_modules/thread-loader/dist/cjs.js!../../demo/node_modules/babel-loader/lib/index.js!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatWindow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatWindow.vue?vue&type=template&id=2a09f645&\"\nimport script from \"./ChatWindow.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatWindow.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatWindow.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import ChatWindow from './ChatWindow'\n\nObject.defineProperty(ChatWindow, 'install', {\n\tconfigurable: false,\n\tenumerable: false,\n\tvalue(Vue) {\n\t\tVue.component('chat-window', ChatWindow)\n\t}\n})\n\nexport default ChatWindow\n","<template>\n\t<div class=\"window-container\">\n\t\t<div class=\"chat-forms\">\n\t\t\t<form @submit.prevent=\"createRoom\" v-if=\"addNewRoom\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"Add username to create a room\"\n\t\t\t\t\tv-model=\"addRoomUsername\"\n\t\t\t\t/>\n\t\t\t\t<button type=\"submit\" :disabled=\"disableForm || !addRoomUsername\">\n\t\t\t\t\tCreate Room\n\t\t\t\t</button>\n\t\t\t\t<button class=\"button-cancel\" @click=\"addNewRoom = false\">\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</form>\n\n\t\t\t<form @submit.prevent=\"addRoomUser\" v-if=\"inviteRoomId\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"Add user to the room\"\n\t\t\t\t\tv-model=\"invitedUsername\"\n\t\t\t\t/>\n\t\t\t\t<button type=\"submit\" :disabled=\"disableForm || !invitedUsername\">\n\t\t\t\t\tAdd User\n\t\t\t\t</button>\n\t\t\t\t<button class=\"button-cancel\" @click=\"inviteRoomId = null\">\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</form>\n\n\t\t\t<form @submit.prevent=\"deleteRoomUser\" v-if=\"removeRoomId\">\n\t\t\t\t<select v-model=\"removeUserId\">\n\t\t\t\t\t<option default value=\"\">Select User</option>\n\t\t\t\t\t<option v-for=\"user in removeUsers\" :key=\"user._id\" :value=\"user._id\">\n\t\t\t\t\t\t{{ user.username }}\n\t\t\t\t\t</option>\n\t\t\t\t</select>\n\t\t\t\t<button type=\"submit\" :disabled=\"disableForm || !removeUserId\">\n\t\t\t\t\tRemove User\n\t\t\t\t</button>\n\t\t\t\t<button class=\"button-cancel\" @click=\"removeRoomId = null\">\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t</form>\n\t\t</div>\n\n\t\t<chat-window\n\t\t\theight=\"calc(100vh - 80px)\"\n\t\t\t:theme=\"theme\"\n\t\t\t:styles=\"styles\"\n\t\t\t:current-user-id=\"currentUserId\"\n\t\t\t:rooms=\"loadedRooms\"\n\t\t\t:loading-rooms=\"loadingRooms\"\n\t\t\t:messages=\"messages\"\n\t\t\t:messages-loaded=\"messagesLoaded\"\n\t\t\t:rooms-loaded=\"roomsLoaded\"\n\t\t\t:menu-actions=\"menuActions\"\n\t\t\t:room-message=\"roomMessage\"\n\t\t\t@fetch-more-rooms=\"fetchMoreRooms\"\n\t\t\t@fetch-messages=\"fetchMessages\"\n\t\t\t@send-message=\"sendMessage\"\n\t\t\t@edit-message=\"editMessage\"\n\t\t\t@delete-message=\"deleteMessage\"\n\t\t\t@open-file=\"openFile\"\n\t\t\t@add-room=\"addRoom\"\n\t\t\t@menu-action-handler=\"menuActionHandler\"\n\t\t\t@message-action-handler=\"messageActionHandler\"\n\t\t\t@send-message-reaction=\"sendMessageReaction\"\n\t\t\t@typing-message=\"typingMessage\"\n\t\t>\n\t\t</chat-window>\n\t</div>\n</template>\n\n<script>\nimport {\n\tfirebase,\n\troomsRef,\n\tmessagesRef,\n\tusersRef,\n\tfilesRef,\n\tdeleteDbField\n} from '@/firestore'\nimport { parseTimestamp, isSameDay } from '@/utils/dates'\nimport ChatWindow from './../../src/ChatWindow'\n// import ChatWindow from 'vue-advanced-chat'\n// import 'vue-advanced-chat/dist/vue-advanced-chat.css'\n\nexport default {\n\tcomponents: {\n\t\tChatWindow\n\t},\n\n\tprops: ['currentUserId', 'theme'],\n\n\tdata() {\n\t\treturn {\n\t\t\troomsPerPage: 15,\n\t\t\trooms: [],\n\t\t\tstartRooms: null,\n\t\t\tendRooms: null,\n\t\t\troomsLoaded: false,\n\t\t\tloadingRooms: true,\n\t\t\tallUsers: [],\n\t\t\tloadingLastMessageByRoom: 0,\n\t\t\troomsLoadedCount: false,\n\t\t\tselectedRoom: null,\n\t\t\tmessagesPerPage: 20,\n\t\t\tmessages: [],\n\t\t\tmessagesLoaded: false,\n\t\t\troomMessage: '',\n\t\t\tstartMessages: null,\n\t\t\tendMessages: null,\n\t\t\troomsListeners: [],\n\t\t\tlisteners: [],\n\t\t\ttypingMessageCache: '',\n\t\t\tdisableForm: false,\n\t\t\taddNewRoom: null,\n\t\t\taddRoomUsername: '',\n\t\t\tinviteRoomId: null,\n\t\t\tinvitedUsername: '',\n\t\t\tremoveRoomId: null,\n\t\t\tremoveUserId: '',\n\t\t\tremoveUsers: [],\n\t\t\tmenuActions: [\n\t\t\t\t{ name: 'inviteUser', title: 'Invite User' },\n\t\t\t\t{ name: 'removeUser', title: 'Remove User' },\n\t\t\t\t{ name: 'deleteRoom', title: 'Delete Room' }\n\t\t\t],\n\t\t\tstyles: { container: { borderRadius: '4px' } }\n\t\t\t// ,dbRequestCount: 0\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.fetchRooms()\n\t\tthis.updateUserOnlineStatus()\n\t},\n\n\tdestroyed() {\n\t\tthis.resetRooms()\n\t},\n\n\tcomputed: {\n\t\tloadedRooms() {\n\t\t\treturn this.rooms.slice(0, this.roomsLoadedCount)\n\t\t}\n\t},\n\n\tmethods: {\n\t\tresetRooms() {\n\t\t\tthis.loadingRooms = true\n\t\t\tthis.loadingLastMessageByRoom = 0\n\t\t\tthis.roomsLoadedCount = 0\n\t\t\tthis.rooms = []\n\t\t\tthis.roomsLoaded = true\n\t\t\tthis.startRooms = null\n\t\t\tthis.endRooms = null\n\t\t\tthis.roomsListeners.forEach(listener => listener())\n\t\t\tthis.roomsListeners = []\n\t\t\tthis.resetMessages()\n\t\t},\n\n\t\tresetMessages() {\n\t\t\tthis.messages = []\n\t\t\tthis.messagesLoaded = false\n\t\t\tthis.startMessages = null\n\t\t\tthis.endMessages = null\n\t\t\tthis.listeners.forEach(listener => listener())\n\t\t\tthis.listeners = []\n\t\t},\n\n\t\tfetchRooms() {\n\t\t\tthis.resetRooms()\n\t\t\tthis.fetchMoreRooms()\n\t\t},\n\n\t\tasync fetchMoreRooms() {\n\t\t\tif (this.endRooms && !this.startRooms) return (this.roomsLoaded = true)\n\n\t\t\tlet query = roomsRef\n\t\t\t\t.where('users', 'array-contains', this.currentUserId)\n\t\t\t\t.orderBy('lastUpdated', 'desc')\n\t\t\t\t.limit(this.roomsPerPage)\n\n\t\t\tif (this.startRooms) query = query.startAfter(this.startRooms)\n\n\t\t\tconst rooms = await query.get()\n\t\t\t// this.incrementDbCounter('Fetch Rooms', rooms.size)\n\n\t\t\tthis.roomsLoaded = rooms.empty || rooms.size < this.roomsPerPage\n\n\t\t\tif (this.startRooms) this.endRooms = this.startRooms\n\t\t\tthis.startRooms = rooms.docs[rooms.docs.length - 1]\n\n\t\t\tconst roomUserIds = []\n\t\t\trooms.forEach(room => {\n\t\t\t\troom.data().users.forEach(userId => {\n\t\t\t\t\tconst foundUser = this.allUsers.find(user => user._id === userId)\n\t\t\t\t\tif (!foundUser && roomUserIds.indexOf(userId) === -1) {\n\t\t\t\t\t\troomUserIds.push(userId)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\n\t\t\t// this.incrementDbCounter('Fetch Room Users', roomUserIds.length)\n\t\t\tconst rawUsers = []\n\t\t\troomUserIds.forEach(userId => {\n\t\t\t\tconst promise = usersRef\n\t\t\t\t\t.doc(userId)\n\t\t\t\t\t.get()\n\t\t\t\t\t.then(user => user.data())\n\n\t\t\t\trawUsers.push(promise)\n\t\t\t})\n\n\t\t\tthis.allUsers = [...this.allUsers, ...(await Promise.all(rawUsers))]\n\n\t\t\tconst roomList = {}\n\t\t\trooms.forEach(room => {\n\t\t\t\troomList[room.id] = { ...room.data(), users: [] }\n\n\t\t\t\troom.data().users.forEach(userId => {\n\t\t\t\t\tconst foundUser = this.allUsers.find(user => user._id === userId)\n\t\t\t\t\tif (foundUser) roomList[room.id].users.push(foundUser)\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tconst formattedRooms = []\n\n\t\t\tObject.keys(roomList).forEach(key => {\n\t\t\t\tconst room = roomList[key]\n\n\t\t\t\tconst roomContacts = room.users.filter(\n\t\t\t\t\tuser => user._id !== this.currentUserId\n\t\t\t\t)\n\n\t\t\t\troom.roomName =\n\t\t\t\t\troomContacts.map(user => user.username).join(', ') || 'Myself'\n\n\t\t\t\tconst roomAvatar =\n\t\t\t\t\troomContacts.length === 1 && roomContacts[0].avatar\n\t\t\t\t\t\t? roomContacts[0].avatar\n\t\t\t\t\t\t: require('@/assets/logo.png')\n\n\t\t\t\tformattedRooms.push({\n\t\t\t\t\t...{\n\t\t\t\t\t\troomId: key,\n\t\t\t\t\t\tavatar: roomAvatar,\n\t\t\t\t\t\t...room\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tthis.rooms = this.rooms.concat(formattedRooms)\n\t\t\tformattedRooms.map(room => this.listenLastMessage(room))\n\n\t\t\tif (!this.rooms.length) {\n\t\t\t\tthis.loadingRooms = false\n\t\t\t\tthis.roomsLoadedCount = 0\n\t\t\t}\n\n\t\t\tthis.listenUsersOnlineStatus(formattedRooms)\n\t\t\tthis.listenRoomsTypingUsers(query)\n\t\t\t// setTimeout(() => console.log('TOTAL', this.dbRequestCount), 2000)\n\t\t},\n\n\t\tlistenLastMessage(room) {\n\t\t\tconst listener = messagesRef(room.roomId)\n\t\t\t\t.orderBy('timestamp', 'desc')\n\t\t\t\t.limit(1)\n\t\t\t\t.onSnapshot(messages => {\n\t\t\t\t\t// this.incrementDbCounter('Listen Last Room Message', messages.size)\n\t\t\t\t\tmessages.forEach(message => {\n\t\t\t\t\t\tconst lastMessage = this.formatLastMessage(message.data())\n\t\t\t\t\t\tconst roomIndex = this.rooms.findIndex(\n\t\t\t\t\t\t\tr => room.roomId === r.roomId\n\t\t\t\t\t\t)\n\t\t\t\t\t\tthis.rooms[roomIndex].lastMessage = lastMessage\n\t\t\t\t\t\tthis.rooms = [...this.rooms]\n\t\t\t\t\t})\n\t\t\t\t\tif (this.loadingLastMessageByRoom < this.rooms.length) {\n\t\t\t\t\t\tthis.loadingLastMessageByRoom++\n\n\t\t\t\t\t\tif (this.loadingLastMessageByRoom === this.rooms.length) {\n\t\t\t\t\t\t\tthis.loadingRooms = false\n\t\t\t\t\t\t\tthis.roomsLoadedCount = this.rooms.length\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\tthis.roomsListeners.push(listener)\n\t\t},\n\n\t\tformatLastMessage(message) {\n\t\t\tif (!message.timestamp) return\n\t\t\tconst date = new Date(message.timestamp.seconds * 1000)\n\t\t\tconst timestampFormat = isSameDay(date, new Date()) ? 'HH:mm' : 'DD/MM/YY'\n\n\t\t\tlet timestamp = parseTimestamp(message.timestamp, timestampFormat)\n\t\t\tif (timestampFormat === 'HH:mm') timestamp = `Today, ${timestamp}`\n\n\t\t\tlet content = message.content\n\t\t\tif (message.file)\n\t\t\t\tcontent = `${message.file.name}.${message.file.extension ||\n\t\t\t\t\tmessage.file.type}`\n\n\t\t\treturn {\n\t\t\t\t...message,\n\t\t\t\t...{\n\t\t\t\t\tcontent,\n\t\t\t\t\ttimestamp,\n\t\t\t\t\tdate: message.timestamp.seconds,\n\t\t\t\t\tseen: message.sender_id === this.currentUserId ? message.seen : null,\n\t\t\t\t\tnew:\n\t\t\t\t\t\tmessage.sender_id !== this.currentUserId &&\n\t\t\t\t\t\t(!message.seen || !message.seen[this.currentUserId])\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tfetchMessages({ room, options = {} }) {\n\t\t\tif (options.reset) this.resetMessages()\n\n\t\t\tif (this.endMessages && !this.startMessages)\n\t\t\t\treturn (this.messagesLoaded = true)\n\n\t\t\tlet ref = messagesRef(room.roomId)\n\n\t\t\tlet query = ref.orderBy('timestamp', 'desc').limit(this.messagesPerPage)\n\n\t\t\tif (this.startMessages) query = query.startAfter(this.startMessages)\n\n\t\t\tthis.selectedRoom = room.roomId\n\n\t\t\tquery.get().then(messages => {\n\t\t\t\t// this.incrementDbCounter('Fetch Room Messages', messages.size)\n\t\t\t\tif (this.selectedRoom !== room.roomId) return\n\n\t\t\t\tif (messages.empty) this.messagesLoaded = true\n\n\t\t\t\tif (this.startMessages) this.endMessages = this.startMessages\n\t\t\t\tthis.startMessages = messages.docs[messages.docs.length - 1]\n\n\t\t\t\tlet listenerQuery = ref.orderBy('timestamp')\n\n\t\t\t\tif (this.startMessages)\n\t\t\t\t\tlistenerQuery = listenerQuery.startAfter(this.startMessages)\n\t\t\t\tif (this.endMessages)\n\t\t\t\t\tlistenerQuery = listenerQuery.endAt(this.endMessages)\n\n\t\t\t\tif (options.reset) this.messages = []\n\n\t\t\t\tmessages.forEach(message => {\n\t\t\t\t\tconst formattedMessage = this.formatMessage(room, message)\n\t\t\t\t\tthis.messages.unshift(formattedMessage)\n\t\t\t\t})\n\n\t\t\t\tconst listener = listenerQuery.onSnapshot(snapshots => {\n\t\t\t\t\t// this.incrementDbCounter('Listen Room Messages', snapshots.size)\n\t\t\t\t\tthis.listenMessages(snapshots, room)\n\t\t\t\t})\n\t\t\t\tthis.listeners.push(listener)\n\t\t\t})\n\t\t},\n\n\t\tlistenMessages(messages, room) {\n\t\t\tmessages.forEach(message => {\n\t\t\t\tconst formattedMessage = this.formatMessage(room, message)\n\t\t\t\tconst messageIndex = this.messages.findIndex(m => m._id === message.id)\n\n\t\t\t\tif (messageIndex === -1) {\n\t\t\t\t\tthis.messages = this.messages.concat([formattedMessage])\n\t\t\t\t} else {\n\t\t\t\t\tthis.$set(this.messages, messageIndex, formattedMessage)\n\t\t\t\t}\n\n\t\t\t\tthis.markMessagesSeen(room, message)\n\t\t\t})\n\t\t},\n\n\t\tmarkMessagesSeen(room, message) {\n\t\t\tif (\n\t\t\t\tmessage.data().sender_id !== this.currentUserId &&\n\t\t\t\t(!message.data().seen || !message.data().seen[this.currentUserId])\n\t\t\t) {\n\t\t\t\tmessagesRef(room.roomId)\n\t\t\t\t\t.doc(message.id)\n\t\t\t\t\t.update({\n\t\t\t\t\t\t[`seen.${this.currentUserId}`]: new Date()\n\t\t\t\t\t})\n\t\t\t}\n\t\t},\n\n\t\tformatMessage(room, message) {\n\t\t\tconst senderUser = room.users.find(\n\t\t\t\tuser => message.data().sender_id === user._id\n\t\t\t)\n\n\t\t\tconst { sender_id, timestamp } = message.data()\n\n\t\t\treturn {\n\t\t\t\t...message.data(),\n\t\t\t\t...{\n\t\t\t\t\tsender_id,\n\t\t\t\t\t_id: message.id,\n\t\t\t\t\tseconds: timestamp.seconds,\n\t\t\t\t\ttimestamp: parseTimestamp(timestamp, 'HH:mm'),\n\t\t\t\t\tdate: parseTimestamp(timestamp, 'DD MMMM YYYY'),\n\t\t\t\t\tusername: senderUser ? senderUser.username : null,\n\t\t\t\t\tdistributed: true\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tasync sendMessage({ content, roomId, file, replyMessage }) {\n\t\t\tconst message = {\n\t\t\t\tsender_id: this.currentUserId,\n\t\t\t\tcontent,\n\t\t\t\ttimestamp: new Date()\n\t\t\t}\n\n\t\t\tif (file) {\n\t\t\t\tmessage.file = {\n\t\t\t\t\tname: file.name,\n\t\t\t\t\tsize: file.size,\n\t\t\t\t\ttype: file.type,\n\t\t\t\t\textension: file.extension,\n\t\t\t\t\turl: file.localUrl\n\t\t\t\t}\n\t\t\t\tif (file.audio) {\n\t\t\t\t\tmessage.file.audio = true\n\t\t\t\t\tmessage.file.duration = file.duration\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (replyMessage) {\n\t\t\t\tmessage.replyMessage = {\n\t\t\t\t\t_id: replyMessage._id,\n\t\t\t\t\tcontent: replyMessage.content,\n\t\t\t\t\tsender_id: replyMessage.sender_id\n\t\t\t\t}\n\n\t\t\t\tif (replyMessage.file) {\n\t\t\t\t\tmessage.replyMessage.file = replyMessage.file\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst { id } = await messagesRef(roomId).add(message)\n\n\t\t\tif (file) this.uploadFile({ file, messageId: id, roomId })\n\n\t\t\troomsRef.doc(roomId).update({ lastUpdated: new Date() })\n\t\t},\n\n\t\topenFile({ message, action }) {\n\t\t\twindow.open(message.file.url, '_blank')\n\t\t},\n\n\t\tasync editMessage({ messageId, newContent, roomId, file }) {\n\t\t\tconst newMessage = { edited: new Date() }\n\t\t\tnewMessage.content = newContent\n\n\t\t\tif (file) {\n\t\t\t\tnewMessage.file = {\n\t\t\t\t\tname: file.name,\n\t\t\t\t\tsize: file.size,\n\t\t\t\t\ttype: file.type,\n\t\t\t\t\textension: file.extension,\n\t\t\t\t\turl: file.url || file.localUrl\n\t\t\t\t}\n\t\t\t\tif (file.audio) {\n\t\t\t\t\tnewMessage.file.audio = true\n\t\t\t\t\tnewMessage.file.duration = file.duration\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewMessage.file = deleteDbField\n\t\t\t}\n\n\t\t\tawait messagesRef(roomId)\n\t\t\t\t.doc(messageId)\n\t\t\t\t.update(newMessage)\n\n\t\t\tif (file) this.uploadFile({ file, messageId, roomId })\n\t\t},\n\n\t\tasync deleteMessage({ messageId, roomId }) {\n\t\t\tawait messagesRef(roomId)\n\t\t\t\t.doc(messageId)\n\t\t\t\t.update({ deleted: new Date() })\n\t\t},\n\n\t\tasync uploadFile({ file, messageId, roomId }) {\n\t\t\tconst uploadFileRef = filesRef\n\t\t\t\t.child(this.currentUserId)\n\t\t\t\t.child(messageId)\n\t\t\t\t.child(`${file.name}.${file.extension || file.type}`)\n\n\t\t\tawait uploadFileRef.put(file.blob, { contentType: file.type })\n\t\t\tconst url = await uploadFileRef.getDownloadURL()\n\n\t\t\tawait messagesRef(roomId)\n\t\t\t\t.doc(messageId)\n\t\t\t\t.update({\n\t\t\t\t\t['file.url']: url\n\t\t\t\t})\n\t\t},\n\n\t\tmenuActionHandler({ action, roomId }) {\n\t\t\tswitch (action.name) {\n\t\t\t\tcase 'inviteUser':\n\t\t\t\t\treturn this.inviteUser(roomId)\n\t\t\t\tcase 'removeUser':\n\t\t\t\t\treturn this.removeUser(roomId)\n\t\t\t\tcase 'deleteRoom':\n\t\t\t\t\treturn this.deleteRoom(roomId)\n\t\t\t}\n\t\t},\n\n\t\tmessageActionHandler() {\n\t\t\t// do something\n\t\t},\n\n\t\ttextareaActionHandler({ message, roomId }) {\n\t\t\tthis.roomMessage = 'Implement your own action!'\n\t\t},\n\n\t\tasync sendMessageReaction({ reaction, remove, messageId, roomId }) {\n\t\t\tconst dbAction = remove\n\t\t\t\t? firebase.firestore.FieldValue.arrayRemove(this.currentUserId)\n\t\t\t\t: firebase.firestore.FieldValue.arrayUnion(this.currentUserId)\n\n\t\t\tawait messagesRef(roomId)\n\t\t\t\t.doc(messageId)\n\t\t\t\t.update({\n\t\t\t\t\t[`reactions.${reaction.name}`]: dbAction\n\t\t\t\t})\n\t\t},\n\n\t\ttypingMessage({ message, roomId }) {\n\t\t\tif (message?.length > 1) {\n\t\t\t\treturn (this.typingMessageCache = message)\n\t\t\t}\n\n\t\t\tif (message?.length === 1 && this.typingMessageCache) {\n\t\t\t\treturn (this.typingMessageCache = message)\n\t\t\t}\n\n\t\t\tthis.typingMessageCache = message\n\n\t\t\tconst dbAction = message\n\t\t\t\t? firebase.firestore.FieldValue.arrayUnion(this.currentUserId)\n\t\t\t\t: firebase.firestore.FieldValue.arrayRemove(this.currentUserId)\n\n\t\t\troomsRef.doc(roomId).update({\n\t\t\t\ttypingUsers: dbAction\n\t\t\t})\n\t\t},\n\n\t\tasync listenRoomsTypingUsers(query) {\n\t\t\tconst listener = query.onSnapshot(rooms => {\n\t\t\t\t// this.incrementDbCounter('Listen Rooms Typing Users', rooms.size)\n\t\t\t\trooms.forEach(room => {\n\t\t\t\t\tconst foundRoom = this.rooms.find(r => r.roomId === room.id)\n\t\t\t\t\tif (foundRoom) foundRoom.typingUsers = room.data().typingUsers\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.roomsListeners.push(listener)\n\t\t},\n\n\t\tupdateUserOnlineStatus() {\n\t\t\tconst userStatusRef = firebase\n\t\t\t\t.database()\n\t\t\t\t.ref('/status/' + this.currentUserId)\n\n\t\t\tconst isOfflineData = {\n\t\t\t\tstate: 'offline',\n\t\t\t\tlast_changed: firebase.database.ServerValue.TIMESTAMP\n\t\t\t}\n\n\t\t\tconst isOnlineData = {\n\t\t\t\tstate: 'online',\n\t\t\t\tlast_changed: firebase.database.ServerValue.TIMESTAMP\n\t\t\t}\n\n\t\t\tfirebase\n\t\t\t\t.database()\n\t\t\t\t.ref('.info/connected')\n\t\t\t\t.on('value', snapshot => {\n\t\t\t\t\tif (snapshot.val() == false) return\n\n\t\t\t\t\tuserStatusRef\n\t\t\t\t\t\t.onDisconnect()\n\t\t\t\t\t\t.set(isOfflineData)\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tuserStatusRef.set(isOnlineData)\n\t\t\t\t\t\t})\n\t\t\t\t})\n\t\t},\n\n\t\tlistenUsersOnlineStatus(rooms) {\n\t\t\trooms.map(room => {\n\t\t\t\troom.users.map(user => {\n\t\t\t\t\tconst listener = firebase\n\t\t\t\t\t\t.database()\n\t\t\t\t\t\t.ref('/status/' + user._id)\n\t\t\t\t\t\t.on('value', snapshot => {\n\t\t\t\t\t\t\tif (!snapshot || !snapshot.val()) return\n\n\t\t\t\t\t\t\tconst timestampFormat = isSameDay(\n\t\t\t\t\t\t\t\tnew Date(snapshot.val().last_changed),\n\t\t\t\t\t\t\t\tnew Date()\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t? 'HH:mm'\n\t\t\t\t\t\t\t\t: 'DD MMMM, HH:mm'\n\n\t\t\t\t\t\t\tconst timestamp = parseTimestamp(\n\t\t\t\t\t\t\t\tnew Date(snapshot.val().last_changed),\n\t\t\t\t\t\t\t\ttimestampFormat\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\tconst last_changed =\n\t\t\t\t\t\t\t\ttimestampFormat === 'HH:mm' ? `today, ${timestamp}` : timestamp\n\n\t\t\t\t\t\t\tuser.status = { ...snapshot.val(), last_changed }\n\n\t\t\t\t\t\t\tconst roomIndex = this.rooms.findIndex(\n\t\t\t\t\t\t\t\tr => room.roomId === r.roomId\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\tthis.$set(this.rooms, roomIndex, room)\n\t\t\t\t\t\t})\n\t\t\t\t\tthis.roomsListeners.push(listener)\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\n\t\taddRoom() {\n\t\t\tthis.resetForms()\n\t\t\tthis.addNewRoom = true\n\t\t},\n\n\t\tasync createRoom() {\n\t\t\tthis.disableForm = true\n\n\t\t\tconst { id } = await usersRef.add({ username: this.addRoomUsername })\n\t\t\tawait usersRef.doc(id).update({ _id: id })\n\t\t\tawait roomsRef.add({\n\t\t\t\tusers: [id, this.currentUserId],\n\t\t\t\tlastUpdated: new Date()\n\t\t\t})\n\n\t\t\tthis.addNewRoom = false\n\t\t\tthis.addRoomUsername = ''\n\t\t\tthis.fetchRooms()\n\t\t},\n\n\t\tinviteUser(roomId) {\n\t\t\tthis.resetForms()\n\t\t\tthis.inviteRoomId = roomId\n\t\t},\n\n\t\tasync addRoomUser() {\n\t\t\tthis.disableForm = true\n\n\t\t\tconst { id } = await usersRef.add({ username: this.invitedUsername })\n\t\t\tawait usersRef.doc(id).update({ _id: id })\n\n\t\t\tawait roomsRef\n\t\t\t\t.doc(this.inviteRoomId)\n\t\t\t\t.update({ users: firebase.firestore.FieldValue.arrayUnion(id) })\n\n\t\t\tthis.inviteRoomId = null\n\t\t\tthis.invitedUsername = ''\n\t\t\tthis.fetchRooms()\n\t\t},\n\n\t\tremoveUser(roomId) {\n\t\t\tthis.resetForms()\n\t\t\tthis.removeRoomId = roomId\n\t\t\tthis.removeUsers = this.rooms.find(room => room.roomId === roomId).users\n\t\t},\n\n\t\tasync deleteRoomUser() {\n\t\t\tthis.disableForm = true\n\n\t\t\tawait roomsRef.doc(this.removeRoomId).update({\n\t\t\t\tusers: firebase.firestore.FieldValue.arrayRemove(this.removeUserId)\n\t\t\t})\n\n\t\t\tthis.removeRoomId = null\n\t\t\tthis.removeUserId = ''\n\t\t\tthis.fetchRooms()\n\t\t},\n\n\t\tasync deleteRoom(roomId) {\n\t\t\tconst room = this.rooms.find(r => r.roomId === roomId)\n\t\t\tif (\n\t\t\t\troom.users.find(user => user._id === 'SGmFnBZB4xxMv9V4CVlW') ||\n\t\t\t\troom.users.find(user => user._id === '6jMsIXUrBHBj7o2cRlau')\n\t\t\t) {\n\t\t\t\treturn alert('Nope, for demo purposes you cannot delete this room')\n\t\t\t}\n\n\t\t\tconst ref = messagesRef(roomId)\n\n\t\t\tref.get().then(res => {\n\t\t\t\tif (res.empty) return\n\t\t\t\tres.docs.map(doc => ref.doc(doc.id).delete())\n\t\t\t})\n\n\t\t\tawait roomsRef.doc(roomId).delete()\n\n\t\t\tthis.fetchRooms()\n\t\t},\n\n\t\tresetForms() {\n\t\t\tthis.disableForm = false\n\t\t\tthis.addNewRoom = null\n\t\t\tthis.addRoomUsername = ''\n\t\t\tthis.inviteRoomId = null\n\t\t\tthis.invitedUsername = ''\n\t\t\tthis.removeRoomId = null\n\t\t\tthis.removeUserId = ''\n\t\t}\n\n\t\t// ,incrementDbCounter(type, size) {\n\t\t// \tsize = size || 1\n\t\t// \tthis.dbRequestCount += size\n\t\t// \tconsole.log(type, size)\n\t\t// }\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.window-container {\n\twidth: 100%;\n}\n\n.chat-forms {\n\tpadding-bottom: 20px;\n\n\tform {\n\t\tpadding-top: 20px;\n\t}\n\n\tinput {\n\t\tpadding: 5px;\n\t\twidth: 180px;\n\t\theight: 21px;\n\t\tborder-radius: 4px;\n\t\tborder: 1px solid #d2d6da;\n\t\toutline: none;\n\t\tfont-size: 14px;\n\t\tvertical-align: middle;\n\n\t\t&::placeholder {\n\t\t\tcolor: #9ca6af;\n\t\t}\n\t}\n\n\tbutton {\n\t\tbackground: #1976d2;\n\t\tcolor: #fff;\n\t\toutline: none;\n\t\tcursor: pointer;\n\t\tborder-radius: 4px;\n\t\tpadding: 8px 12px;\n\t\tmargin-left: 10px;\n\t\tborder: none;\n\t\tfont-size: 14px;\n\t\ttransition: 0.3s;\n\t\tvertical-align: middle;\n\n\t\t&:hover {\n\t\t\topacity: 0.8;\n\t\t}\n\n\t\t&:active {\n\t\t\topacity: 0.6;\n\t\t}\n\n\t\t&:disabled {\n\t\t\tcursor: initial;\n\t\t\tbackground: #c6c9cc;\n\t\t\topacity: 0.6;\n\t\t}\n\t}\n\n\t.button-cancel {\n\t\tcolor: #a8aeb3;\n\t\tbackground: none;\n\t\tmargin-left: 5px;\n\t}\n\n\tselect {\n\t\tvertical-align: middle;\n\t\theight: 33px;\n\t\twidth: 120px;\n\t\tfont-size: 13px;\n\t}\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatContainer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatContainer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatContainer.vue?vue&type=template&id=175c4043&scoped=true&\"\nimport script from \"./ChatContainer.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatContainer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatContainer.vue?vue&type=style&index=0&id=175c4043&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"175c4043\",\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div>\n\t\t<div class=\"app-container\">\n\t\t\t<!-- <div>\n\t\t\t\t<button @click=\"resetData\">Clear Data</button>\n\t\t\t\t<button @click=\"addData\" :disabled=\"updatingData\">Add Data</button>\n\t\t\t</div> -->\n\t\t\t<span class=\"user-logged\">Logged as</span>\n\t\t\t<select v-model=\"currentUserId\">\n\t\t\t\t<option v-for=\"user in users\" :key=\"user._id\" :value=\"user._id\">\n\t\t\t\t\t{{ user.username }}\n\t\t\t\t</option>\n\t\t\t</select>\n\n\t\t\t<div class=\"button-theme\">\n\t\t\t\t<button @click=\"theme = 'light'\" class=\"button-light\">Light</button>\n\t\t\t\t<button @click=\"theme = 'dark'\" class=\"button-dark\">Dark</button>\n\t\t\t</div>\n\n\t\t\t<chat-container\n\t\t\t\t:currentUserId=\"currentUserId\"\n\t\t\t\t:theme=\"theme\"\n\t\t\t\tv-if=\"showChat\"\n\t\t\t/>\n\n\t\t\t<!-- <div class=\"version-container\">\n\t\t\t\tv1.0.0\n\t\t\t</div> -->\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { roomsRef, usersRef } from '@/firestore'\nimport ChatContainer from './ChatContainer'\n\nexport default {\n\tcomponents: {\n\t\tChatContainer\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\ttheme: 'light',\n\t\t\tshowChat: true,\n\t\t\tusers: [\n\t\t\t\t{\n\t\t\t\t\t_id: '6R0MijpK6M4AIrwaaCY2',\n\t\t\t\t\tusername: 'Luke',\n\t\t\t\t\tavatar: 'https://66.media.tumblr.com/avatar_c6a8eae4303e_512.pnj'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: 'SGmFnBZB4xxMv9V4CVlW',\n\t\t\t\t\tusername: 'Leia',\n\t\t\t\t\tavatar: 'https://avatarfiles.alphacoders.com/184/thumb-184913.jpg'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: '6jMsIXUrBHBj7o2cRlau',\n\t\t\t\t\tusername: 'Yoda',\n\t\t\t\t\tavatar:\n\t\t\t\t\t\t'https://vignette.wikia.nocookie.net/teamavatarone/images/4/45/Yoda.jpg/revision/latest?cb=20130224160049'\n\t\t\t\t}\n\t\t\t],\n\t\t\tcurrentUserId: '6R0MijpK6M4AIrwaaCY2',\n\t\t\tupdatingData: false\n\t\t}\n\t},\n\n\twatch: {\n\t\tcurrentUserId() {\n\t\t\tthis.showChat = false\n\t\t\tsetTimeout(() => (this.showChat = true), 150)\n\t\t}\n\t},\n\n\tmethods: {\n\t\tresetData() {\n\t\t\troomsRef.get().then(val => {\n\t\t\t\tval.forEach(async val => {\n\t\t\t\t\tconst ref = roomsRef.doc(val.id).collection('messages')\n\n\t\t\t\t\tawait ref.get().then(res => {\n\t\t\t\t\t\tif (res.empty) return\n\t\t\t\t\t\tres.docs.map(doc => ref.doc(doc.id).delete())\n\t\t\t\t\t})\n\n\t\t\t\t\troomsRef.doc(val.id).delete()\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tusersRef.get().then(val => {\n\t\t\t\tval.forEach(val => {\n\t\t\t\t\tusersRef.doc(val.id).delete()\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tasync addData() {\n\t\t\tthis.updatingData = true\n\n\t\t\tconst user1 = this.users[0]\n\t\t\tawait usersRef.doc(user1._id).set(user1)\n\n\t\t\tconst user2 = this.users[1]\n\t\t\tawait usersRef.doc(user2._id).set(user2)\n\n\t\t\tconst user3 = this.users[2]\n\t\t\tawait usersRef.doc(user3._id).set(user3)\n\n\t\t\tawait roomsRef.add({\n\t\t\t\tusers: [user1._id, user2._id],\n\t\t\t\tlastUpdated: new Date()\n\t\t\t})\n\t\t\tawait roomsRef.add({\n\t\t\t\tusers: [user1._id, user3._id],\n\t\t\t\tlastUpdated: new Date()\n\t\t\t})\n\t\t\tawait roomsRef.add({\n\t\t\t\tusers: [user2._id, user3._id],\n\t\t\t\tlastUpdated: new Date()\n\t\t\t})\n\t\t\tawait roomsRef.add({\n\t\t\t\tusers: [user1._id, user2._id, user3._id],\n\t\t\t\tlastUpdated: new Date()\n\t\t\t})\n\n\t\t\tthis.updatingData = false\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\nbody {\n\tbackground: #fafafa;\n}\n\n.app-container {\n\tfont-family: 'Quicksand', sans-serif;\n\tpadding: 10px 20px 20px;\n\n\t@media only screen and (max-width: 768px) {\n\t\tpadding: 0;\n\t}\n}\n\nselect {\n\theight: 20px;\n\toutline: none;\n\tborder: 1px solid #e0e2e4;\n\tbackground: #fff;\n}\n\n.user-logged {\n\tfont-size: 12px;\n\tmargin-right: 5px;\n}\n\n.button-theme {\n\tfloat: right;\n\n\t.button-light {\n\t\tbackground: #fff;\n\t\tborder: 1px solid #46484e;\n\t\tcolor: #46484e;\n\t}\n\n\t.button-dark {\n\t\tbackground: #1c1d21;\n\t\tborder: 1px solid #1c1d21;\n\t}\n\n\tbutton {\n\t\tcolor: #fff;\n\t\toutline: none;\n\t\tcursor: pointer;\n\t\tborder-radius: 4px;\n\t\tpadding: 6px 12px;\n\t\tmargin-left: 10px;\n\t\tborder: none;\n\t\tfont-size: 14px;\n\t\ttransition: 0.3s;\n\t\tvertical-align: middle;\n\n\t\t&:hover {\n\t\t\topacity: 0.8;\n\t\t}\n\n\t\t&:active {\n\t\t\topacity: 0.6;\n\t\t}\n\n\t\t@media only screen and (max-width: 768px) {\n\t\t\tpadding: 3px 6px;\n\t\t\tfont-size: 13px;\n\t\t}\n\t}\n}\n\n.version-container {\n\tpadding-top: 20px;\n\ttext-align: right;\n\tfont-size: 14px;\n\tcolor: grey;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=13e3bf5e&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n\trender: h => h(App)\n}).$mount('#app')\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","export function roomsValid(obj) {\n\tconst roomsValidate = [\n\t\t{ key: 'roomId', type: ['string', 'number'] },\n\t\t{ key: 'roomName', type: ['string'] },\n\t\t{ key: 'users', type: ['array'] }\n\t]\n\n\tconst validate = (obj, props) => {\n\t\treturn props.every(prop => {\n\t\t\tlet validType = false\n\n\t\t\tif (prop.type[0] === 'array' && Array.isArray(obj[prop.key])) {\n\t\t\t\tvalidType = true\n\t\t\t} else if (prop.type.find(t => t === typeof obj[prop.key])) {\n\t\t\t\tvalidType = true\n\t\t\t}\n\n\t\t\treturn validType && checkObjectValid(obj, prop.key)\n\t\t})\n\t}\n\n\treturn validate(obj, roomsValidate)\n}\n\nexport function partcipantsValid(obj) {\n\tconst participantsValidate = [\n\t\t{ key: '_id', type: ['string', 'number'] },\n\t\t{ key: 'username', type: ['string'] }\n\t]\n\n\tconst validate = (obj, props) => {\n\t\treturn props.every(prop => {\n\t\t\tconst validType = prop.type.find(t => t === typeof obj[prop.key])\n\t\t\treturn validType && checkObjectValid(obj, prop.key)\n\t\t})\n\t}\n\n\treturn validate(obj, participantsValidate)\n}\n\nexport function messagesValid(obj) {\n\tconst participantsValidate = [\n\t\t{ key: '_id', type: ['string', 'number'] },\n\t\t{ key: 'content', type: ['string', 'number'] },\n\t\t{ key: 'sender_id', type: ['string', 'number'] }\n\t]\n\n\tconst validate = (obj, props) => {\n\t\treturn props.every(prop => {\n\t\t\tconst validType = prop.type.find(t => t === typeof obj[prop.key])\n\t\t\treturn validType && checkObjectValid(obj, prop.key)\n\t\t})\n\t}\n\n\treturn validate(obj, participantsValidate)\n}\n\nfunction checkObjectValid(obj, key) {\n\treturn Object.prototype.hasOwnProperty.call(obj, key) && obj[key] !== null && obj[key] !== undefined\n}\n","export * from \"-!../../demo/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../demo/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../demo/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../demo/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../demo/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./Loader.vue?vue&type=style&index=0&id=70a1ca66&lang=scss&scoped=true&\"","export * from \"-!../../demo/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../demo/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../demo/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../demo/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../demo/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatWindow.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../demo/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../demo/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../demo/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../demo/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./FormatMessage.vue?vue&type=style&index=0&lang=css&\"","export function detectMobile() {\n\tvar userAgent = getUserAgent()\n\n\tvar userAgentPart = userAgent.substr(0, 4)\n\n\treturn (\n\t\t/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(\n\t\t\tuserAgent\n\t\t) ||\n\t\t/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw(n|u)|c55\\/|capi|ccwa|cdm|cell|chtm|cldc|cmd|co(mp|nd)|craw|da(it|ll|ng)|dbte|dcs|devi|dica|dmob|do(c|p)o|ds(12|d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(|_)|g1 u|g560|gene|gf5|gmo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd(m|p|t)|hei|hi(pt|ta)|hp( i|ip)|hsc|ht(c(| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i(20|go|ma)|i230|iac( ||\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|[a-w])|libw|lynx|m1w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|mcr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|([1-8]|c))|phil|pire|pl(ay|uc)|pn2|po(ck|rt|se)|prox|psio|ptg|qaa|qc(07|12|21|32|60|[2-7]|i)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h|oo|p)|sdk\\/|se(c(|0|1)|47|mc|nd|ri)|sgh|shar|sie(|m)|sk0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h|v|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl|tdg|tel(i|m)|tim|tmo|to(pl|sh)|ts(70|m|m3|m5)|tx9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas|your|zeto|zte/i.test(\n\t\t\tuserAgentPart\n\t\t)\n\t)\n}\n\nfunction getUserAgent() {\n\tvar userAgent =\n\t\tnavigator.userAgent || navigator.vendor || window.opera || null\n\n\tif (!userAgent) throw new Error('Failed to look for user agent information.')\n\n\treturn userAgent\n}\n\nexport function iOSDevice() {\n\treturn (\n\t\t['iPad', 'iPhone', 'iPod'].includes(navigator.platform) ||\n\t\t(navigator.userAgent.includes('Mac') && 'ontouchend' in document)\n\t)\n}\n","module.exports = \"data:image/png;base64,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\"","export * from \"-!../../demo/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../demo/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../demo/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../demo/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../demo/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&id=7c02eae5&lang=scss&scoped=true&\"","export * from \"-!../../demo/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../demo/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../demo/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../demo/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../demo/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./Room.vue?vue&type=style&index=0&id=06df2d8e&lang=scss&scoped=true&\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatContainer.vue?vue&type=style&index=0&id=175c4043&lang=scss&scoped=true&\""],"sourceRoot":""}